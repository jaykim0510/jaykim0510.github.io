I"Ø<p id="toc"><strong>Table of Contents</strong></p>
<ul id="markdown-toc">
  <li><a href="#dockerfile" id="markdown-toc-dockerfile">Dockerfile</a></li>
  <li><a href="#dockerfile-instructions" id="markdown-toc-dockerfile-instructions">Dockerfile Instructions</a>    <ul>
      <li><a href="#from" id="markdown-toc-from">FROM</a>        <ul>
          <li><a href="#multi-stage-builds" id="markdown-toc-multi-stage-builds">Multi-Stage Builds</a></li>
        </ul>
      </li>
      <li><a href="#run" id="markdown-toc-run">RUN</a></li>
      <li><a href="#label" id="markdown-toc-label">LABEL</a></li>
      <li><a href="#env" id="markdown-toc-env">ENV</a></li>
    </ul>
  </li>
  <li><a href="#ì°¸ê³ " id="markdown-toc-ì°¸ê³ ">ì°¸ê³ </a></li>
</ul>

<hr />
<p><strong>Dockerfile instruction</strong></p>

<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />FROM</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />RUN</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />LABEL</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />ENV</li>
</ul>

<h1 id="dockerfile">Dockerfile</h1>

<h1 id="dockerfile-instructions">Dockerfile Instructions</h1>

<h2 id="from">FROM</h2>
<p>FROMì€ ë¹Œë“œë¥¼ ìœ„í•œ stageë¥¼ ì´ˆê¸°í™”í•˜ê³  ì´í›„ì˜ ëª…ë ¹ì–´ë¥¼ ìœ„í•œ <strong>ê¸°ë³¸ ì´ë¯¸ì§€ë¥¼ ë§Œë“­ë‹ˆë‹¤</strong>. ê·¸ë ‡ê¸° ë•Œë¬¸ì— ìœ íš¨í•œ Dockerfileì€ ë°˜ë“œì‹œ FROM ëª…ë ¹ì–´ë¡œë¶€í„° ì‹œì‘í•´ì•¼ í•©ë‹ˆë‹¤.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">FROM [--platform=&lt;platform&gt;] &lt;image&gt; [AS &lt;name&gt;]</code></li>
  <li><code class="language-plaintext highlighter-rouge">FROM [--platform=&lt;platform&gt;] &lt;image&gt;[:&lt;tag&gt;] [AS &lt;name&gt;]</code></li>
</ul>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># python:3.8-buster ì´ë¯¸ì§€ë¥¼ ê¸°ë³¸ ì´ë¯¸ì§€ë¡œ ë§Œë“­ë‹ˆë‹¤</span>
<span class="k">FROM</span><span class="s"> python:3.8-buster</span>

<span class="c"># í˜„ì¬ Dockerfileì´ ìˆëŠ” ìœ„ì¹˜ì— ìˆëŠ” ëª¨ë“  íŒŒì¼ì„ ìƒˆë¡œ ë§Œë“  ì´ë¯¸ì§€ì˜ ë””ë ‰í† ë¦¬ ìœ„ì¹˜ë¡œ ë³µì‚¬í•©ë‹ˆë‹¤</span>
<span class="k">COPY</span><span class="s"> . .</span>

<span class="c"># ë³µì‚¬ëœ requirements.txt íŒŒì¼ì— ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì„¤ì¹˜</span>
<span class="k">RUN </span>pip <span class="nb">install</span> <span class="nt">-r</span> requirements.txt
</code></pre></div></div>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># deeplearning:pytorch ë¼ëŠ” ìƒˆë¡œìš´ ì´ë¯¸ì§€ë¥¼ ë§Œë“­ë‹ˆë‹¤</span>
docker build <span class="nt">-t</span> deeplearning:pytorch <span class="nb">.</span>
</code></pre></div></div>

<h3 id="multi-stage-builds">Multi-Stage Builds</h3>
<p>One of the most challenging things about building images is keeping the image size down. Each instruction in the Dockerfile adds a layer to the image, and you need to remember to clean up any artifacts you donâ€™t need before moving on to the next layer.</p>

<p><strong>ì´ë¯¸ì§€ë¥¼ ë¹Œë“œí•  ë•Œ ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€ ì´ë¯¸ì§€ì˜ ì‚¬ì´ì¦ˆë¥¼ ì¤„ì´ëŠ” ê²ƒ</strong>ì…ë‹ˆë‹¤. Dockerfileì—ì„œ ê°ê°ì˜ ëª…ë ¹ì–´ëŠ” ì´ë¯¸ì§€ì˜ layerë¥¼ í•˜ë‚˜ì”© ëŠ˜ë ¤ë‚˜ê°€ê²Œ ë©ë‹ˆë‹¤. ì´ë¥¼ ê²½ëŸ‰í™”í•˜ëŠ” ë°©ë²•ìœ¼ë¡œ RUN ëª…ë ¹ì–´ ì‚¬ìš©ì‹œ Bashì—ì„œ &amp;&amp; ì—°ì‚°ìë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<p>ë˜í•œ ë§Œì•½ ì—¬ëŸ¬ ê°œì˜ ì´ë¯¸ì§€ë¡œë¶€í„° ìƒˆë¡œìš´ ì´ë¯¸ì§€ë¥¼ ë¶ˆëŸ¬ì™€ì•¼ í•˜ëŠ” ìƒí™©ì´ë¼ë©´ <strong>FROM ê³¼ COPYë¥¼ ì‚¬ìš©í•´ ì´ë¯¸ì§€ë¥¼ ê²½ëŸ‰í™”</strong> í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ ì´ìš©í•˜ë©´ ê°ê°ì˜ ì´ë¯¸ì§€ì—ì„œ <strong>ì›í•˜ëŠ” íŒŒì¼ë§Œ ì„ íƒì ìœ¼ë¡œ ë³µì‚¬í•´ ë‹¤ìŒ ì´ë¯¸ì§€ë¡œ ì „ë‹¬ì‹œí‚¤ê³  í•„ìš”ì—†ëŠ” íŒŒì¼(ë‹¤ìš´ë¡œë“œ ê³¼ì •ì—ì„œ í•„ìš”í•œ ì½”ë“œì™€ ê°™ì€ ë¶€ìˆ˜ì ì¸ íŒŒì¼ë“¤)ì€ ì œê±°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤</strong>. ì´ ë°©ë²•ì„ <strong>Multi-Stage Builds</strong>ë¼ê³  í•˜ëŠ”ë° ì´ ë°©ë²•ì€ ì—¬ëŸ¬ ê°œì˜ ì´ë¯¸ì§€ë¡œ ë¶€í„° ìƒˆë¡œìš´ ì´ë¯¸ì§€ë¥¼ ìƒì„±í•  ë•Œ ì—¬ëŸ¬ ê°œì˜ Dockerfileì´ í•„ìš”ì—†ì´ <strong>í•˜ë‚˜ì˜ íŒŒì¼ì— ê´€ë¦¬í•  ìˆ˜ ìˆë‹¤</strong>ëŠ” ì¥ì ë„ ìˆìŠµë‹ˆë‹¤.</p>

<p>Multi Stage Builds ë°©ë²•ìœ¼ë¡œ ì´ë¯¸ì§€ë¥¼ ë§Œë“œëŠ” ì½”ë“œì˜ í˜•íƒœëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> &lt;image&gt; AS apple</span>
...


<span class="k">FROM</span><span class="s"> &lt;image2&gt;</span>
...
<span class="k">COPY</span><span class="s"> --from=apple /dir/you/want/from/apple /dir/of/image2</span>
</code></pre></div></div>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">FROM</span><span class="s"> &lt;image&gt; AS apple</span>
...


<span class="k">FROM</span><span class="s"> apple AS apple_juice</span>
...
<span class="k">COPY</span><span class="s"> /dir/you/want/from/apple /dir/of/apple_juice</span>
</code></pre></div></div>

<h2 id="run">RUN</h2>

<h2 id="label">LABEL</h2>

<h2 id="env">ENV</h2>

<h1 id="ì°¸ê³ ">ì°¸ê³ </h1>

<ul>
  <li><a href="https://docs.docker.com/engine/reference/builder/#cmd" target="_blank">Docker ê³µì‹ë¬¸ì„œ</a></li>
  <li><a href="https://docs.docker.com/develop/develop-images/multistage-build/" target="_blank">Docker ê³µì‹ë¬¸ì„œ2</a></li>
  <li><a href="https://stackoverflow.com/questions/33322103/multiple-froms-what-it-means" target="_blank">stack overfolw Nagev ë‹µë³€</a></li>
  <li><a href="https://earthly.dev/blog/docker-multistage/" target="_blank">EARTHLY ë¸”ë¡œê·¸: Docker Multistage Builds</a></li>
  <li><a href="https://www.geeksforgeeks.org/how-to-combine-multiple-base-images-using-single-dockerfile/" target="_blank">geeksforgeeks ë¸”ë¡œê·¸</a></li>
</ul>
:ET