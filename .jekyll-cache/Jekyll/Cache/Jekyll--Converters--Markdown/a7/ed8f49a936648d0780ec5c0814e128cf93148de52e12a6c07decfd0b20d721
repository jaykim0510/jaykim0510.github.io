I"ñ<h1 id="elasticsearch-ì†Œê°œ">Elasticsearch ì†Œê°œ</h1>
<ul>
  <li>ElasticsearchëŠ” ì •í˜• ë° ë¹„ì •í˜• ë°ì´í„° ë“± ëª¨ë“  ìœ í˜•ì˜ ë°ì´í„°ë¥¼ ìœ„í•œ ë¬´ë£Œ ê²€ìƒ‰ ë° ë¶„ì„ ì—”ì§„</li>
  <li>Apache Luceneì„ ê¸°ë°˜ìœ¼ë¡œ êµ¬ì¶•</li>
  <li>Elastic Stackì˜ í•µì‹¬ êµ¬ì„±ìš”ì†Œ(Elasticsearch, Logstash, Kibana)</li>
  <li>ê¸°ë³¸ì ìœ¼ë¡œëŠ” ê²€ìƒ‰ì—”ì§„ì´ì§€ë§Œ, MongoDBë‚˜ HBaseì²˜ëŸ¼ ëŒ€ìš©ëŸ‰ ìŠ¤í† ë¦¬ì§€ë¡œë„ í™œìš©</li>
</ul>

<p><img src="/images/elastic_1.png" alt="" /></p>

<h1 id="elasticsearch-ì„¤ì¹˜">Elasticsearch ì„¤ì¹˜</h1>

<p>ğŸ± <code class="language-plaintext highlighter-rouge">ì‚¬ìš©í™˜ê²½</code></p>
<ul>
  <li>Macbook M1</li>
  <li>Docker on mac</li>
  <li>Local python 3.8.9</li>
</ul>

<h2 id="dockerë¥¼-ì´ìš©í•œ-ì„¤ì¹˜">Dockerë¥¼ ì´ìš©í•œ ì„¤ì¹˜</h2>

<p>ë¨¼ì € Elasticsearch ì´ë¯¸ì§€ë¥¼ Dockerhubì—ì„œ ë‹¤ìš´ ë°›ì•„ì˜µë‹ˆë‹¤. <a href="https://hub.docker.com/_/elasticsearch?tab=tags&amp;page=1">(ì°¸ê³ : Dockerhub)</a><br />
ì œê°€ ì‚¬ìš©í•˜ê³  ìˆëŠ” ë§¥ë¶ì˜ M1ì¹©ì€ <code class="language-plaintext highlighter-rouge">linux/arm64/v8</code> OS architectureë§Œ ì§€ì›í•˜ê¸° ë•Œë¬¸ì— 7.16.2 ë²„ì „ì˜ ì´ë¯¸ì§€ë¥¼ ê°€ì ¸ì˜¤ë ¤ê³  í•©ë‹ˆë‹¤.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull elasticsearch:7.16.2
</code></pre></div></div>

<p>ì´ì œ ì´ë¯¸ì§€ë¥¼ ê°€ì§€ê³  ì»¨í…Œì´ë„ˆë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ElasticsearchëŠ” ë³´í†µ ì„±ëŠ¥ìƒì˜ ì´ìœ ë¡œ ë¶„ì‚°í™˜ê²½ì—ì„œ ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ê¶Œì¥í•˜ì§€ë§Œ ë‹¨ìˆœ í…ŒìŠ¤íŠ¸ ë˜ëŠ” ê³µë¶€ë¥¼ ëª©ì ìœ¼ë¡œ í•œë‹¤ë©´ ë‹¨ì¼ ë…¸ë“œ í™˜ê²½ì—ì„œ ì‹¤í–‰í•˜ì—¬ë„ ë¬¸ì œê°€ ì—†ìŠµë‹ˆë‹¤. Elasticsearch ë¬¸ì„œì—ì„œëŠ” ë‘ ê°€ì§€ ë°©ë²•ì— ëŒ€í•œ ë„ì»¤ ëª…ë ¹ì–´ë¥¼ ì œê³µí•˜ë¯€ë¡œ, ì‚¬ìš© ëª©ì ì— ë§ê²Œ ì‹¤í–‰ì‹œí‚¤ë©´ ë©ë‹ˆë‹¤. <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docker.html">(ì°¸ê³ : Elasticsearch ê³µì‹ ë¬¸ì„œ)</a></p>

<ul>
  <li>Single-node
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker run -p 127.0.0.1:9200:9200 -p 127.0.0.1:9300:9300 -e "discovery.type=single-node" docker.elastic.co/elasticsearch/elasticsearch:7.16.2
</code></pre></div>    </div>
  </li>
  <li>Multi-node</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Create a docker-compose.yml file

version: '2.2'
services:
  es01:
    image: docker.elastic.co/elasticsearch/elasticsearch:7.16.2
    container_name: es01
    environment:
      - node.name=es01
      - cluster.name=es-docker-cluster
      - discovery.seed_hosts=es02,es03
      - cluster.initial_master_nodes=es01,es02,es03
      - bootstrap.memory_lock=true
      - "ES_JAVA_OPTS=-Xms512m -Xmx512m"
    ulimits:
      memlock:
        soft: -1
        hard: -1
    volumes:
      - data01:/usr/share/elasticsearch/data
    ports:
      - 9200:9200
    networks:
      - elastic
  es02:
    image: docker.elastic.co/elasticsearch/elasticsearch:7.16.2
    container_name: es02
    environment:
      - node.name=es02
      - cluster.name=es-docker-cluster
      - discovery.seed_hosts=es01,es03
      - cluster.initial_master_nodes=es01,es02,es03
      - bootstrap.memory_lock=true
      - "ES_JAVA_OPTS=-Xms512m -Xmx512m"
    ulimits:
      memlock:
        soft: -1
        hard: -1
    volumes:
      - data02:/usr/share/elasticsearch/data
    networks:
      - elastic
  es03:
    image: docker.elastic.co/elasticsearch/elasticsearch:7.16.2
    container_name: es03
    environment:
      - node.name=es03
      - cluster.name=es-docker-cluster
      - discovery.seed_hosts=es01,es02
      - cluster.initial_master_nodes=es01,es02,es03
      - bootstrap.memory_lock=true
      - "ES_JAVA_OPTS=-Xms512m -Xmx512m"
    ulimits:
      memlock:
        soft: -1
        hard: -1
    volumes:
      - data03:/usr/share/elasticsearch/data
    networks:
      - elastic

volumes:
  data01:
    driver: local
  data02:
    driver: local
  data03:
    driver: local

networks:
  elastic:
    driver: bridge
</code></pre></div></div>
<p>ì´ë ‡ê²Œ í•˜ê³ ë‚˜ë©´ Elasticsearch ì„¤ì¹˜ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. localhostì˜ 9200ë²ˆ í¬íŠ¸ë¡œ Elasticsearchì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ì œ í´ë¼ì´ì–¸íŠ¸ ëª¨ë“œë¡œ Elasticsearchë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>

<h2 id="github--dockerë¥¼-ì´ìš©í•œ-ì„¤ì¹˜">github + Dockerë¥¼ ì´ìš©í•œ ì„¤ì¹˜</h2>
<p>ê¹ƒí—ˆë¸Œì— Elasticsearchë¿ë§Œ ì•„ë‹ˆë¼, Kibanaì™€ Logstashë¥¼ í•¨ê»˜ ì„¤ì¹˜í•´ì£¼ëŠ” ì½”ë“œê°€ ìˆì–´ì„œ ê³µìœ ë“œë¦½ë‹ˆë‹¤.<br />
<a href="https://github.com/deviantony/docker-elk">(ì°¸ê³ : deviantony/docker-elk)</a></p>

<h2 id="linuxì—-ì§ì ‘-ì„¤ì¹˜">Linuxì— ì§ì ‘ ì„¤ì¹˜</h2>
<p>ì´ ë°©ë²•ì€ ì œê°€ ì „ì— ë¶€ìŠ¤íŠ¸ìº í”„ì—ì„œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•  ë•Œ íŒ€ì› ì¤‘ í•œ ë¶„ì´ ê³µìœ í•´ì£¼ì…¨ì—ˆëŠ”ë°, ì˜ ë™ì‘í•˜ì—¬ì„œ ê³µìœ ë“œë¦½ë‹ˆë‹¤.</p>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>apt-get update &amp;&amp; apt-get install -y gnupg2
wget -qO - https://artifacts.elastic.co/GPG-KEY-elasticsearch | apt-key add -
apt-get install apt-transport-https
echo "deb https://artifacts.elastic.co/packages/7.x/apt stable main" | tee /etc/apt/sources.list.d/elastic-7.x.list
apt-get update &amp;&amp; apt-get install elasticsearch
service elasticsearch start
cd /usr/share/elasticsearch
bin/elasticsearch-plugin install analysis-nori
service elasticsearch restart
</code></pre></div></div>

<h2 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°</h2>

<p>Elasticsearchì—ì„œëŠ” ë‹¤ì–‘í•œ í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¡œ Elasticsearch Client APIë¥¼ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. ì €ëŠ” ê·¸ ì¤‘ì—ì„œ ì œê°€ ìì£¼ ì‚¬ìš©í•˜ëŠ” íŒŒì´ì¬ìœ¼ë¡œ Client APIë¥¼ ì‚¬ìš©í•´ ë³´ê² ìŠµë‹ˆë‹¤.</p>
<ul>
  <li>Java</li>
  <li>Python</li>
  <li>Node.js</li>
  <li>C#</li>
  <li>Go</li>
  <li>Ruby</li>
  <li>PHP</li>
  <li>Perl</li>
</ul>
:ET