I"²&<hr />

<p id="toc"><strong>Table of Contents</strong></p>
<ul id="markdown-toc">
  <li><a href="#jenkins-ì„¤ì¹˜í•˜ê¸°" id="markdown-toc-jenkins-ì„¤ì¹˜í•˜ê¸°">Jenkins ì„¤ì¹˜í•˜ê¸°</a></li>
  <li><a href="#ë„ì»¤-ì»¨í…Œì´ë„ˆë¡œ-jenkins-ë„ìš°ê¸°" id="markdown-toc-ë„ì»¤-ì»¨í…Œì´ë„ˆë¡œ-jenkins-ë„ìš°ê¸°">ë„ì»¤ ì»¨í…Œì´ë„ˆë¡œ Jenkins ë„ìš°ê¸°</a>    <ul>
      <li><a href="#ë„ì»¤-ì´ë¯¸ì§€-pull" id="markdown-toc-ë„ì»¤-ì´ë¯¸ì§€-pull">ë„ì»¤ ì´ë¯¸ì§€ Pull</a></li>
      <li><a href="#jenkins-ì»¨í…Œì´ë„ˆ-ì‹¤í–‰" id="markdown-toc-jenkins-ì»¨í…Œì´ë„ˆ-ì‹¤í–‰">Jenkins ì»¨í…Œì´ë„ˆ ì‹¤í–‰</a></li>
    </ul>
  </li>
  <li><a href="#jenkins-ì»¨í…Œì´ë„ˆì—ì„œ-ë„ì»¤-cliê°€-í•„ìš”í•œ-ìˆœê°„ì´-ì˜¨ë‹¤" id="markdown-toc-jenkins-ì»¨í…Œì´ë„ˆì—ì„œ-ë„ì»¤-cliê°€-í•„ìš”í•œ-ìˆœê°„ì´-ì˜¨ë‹¤">Jenkins ì»¨í…Œì´ë„ˆì—ì„œ ë„ì»¤ CLIê°€ í•„ìš”í•œ ìˆœê°„ì´ ì˜¨ë‹¤</a></li>
  <li><a href="#ì°¸ê³ " id="markdown-toc-ì°¸ê³ ">ì°¸ê³ </a></li>
</ul>

<hr />

<h1 id="jenkins-ì„¤ì¹˜í•˜ê¸°">Jenkins ì„¤ì¹˜í•˜ê¸°</h1>

<blockquote>
  <p>Jenkins can be installed through native system packages, Docker, or even run standalone by any machine with a Java Runtime Environment (JRE) installed.</p>
</blockquote>

<h1 id="ë„ì»¤-ì»¨í…Œì´ë„ˆë¡œ-jenkins-ë„ìš°ê¸°">ë„ì»¤ ì»¨í…Œì´ë„ˆë¡œ Jenkins ë„ìš°ê¸°</h1>

<p>ë„ì»¤ ì´ë¯¸ì§€ë¥¼ ì´ìš©í•´ì„œ Jenkinsë¥¼ ë„ìš°ëŠ” ë°©ë²•ì€ ê°„ë‹¨í•©ë‹ˆë‹¤. ì‚¬ìš©í•˜ë‹¤ë³´ë©´ ì»¤ìŠ¤í„°ë§ˆì´ì§•í•  í•„ìš”ê°€ ìƒê²¨ ì´ë¯¸ì§€ë¥¼ ì§ì ‘ ë¹Œë“œí•´ì•¼ í•˜ëŠ” ìƒí™©ì´ ì˜¤ê² ì§€ë§Œ, ì•„ì§ ì €ëŠ” Jenkinsë¥¼ ì‚¬ìš©í•´ ë³¸ ê²½í—˜ì´ ì—†ê¸° ë•Œë¬¸ì— ë‹¨ìˆœíˆ ë„ìš°ëŠ” ë° ì˜ì˜ë¥¼ ë‘ê³  ì´ë²ˆ í¬ìŠ¤íŠ¸ë¥¼ ì‘ì„±í–ˆìŠµë‹ˆë‹¤.</p>

<h2 id="ë„ì»¤-ì´ë¯¸ì§€-pull">ë„ì»¤ ì´ë¯¸ì§€ Pull</h2>

<p>ìš°ì„  ë„ì»¤ í—ˆë¸Œì—ì„œ ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ë°›ìŠµë‹ˆë‹¤. ì €ëŠ” arm64 ì•„í‚¤í…ì²˜ë¥¼ í•„ìš”ë¡œ í•˜ê¸° ë•Œë¬¸ì— ê·¸ì— ë§ëŠ” ì´ë¯¸ì§€ë¥¼ ë‹¤ìš´ ë°›ì•˜ìŠµë‹ˆë‹¤.</p>

<p><img src="/images/jenkins_1.png" alt="" /></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker pull jenkins/jenkins:2.332.1-lts-jdk11
</code></pre></div></div>

<h2 id="jenkins-ì»¨í…Œì´ë„ˆ-ì‹¤í–‰">Jenkins ì»¨í…Œì´ë„ˆ ì‹¤í–‰</h2>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># p: jenkins ì›¹ UIë¥¼ localhostë¡œ ì ‘ì†í•˜ê¸° ìœ„í•´</span>
<span class="c"># u: ë‚´ê°€ ì‚¬ìš©í•œ jenkins ì´ë¯¸ì§€ ì‚¬ìš©ìê°€ rootë¡œ ì•ˆë˜ì–´ ìˆì–´ ì»¨í…Œì´ë„ˆ ë‚´ì—ì„œ apt-get update ì´ëŸ°ê²Œ ì•ˆë˜ì„œ rootë¡œ ë°”ê¿”ì¤Œ</span>
<span class="c"># v: ë‚˜ì¤‘ì— ë’¤ì—ì„œ ì‚¬ìš©í•  DooD íŒ¨í„´ì„ ìœ„í•´ jenkins ì»¨í…Œì´ë„ˆì™€ í˜¸ìŠ¤íŠ¸ì˜ ì†Œì¼“ì„ ë§ˆìš´íŠ¸í•´ì•¼í•¨  </span>
docker run <span class="nt">-p</span> 8080:8080 <span class="nt">-u</span> root <span class="nt">-v</span> /var/run/docker.sock:/var/run/docker.sock <span class="nt">-it</span> jenkins/jenkins:2.332.1-lts-jdk11 /bin/bash
</code></pre></div></div>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ë¡œì»¬í˜¸ìŠ¤íŠ¸ 8080í¬íŠ¸ë¡œ Jenkins Web UIì— ì ‘ê·¼</span>
localhost:8080
</code></pre></div></div>

<p>ê·¸ëŸ¬ë©´ ë­”ê°€ ë¹„ë°€ë²ˆí˜¸ ê°™ì€ê±°ë¥¼ ì…ë ¥í•˜ë¼ê³  ëœ¨ëŠ”ë° ì´ëŠ” ì»¨í…Œì´ë„ˆ ë¡œê·¸ì— ë‚¨ì•„ìˆì–´ì„œ ë³µë¶™í•˜ë©´ ë©ë‹ˆë‹¤.</p>

<p><img src="/images/jenkins_3.png" alt="" /></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>docker logs &lt;ì»¨í…Œì´ë„ˆëª…&gt;
</code></pre></div></div>

<p><img src="/images/jenkins_2.png" alt="" /></p>

<p>ê·¸ëŸ¬ë©´ í”ŒëŸ¬ê·¸ì¸ ì„¤ì¹˜ë¥¼ ì–´ë–¤ ë°©ë²•ìœ¼ë¡œ í•  ê²ƒì¸ì§€ ë¬»ëŠ”ë° ì €ëŠ” Jenkinsì—ì„œ ì„ íƒí•´ì¤€ ê²ƒë“¤ë¡œ ìš°ì„  ì„¤ì¹˜í•˜ê² ìŠµë‹ˆë‹¤.</p>

<p><img src="/images/jenkins_4.png" alt="" /></p>

<p>í”ŒëŸ¬ê·¸ì¸ë“¤ì„ ì—´ì‹¬íˆ ì„¤ì¹˜í•˜ê³  ìˆìŠµë‹ˆë‹¤. Gitì´ ìì£¼ ì‚¬ìš©ë˜ëŠ”ì§€ ê¸°ë³¸ì ìœ¼ë¡œ ì„¤ì¹˜ê°€ ë˜ëŠ” ëª¨ìŠµì…ë‹ˆë‹¤.</p>

<p><img src="/images/jenkins_5.png" alt="" /></p>

<p>ì„¤ì¹˜ê°€ ëë‚˜ë©´ ê³„ì • ì„¤ì •ì„ í•˜ë¼ê³  ë‚˜ì˜¤ê³  ê°„ë‹¨íˆ ì…ë ¥í•˜ê³  ë‚˜ë©´ Jenkins web UIê°€ ì˜ ë³´ì…ë‹ˆë‹¤.</p>

<p><img src="/images/jenkins_6.png" alt="" /></p>

<h1 id="jenkins-ì»¨í…Œì´ë„ˆì—ì„œ-ë„ì»¤-cliê°€-í•„ìš”í•œ-ìˆœê°„ì´-ì˜¨ë‹¤">Jenkins ì»¨í…Œì´ë„ˆì—ì„œ ë„ì»¤ CLIê°€ í•„ìš”í•œ ìˆœê°„ì´ ì˜¨ë‹¤</h1>

<p>JenkinsëŠ” CI/CDë¥¼ ìœ„í•œ ê¸°ë³¸ì ì¸ íˆ´ë¡œì¨ ìš”ì¦˜ê°™ì€ ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ íŒ¨í„´ì´ íŠ¸ë Œë“œì¸ ì‹œëŒ€ì—ì„œ ë„ì»¤ëŠ” ë°˜ë“œì‹œ í•„ìš”í•´ ë³´ì…ë‹ˆë‹¤. ì—¬ê¸°ì„œ ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤. ì €ëŠ” ë°©ê¸ˆ Jenkins ì„œë²„ë¥¼ ë„ì»¤ ì»¨í…Œì´ë„ˆë¡œ ë„ì› ëŠ”ë° ì»¨í…Œì´ë„ˆì—ì„œ ë„ì»¤ë¥¼ ë˜ ì„¤ì¹˜í•´ë„ ê´œì°®ì„ê¹Œìš”?</p>

<p>ì´ë ‡ê²Œ ë„ì»¤ ì»¨í…Œì´ë„ˆ ì•ˆì— ë„ì»¤ë¥¼ ë˜ ì„¤ì¹˜í•˜ëŠ” íŒ¨í„´ì„ <strong>Docker in Docker(DinD)</strong>ë¼ê³  í•˜ëŠ”ë° ë§ì€ ì‹œë‹ˆì–´ ê°œë°œìë“¤ì€ ì´ ë°©ì‹ì„ ê¶Œì¥í•˜ì§€ ì•ŠëŠ”ë‹¤ê³  í•©ë‹ˆë‹¤. ë‹¤ìŒì€ DinD ë°©ì‹ì— ëŒ€í•œ ì¥ë‹¨ì ì„ ì •ë¦¬í•´ë‘” í¬ìŠ¤íŠ¸ì´ë‹ˆ ì°¸ê³ í•´ë´ë„ ì¢‹ì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤. <a href="http://jpetazzo.github.io/2015/09/03/do-not-use-docker-in-docker-for-ci/" target="_blank">(<strong>~jpetazzo/Using Docker-in-Docker for your CI or testing environment? Think twice.</strong> ì°¸ê³ )</a></p>

<p><img src="/images/jenkins_7.png" alt="" /></p>

<p>DinDì˜ ë‹¨ì ì„ í•´ê²°í•˜ê³ ì ë‚˜ì˜¨ ë°©ì‹ì´ <strong>Docker out of Docker(DooD)</strong>ë¼ê³  í•©ë‹ˆë‹¤. ì´ ë°©ë²•ì€ ì»¨í…Œì´ë„ˆì— ë„ì»¤ ì—”ì§„(ë„ì»¤ í´ë¼ì´ì–¸íŠ¸ì™€ ë„ì»¤ í˜¸ìŠ¤íŠ¸)ì„ ì„¤ì¹˜í•˜ì§€ ì•Šê³  ë„ì»¤ í´ë¼ì´ì–¸íŠ¸ë§Œ ì„¤ì¹˜í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ë„ì»¤ Client ì„¤ì¹˜  </span>
<span class="c"># https://docs.docker.com/engine/install/debian/ ë°ë¹„ì•ˆ ìœ„ì—ì„œ ë„ì»¤ í´ë¼ì´ì–¸íŠ¸ ì„¤ì¹˜</span>
apt-get update

apt-get <span class="nb">install</span> <span class="se">\</span>
    ca-certificates <span class="se">\</span>
    curl <span class="se">\</span>
    gnupg <span class="se">\</span>
    lsb-release

curl <span class="nt">-fsSL</span> https://download.docker.com/linux/debian/gpg | gpg <span class="nt">--dearmor</span> <span class="nt">-o</span> /usr/share/keyrings/docker-archive-keyring.gpg

<span class="nb">echo</span> <span class="se">\</span>
  <span class="s2">"deb [arch=</span><span class="si">$(</span>dpkg <span class="nt">--print-architecture</span><span class="si">)</span><span class="s2"> signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/debian </span><span class="se">\</span><span class="s2">
  </span><span class="si">$(</span>lsb_release <span class="nt">-cs</span><span class="si">)</span><span class="s2"> stable"</span> | <span class="nb">tee</span> /etc/apt/sources.list.d/docker.list <span class="o">&gt;</span> /dev/null

apt-get update

apt-get <span class="nb">install </span>docker-ce-cli
</code></pre></div></div>

<p><img src="/images/jenkins_8.png" alt="" /></p>

<p>ë„ì»¤ í´ë¼ì´ì–¸íŠ¸ê°€ ì˜ ì„¤ì¹˜ë˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ <code class="language-plaintext highlighter-rouge">docker ps</code> ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•´ë´¤ìŠµë‹ˆë‹¤. ì•„ë˜ì˜ ì—ëŸ¬ëŠ” ìœ„ì—ì„œ <code class="language-plaintext highlighter-rouge">docker run</code> ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•  ë•Œ v ì˜µì…˜ìœ¼ë¡œ ë§ˆìš´íŠ¸í•˜ì§€ ì•Šì€ ê²½ìš° ë°œìƒí•˜ëŠ” ì—ëŸ¬ì…ë‹ˆë‹¤.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>root@bdab333aab12:/# docker ps
Cannot connect to the Docker daemon at unix:///var/run/docker.sock. Is the docker daemon running?
</code></pre></div></div>

<p>ìœ„ì— ì„¤ëª…í•œ ëŒ€ë¡œ ì˜ ë”°ë¼ì˜¤ì…¨ë‹¤ë©´ ì•„ë§ˆ ë‹¤ìŒê³¼ ê°™ì€ ê²°ê³¼ê°€ ì˜ ë³´ì¼ê²ë‹ˆë‹¤.</p>

<p><img src="/images/jenkins_9.png" alt="" /></p>

<p>ì—¬ê¸°ì„œ í•µì‹¬ì€</p>

<ol>
  <li>
    <p>ì»¨í…Œì´ë„ˆ ì•ˆì˜ ë„ì»¤ ì†Œì¼“ê³¼ í˜¸ìŠ¤íŠ¸ì˜ ë„ì»¤ ì†Œì¼“ì„ ë§ˆìš´íŠ¸ í•œë‹¤.</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> docker run <span class="se">\</span>
 <span class="nt">-v</span> /var/run/docker.sock:/var/run/docker.sock <span class="se">\</span>
 ...
</code></pre></div>    </div>
  </li>
  <li>
    <p>ì»¨í…Œì´ë„ˆ ì•ˆì˜ jenkins ìœ ì €ì—ê²Œ í˜¸ìŠ¤íŠ¸ì˜ ë„ì»¤ ì†Œì¼“ ì‹¤í–‰ ê¶Œí•œì„ ì¤€ë‹¤.</p>

    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ì•„ì§ ë˜ëŠ”ì§€ í™•ì¸í•´ë³´ì§„ ì•Šì•˜ë‹¤</span>
usermod <span class="nt">-u</span> &lt;í˜¸ìŠ¤íŠ¸ì˜ì‚¬ìš©ìì•„ì´ë””&gt; jenkins <span class="o">&amp;&amp;</span> <span class="se">\</span>
 groupmod <span class="nt">-g</span> &lt;í˜¸ìŠ¤íŠ¸ì˜ë„ì»¤ê·¸ë£¹ì•„ì´ë””&gt; docker <span class="o">&amp;&amp;</span> <span class="se">\</span>
 usermod <span class="nt">-aG</span> docker jenkins
</code></pre></div>    </div>
  </li>
</ol>

<h1 id="ì°¸ê³ ">ì°¸ê³ </h1>
<ul>
  <li><a href="https://bitgadak.tistory.com/3" target="_blank">ê¸°ì–µ ì €ì¥ì†Œ: DooD (docker-outside-of-docker) ë¥¼ í†µí•´ Jenkins ì»¨í…Œì´ë„ˆì—ì„œ docker ì‚¬ìš©í•˜ê¸°</a></li>
  <li><a href="https://postlude.github.io/2020/12/26/docker-in-docker/" target="_blank">postlude: Jenkinsë¥¼ docker ì»¨í…Œì´ë„ˆë¡œ êµ¬ì¶•í•˜ê¸°(Docker in Docker)</a></li>
  <li><a href="https://aidanbae.github.io/code/docker/dinddood/" target="_blank">ì•„ì´ë‹¨ì€ ì–´ë”” ê°”ì„ê¹Œ: DinD(docker in docker)ì™€ DooD(docker out of docker)</a></li>
  <li><a href="https://stackoverflow.com/questions/54268180/why-does-simple-dockerfile-give-permission-denied" target="_blank">ë„ì»¤ ì»¨í…Œì´ë„ˆì—ì„œ permission denied í•´ê²°í•˜ëŠ” ë°©ë²•: docker run -u root â€¦</a></li>
  <li><a href="https://docs.docker.com/engine/install/debian/" target="_blank">ë„ì»¤ ê³µì‹ë¬¸ì„œ: ë°ë¹„ì•ˆ ìœ„ì— ë„ì»¤ ì„¤ì¹˜í•˜ëŠ” ë°©ë²•</a></li>
  <li><a href="https://www.quora.com/Is-java-mandatory-for-jenkins-installation" target="_blank">Do we need java for jenkins?</a></li>
</ul>
:ET