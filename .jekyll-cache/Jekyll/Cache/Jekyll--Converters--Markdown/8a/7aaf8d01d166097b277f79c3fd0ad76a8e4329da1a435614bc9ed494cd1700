I"®N<hr />

<p id="toc"><strong>Table of Contents</strong></p>
<ul id="markdown-toc">
  <li><a href="#airflowë€" id="markdown-toc-airflowë€">Airflowë€?</a></li>
  <li><a href="#airflow-ë°°ê²½" id="markdown-toc-airflow-ë°°ê²½">Airflow ë°°ê²½</a></li>
  <li><a href="#airflow-êµ¬ì¡°" id="markdown-toc-airflow-êµ¬ì¡°">Airflow êµ¬ì¡°</a></li>
  <li><a href="#airflow-ë™ì‘ì›ë¦¬" id="markdown-toc-airflow-ë™ì‘ì›ë¦¬">Airflow ë™ì‘ì›ë¦¬</a></li>
  <li><a href="#dag" id="markdown-toc-dag">DAG</a>    <ul>
      <li><a href="#operators" id="markdown-toc-operators">Operators</a></li>
      <li><a href="#sensors" id="markdown-toc-sensors">Sensors</a></li>
      <li><a href="#dag-ë§Œë“¤ì–´ë³´ê¸°" id="markdown-toc-dag-ë§Œë“¤ì–´ë³´ê¸°">DAG ë§Œë“¤ì–´ë³´ê¸°</a>        <ul>
          <li><a href="#dag-ì •ì˜í• -ë•Œ-ìì£¼-ì‚¬ìš©í•˜ëŠ”-íŒŒë¼ë¯¸í„°" id="markdown-toc-dag-ì •ì˜í• -ë•Œ-ìì£¼-ì‚¬ìš©í•˜ëŠ”-íŒŒë¼ë¯¸í„°">DAG ì •ì˜í•  ë•Œ ìì£¼ ì‚¬ìš©í•˜ëŠ” íŒŒë¼ë¯¸í„°</a></li>
          <li><a href="#dagë¥¼-ì„ ì–¸í•˜ëŠ”-3ê°€ì§€-ë°©ë²•" id="markdown-toc-dagë¥¼-ì„ ì–¸í•˜ëŠ”-3ê°€ì§€-ë°©ë²•">DAGë¥¼ ì„ ì–¸í•˜ëŠ” 3ê°€ì§€ ë°©ë²•</a></li>
          <li><a href="#dag-ì‘ì„±-ì˜ˆì‹œ" id="markdown-toc-dag-ì‘ì„±-ì˜ˆì‹œ">DAG ì‘ì„± ì˜ˆì‹œ</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#task" id="markdown-toc-task">Task</a></li>
  <li><a href="#dashboard" id="markdown-toc-dashboard">Dashboard</a></li>
  <li><a href="#ì°¸ê³ " id="markdown-toc-ì°¸ê³ ">ì°¸ê³ </a></li>
</ul>

<hr />

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DAGs, Operators, Tasks, Sensors, Executor, Scheduler
</code></pre></div></div>

<h1 id="airflowë€">Airflowë€?</h1>

<ul>
  <li>2014ë…„ ì—ì–´ë¹„ì•¤ë¹„(Airbnb)ì—ì„œ ì‹œì‘ë˜ì–´, í˜„ì¬ ì•„íŒŒì¹˜(Apache) ì¬ë‹¨ íƒ‘ë ˆë²¨ í”„ë¡œì íŠ¸</li>
  <li>AirflowëŠ” Python ì½”ë“œë¡œ ì›Œí¬í”Œë¡œìš°(workflow)ë¥¼ ì‘ì„±í•˜ê³ , ìŠ¤ì¼€ì¤„ë§, ëª¨ë‹ˆí„°ë§ í•˜ëŠ” í”Œë«í¼</li>
  <li>Airflowë¥¼ í†µí•´ì„œ ë°ì´í„°ì—”ì§€ë‹ˆì–´ë§ì˜ ETL ì‘ì—…ì„ ìë™í™”í•˜ê³ , DAG(Directed Acyclic Graph) í˜•íƒœì˜ ì›Œí¬í”Œë¡œìš° ì‘ì„±ì´ ê°€ëŠ¥</li>
  <li>AWS, GCP ëª¨ë‘ Airflow managed serviceë¥¼ ì œê³µí•  ì •ë„ë¡œ ë„ë¦¬ ì‚¬ìš©</li>
</ul>

<p><img src="/images/airflow_2.png" alt="" /></p>

<h1 id="airflow-ë°°ê²½">Airflow ë°°ê²½</h1>

<ul>
  <li>ê°œì¸, ê¸°ì—…ì„ ë„˜ì–´ ê³µê³µê¸°ê´€ê¹Œì§€ ì¼ìƒì  ë¹„ì¦ˆë‹ˆìŠ¤ì˜ ì¼ë¶€ë¡œ ë°ì´í„° íŒŒì´í”„ë¼ì¸ì„ ë„ì…í•˜ê³  ìˆë‹¤</li>
  <li>AirflowëŠ” ë°ì´í„° íŒŒì´í”„ë¼ì¸ì¤‘ ë°°ì¹˜ íƒœìŠ¤í¬ì— ì¤‘ì‹¬ì„ ë‘” <strong>Batch-Oriented Framework</strong> ì´ë‹¤</li>
</ul>

<div class="pen-para">
    <div class="pen-bar">
      <i class="fas fa-pen"></i>Airflowê°€ ì í•©í•˜ì§€ ì•Šì€ ê²½ìš°
    </div>
    <div class="pen-content">
      <li>ìŠ¤íŠ¸ë¦¬ë° ì›Œí¬í”Œë¡œ</li>
      <li>ì¶”ê°€ ë° ì‚­ì œ íƒœìŠ¤í¬ê°€ ë¹ˆë²ˆí•œ ë™ì  íŒŒì´í”„ë¼ì¸</li>
    </div>
</div>

<h1 id="airflow-êµ¬ì¡°">Airflow êµ¬ì¡°</h1>

<p><img src="/images/airflow_1.png" alt="" /></p>

<ul>
  <li>Scheduler:
    <ul>
      <li>DAG Directoryì— ì €ì¥ëœ DAG(=workflow)ë¥¼ íŠ¸ë¦¬ê±°</li>
      <li>DAGì— ì €ì¥ëœ íƒœìŠ¤í¬ë¥¼ ì¸ìŠ¤í„´ìŠ¤í™”í•˜ì—¬ Executerì—ê²Œ ì „ë‹¬</li>
    </ul>
  </li>
  <li>Executer:
    <ul>
      <li>ì „ë‹¬ë°›ì€ íƒœìŠ¤í¬ë¥¼ Workerì—ê²Œ ì „ë‹¬</li>
    </ul>
  </li>
  <li>Worker:
    <ul>
      <li>íƒœìŠ¤í¬ë¥¼ ì‹¤í–‰</li>
    </ul>
  </li>
  <li>Web Server:
    <ul>
      <li>User Interfaceë¥¼ í†µí•´ ì ‘ê·¼í•´ ì‰½ê²Œ Airflowë¥¼ ë™ì‘ì‹œí‚¤ê¸° ìœ„í•œ ì›¹ì„œë²„</li>
    </ul>
  </li>
  <li>DAG Directory:
    <ul>
      <li>í•œ ê°œ ì´ìƒì˜ DAGë¥¼ ì •ì˜í•´ë†“ì€ ë””ë ‰í„°ë¦¬</li>
    </ul>
  </li>
  <li>Metadata DB:
    <ul>
      <li>DAG ì €ì¥</li>
      <li>íƒœìŠ¤í¬ ê²°ê³¼ ì €ì¥</li>
    </ul>
  </li>
  <li>airflow.cfg:
    <ul>
      <li>Airflow ì„¤ì •ê°’ì„ í¬í•¨í•˜ëŠ” íŒŒì¼</li>
    </ul>
  </li>
</ul>

<h1 id="airflow-ë™ì‘ì›ë¦¬">Airflow ë™ì‘ì›ë¦¬</h1>

<p><img src="/images/airflow_3.png" alt="" /></p>

<ol>
  <li>ìœ ì €ê°€ DAGë¡œ ì›Œí¬í”Œë¡œ ì‘ì„±</li>
  <li>ìœ ì €ê°€ ì •ì˜í•œ DAGëŠ” DAG Directoryì— ì €ì¥</li>
  <li>SchedulerëŠ” DAG Directoryì˜ ëª¨ë“  DAGë¥¼ í™•ì¸í•˜ê³  íŒŒì‹±, íƒœìŠ¤í¬ë¥¼ ëŒ€ê¸°ì—´ì— ì¶”ê°€
    <ul>
      <li>3-1. íŒŒì¼ë¡œë¶€í„° DAGë¥¼ í™•ì¸ (íƒœìŠ¤í¬, ì˜ì¡´ì„±, ìŠ¤ì¼€ì¤„ ì£¼ê¸°)</li>
      <li>3-2. ì˜ˆì•½ëœ ì‹œê°„ì´ ì§€ë‚œ íƒœìŠ¤í¬ì˜ ì˜ì¡´ì„±ì„ í™•ì¸í•˜ê³ , ì´ì „ íƒœìŠ¤í¬ê°€ ëª¨ë‘ í•´ê²°ë˜ì—ˆìœ¼ë©´ ëŒ€ê¸°ì—´ì— ì¶”ê°€</li>
    </ul>
  </li>
  <li>WorkerëŠ” ì˜ˆì•½ëœ íƒœìŠ¤í¬ë¥¼ ì‹¤í–‰í•˜ê³  ê·¸ ê²°ê³¼ë¥¼ Metadata DBì— ì €ì¥</li>
  <li>ì €ì¥ëœ íƒœìŠ¤í¬ ê²°ê³¼ë¥¼ Web Serverê°€ ì½ì–´ê°</li>
</ol>

<h1 id="dag">DAG</h1>

<ul>
  <li>DAG(Directed Acyclic Graph): ì›Œí¬í”Œë¡œìš°ë¥¼ íŒŒì´ì¬ ì–¸ì–´ë¡œ ì½”ë“œí™”í•œ ê²ƒ</li>
  <li>Airflowì˜ í•µì‹¬ì€ DAGë¥¼ ì˜ ì‘ì„±í•˜ëŠ” ê²ƒ</li>
  <li>DAGëŠ” í¬ê²Œ DAG ì„ ì–¸, Operator, Sensor, Operatorê°„ ì˜ì¡´ì„± ì£¼ì…</li>
</ul>

<div class="pen-para">
    <div class="pen-bar">
      <i class="fas fa-pen"></i>DAGê°€ ì ˆì°¨ì  ìŠ¤í¬ë¦½íŠ¸ íŒŒì´í”„ë¼ì¸ê³¼ ë‹¤ë¥¸ ì 
    </div>
    <div class="pen-content">
      <li>DAGëŠ” ë…ë¦½ì ì¸ íƒœìŠ¤í¬ì˜ ê²½ìš° ë³‘ë ¬ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆë‹¤</li>
      <li>DAGëŠ” ì¤‘ê°„ íƒœìŠ¤í¬ê°€ ì‹¤íŒ¨í–ˆì„ ë•Œ, ì‹¤íŒ¨í•œ ë¶€ë¶„ë¶€í„° ë‹¤ì‹œ ì‹œì‘í•  ìˆ˜ ìˆë‹¤</li>
    </div>
</div>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">with</span> <span class="n">DAG</span><span class="p">(</span><span class="s">"my-dag"</span><span class="p">)</span> <span class="k">as</span> <span class="n">dag</span><span class="p">:</span>
    <span class="n">ping</span> <span class="o">=</span> <span class="n">SimpleHttpOperator</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="s">"http://example.com/update/"</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">EmailOperator</span><span class="p">(</span><span class="n">to</span><span class="o">=</span><span class="s">"admin@example.com"</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="s">"Update complete"</span><span class="p">)</span>

    <span class="n">ping</span> <span class="o">&gt;&gt;</span> <span class="n">email</span>
</code></pre></div></div>

<h2 id="operators">Operators</h2>

<ul>
  <li>DAGì— ì‘ì—…(Task)ì„ í…œí”Œë¦¿ í˜•íƒœë¡œ ë¯¸ë¦¬ ì •ì˜í•´ë‘” ê²ƒ (Operator, Sensorë¥¼ í´ë˜ìŠ¤, Taskë¥¼ ê°ì²´ë¡œ ìƒê°í•  ìˆ˜ ìˆìŒ)</li>
  <li>ì—ì–´í”Œë¡œìš° ì„¤ì¹˜ì‹œ í•¨ê»˜ ì œê³µë˜ëŠ” built-in Operatorì™€, í•„ìš”í•  ë•Œ ë³„ë„ë¡œ ì„¤ì¹˜ ê°€ëŠ¥í•œ Operatorê°€ ìˆìŒ</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># built-in

BashOperator: ì‰˜ ì»¤ë§¨ë“œ ì‹¤í–‰
PythonOperator: íŒŒì´ì¬ í•¨ìˆ˜ í˜¸ì¶œ
EmailOperator: ì´ë©”ì¼ ì „ì†¡
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># providers

SimpleHttpOperator: HTTP ë©”ì„¸ì§€ ì „ì†¡
MySqlOperator: SQLë¬¸ ì‹¤í–‰
PostgresOperator
JdbcOperator
DockerOperator
HiveOperator
S3FileTransformOperator
PrestoToMySqlOperator
SlackAPIOperator
</code></pre></div></div>

<div class="pen-para">
    <div class="pen-bar">
      <i class="fas fa-pen"></i>ì˜¤í¼ë ˆì´í„°ì™€ íƒœìŠ¤í¬ì˜ ì°¨ì´ì 
    </div>
    <div class="pen-content">
      <li>Airflow ë¬¸ì„œ ì „ë°˜ì— ê±¸ì³ ì˜¤í¼ë ˆì´í„°ì™€ íƒœìŠ¤í¬ë¥¼ ê°™ì€ ì˜ë¯¸ë¡œ ì‚¬ìš©</li>
      <li>ì‚¬ìš©ìëŠ” ì˜¤í¼ë ˆì´í„° ì‘ì„±ì— ì§‘ì¤‘</li>
      <li>AirflowëŠ” ì˜¤í¼ë ˆì´í„°ì˜ ì˜¬ë°”ë¥¸ ì‹¤í–‰ì„ ë³´ì¥í•˜ê¸° ìœ„í•´ íƒœìŠ¤í¬ë¡œ ë˜í•‘(wrapping)</li>
    </div>
</div>

<h2 id="sensors">Sensors</h2>

<ul>
  <li>Operatorì˜ íŠ¹ë³„í•œ íƒ€ì…</li>
  <li>íŠ¹ì • ì´ë²¤íŠ¸ê°€ ì¼ì–´ë‚˜ê¸¸ ê¸°ë‹¤ë ¸ë‹¤ê°€, ë°œìƒí•˜ë©´ ë‹¤ìŒ íƒœìŠ¤í¬ë¥¼ ì§„í–‰</li>
  <li>ê¸°ë‹¤ë¦¬ëŠ” ì´ë²¤íŠ¸ê°€ ë‹¨ìˆœíˆ ì‹œê°„ ê¸°ë°˜ì¼ ìˆ˜ë„ ìˆê³ , ì•„ë‹ˆë©´ ì–´ë–¤ íŒŒì¼ì´ ë  ìˆ˜ë„ ìˆìŒ</li>
</ul>

<h2 id="dag-ë§Œë“¤ì–´ë³´ê¸°">DAG ë§Œë“¤ì–´ë³´ê¸°</h2>

<h3 id="dag-ì •ì˜í• -ë•Œ-ìì£¼-ì‚¬ìš©í•˜ëŠ”-íŒŒë¼ë¯¸í„°">DAG ì •ì˜í•  ë•Œ ìì£¼ ì‚¬ìš©í•˜ëŠ” íŒŒë¼ë¯¸í„°</h3>
<ul>
  <li>ì „ì²´ íŒŒë¼ë¯¸í„°ëŠ” <a href="https://airflow.apache.org/docs/apache-airflow/stable/_api/airflow/models/dag/index.html" target="_blank"><strong>ê³µì‹ë¬¸ì„œ ì°¸ê³ </strong></a></li>
  <li><strong>dag_id</strong>: The id of the DAG</li>
  <li><strong>schedule_interval</strong>: Defines how often that DAG runs</li>
  <li><strong>start_date</strong>: The timestamp from which the scheduler will attempt to backfill</li>
  <li><strong>default_args</strong>: A dictionary of default parameters to be used as constructor keyword parameters when initialising operators.</li>
  <li><strong>catchup</strong>: Perform scheduler catchup (or only run latest)? Defaults to True</li>
  <li><strong>tags</strong>: List of tags to help filtering DAGs in the UI.</li>
</ul>

<h3 id="dagë¥¼-ì„ ì–¸í•˜ëŠ”-3ê°€ì§€-ë°©ë²•">DAGë¥¼ ì„ ì–¸í•˜ëŠ” 3ê°€ì§€ ë°©ë²•</h3>

<ul>
  <li><code class="language-plaintext highlighter-rouge">with</code> ì»¨í…ìŠ¤íŠ¸ ë§¤ë‹ˆì €
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">with</span> <span class="n">DAG</span><span class="p">(</span>
  <span class="s">"my_dag_name"</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="n">pendulum</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s">"UTC"</span><span class="p">),</span>
  <span class="n">schedule_interval</span><span class="o">=</span><span class="s">"@daily"</span><span class="p">,</span> <span class="n">catchup</span><span class="o">=</span><span class="bp">False</span>
<span class="p">)</span> <span class="k">as</span> <span class="n">dag</span><span class="p">:</span>
  <span class="n">op</span> <span class="o">=</span> <span class="n">EmptyOperator</span><span class="p">(</span><span class="n">task_id</span><span class="o">=</span><span class="s">"task"</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li>DAG ì¸ìŠ¤í„´ìŠ¤ë¥¼ Operatorì— ì§ì ‘ ì „ë‹¬
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">my_dag</span> <span class="o">=</span> <span class="n">DAG</span><span class="p">(</span><span class="s">"my_dag_name"</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="n">pendulum</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s">"UTC"</span><span class="p">),</span>
           <span class="n">schedule_interval</span><span class="o">=</span><span class="s">"@daily"</span><span class="p">,</span> <span class="n">catchup</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">op</span> <span class="o">=</span> <span class="n">EmptyOperator</span><span class="p">(</span><span class="n">task_id</span><span class="o">=</span><span class="s">"task"</span><span class="p">,</span> <span class="n">dag</span><span class="o">=</span><span class="n">my_dag</span><span class="p">)</span>
</code></pre></div>    </div>
  </li>
  <li><code class="language-plaintext highlighter-rouge">@dag</code> ë°ì½”ë ˆì´í„°
    <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">@</span><span class="n">dag</span><span class="p">(</span><span class="n">start_date</span><span class="o">=</span><span class="n">pendulum</span><span class="p">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2021</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">tz</span><span class="o">=</span><span class="s">"UTC"</span><span class="p">),</span>
   <span class="n">schedule_interval</span><span class="o">=</span><span class="s">"@daily"</span><span class="p">,</span> <span class="n">catchup</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">generate_dag</span><span class="p">():</span>
  <span class="n">op</span> <span class="o">=</span> <span class="n">EmptyOperator</span><span class="p">(</span><span class="n">task_id</span><span class="o">=</span><span class="s">"task"</span><span class="p">)</span>

<span class="n">dag</span> <span class="o">=</span> <span class="n">generate_dag</span><span class="p">()</span>
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="dag-ì‘ì„±-ì˜ˆì‹œ">DAG ì‘ì„± ì˜ˆì‹œ</h3>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>
<span class="kn">from</span> <span class="nn">airflow</span> <span class="kn">import</span> <span class="n">DAG</span>
<span class="kn">from</span> <span class="nn">airflow.operators.bash</span> <span class="kn">import</span> <span class="n">BashOperator</span>

<span class="n">default_args</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s">'start_date'</span><span class="p">:</span> <span class="n">datetime</span><span class="p">(</span><span class="mi">2022</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">19</span><span class="p">)</span>
<span class="p">}</span>

<span class="k">with</span> <span class="n">DAG</span><span class="p">(</span><span class="n">dag_id</span><span class="o">=</span><span class="s">'recruitment-airflow'</span><span class="p">,</span>
        <span class="n">schedule_interval</span><span class="o">=</span><span class="s">'@daily'</span><span class="p">,</span>
        <span class="n">default_args</span><span class="o">=</span><span class="n">default_args</span><span class="p">,</span>
        <span class="n">tags</span><span class="o">=</span><span class="p">[</span><span class="s">'recruitment'</span><span class="p">],</span>
        <span class="n">catchup</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span> <span class="k">as</span> <span class="n">dag</span><span class="p">:</span>
    <span class="n">crawling</span> <span class="o">=</span> <span class="n">BashOperator</span><span class="p">(</span>
        <span class="n">task_id</span><span class="o">=</span><span class="s">'crawling'</span><span class="p">,</span>
        <span class="n">bash_command</span><span class="o">=</span><span class="s">'python /opt/pipeline/script/crawlingToMongo.py'</span>
    <span class="p">)</span>
    <span class="n">MongoDBToKafka</span> <span class="o">=</span> <span class="n">BashOperator</span><span class="p">(</span>
        <span class="n">task_id</span><span class="o">=</span><span class="s">'MongoDBToKafka'</span><span class="p">,</span>
        <span class="n">bash_command</span><span class="o">=</span><span class="s">'python /opt/pipeline/script/MongoDBToKafka.py'</span>
    <span class="p">)</span>
    <span class="n">KafkaToS3</span> <span class="o">=</span> <span class="n">BashOperator</span><span class="p">(</span>
        <span class="n">task_id</span><span class="o">=</span><span class="s">'KafkaToS3'</span><span class="p">,</span>
        <span class="n">bash_command</span><span class="o">=</span><span class="s">'python /opt/pipeline/script/KafkaToS3.py'</span>
    <span class="p">)</span>
    <span class="n">S3ToElasticsearch</span> <span class="o">=</span> <span class="n">BashOperator</span><span class="p">(</span>
        <span class="n">task_id</span><span class="o">=</span><span class="s">'S3ToElasticsearch'</span><span class="p">,</span>
        <span class="n">bash_command</span><span class="o">=</span><span class="s">'python /opt/pipeline/script/S3ToElasticsearch.py'</span>
    <span class="p">)</span>
    <span class="n">S3ToMySQL</span> <span class="o">=</span> <span class="n">BashOperator</span><span class="p">(</span>
        <span class="n">task_id</span><span class="o">=</span><span class="s">'S3ToMySQL'</span><span class="p">,</span>
        <span class="n">bash_command</span><span class="o">=</span><span class="s">'python /opt/pipeline/script/S3ToMySQL.py'</span>
    <span class="p">)</span>

    <span class="n">crawling</span> <span class="o">&gt;&gt;</span> <span class="n">MongoDBToKafka</span> <span class="o">&gt;&gt;</span> <span class="n">KafkaToS3</span> <span class="o">&gt;&gt;</span> <span class="p">[</span><span class="n">S3ToElasticsearch</span><span class="p">,</span> <span class="n">S3ToMySQL</span><span class="p">]</span>
</code></pre></div></div>

<p><img src="/images/airflow_4.png" alt="" /></p>

<h1 id="task">Task</h1>

<p><img src="/images/airflow_11.png" alt="" /></p>

<p>The possible states for a Task Instance are:</p>

<ul>
  <li><strong>none</strong>: The Task has not yet been queued for execution (its dependencies are not yet met)</li>
  <li><strong>scheduled</strong>: The scheduler has determined the Taskâ€™s dependencies are met and it should run</li>
  <li><strong>queued</strong>: The task has been assigned to an Executor and is awaiting a worker</li>
  <li><strong>running</strong>: The task is running on a worker (or on a local/synchronous executor)</li>
  <li><strong>success</strong>: The task finished running without errors</li>
  <li><strong>shutdown</strong>: The task was externally requested to shut down when it was running</li>
  <li><strong>restarting</strong>: The task was externally requested to restart when it was running</li>
  <li><strong>failed</strong>: The task had an error during execution and failed to run</li>
  <li><strong>skipped</strong>: The task was skipped due to branching, LatestOnly, or similar.</li>
  <li><strong>upstream_failed</strong>: An upstream task failed and the Trigger Rule says we needed it</li>
  <li><strong>up_for_retry</strong>: The task failed, but has retry attempts left and will be rescheduled.</li>
  <li><strong>up_for_reschedule</strong>: The task is a Sensor that is in reschedule mode</li>
  <li><strong>deferred</strong>: The task has been deferred to a trigger</li>
  <li><strong>removed</strong>: The task has vanished from the DAG since the run started</li>
</ul>

<h1 id="dashboard">Dashboard</h1>

<ul>
  <li>DAGsë¥¼ í•œ ëˆˆì— ë³¼ ìˆ˜ ìˆë‹¤</li>
</ul>

<p><img src="/images/airflow_5.png" alt="" /></p>

<ul>
  <li>DAG í•˜ë‚˜ì— ëŒ€í•´ì„œëŠ” ê·¸ë˜í”„ë¡œ ë³¼ ìˆ˜ë„ ìˆë‹¤</li>
</ul>

<p><img src="/images/airflow_6.png" alt="" /></p>

<ul>
  <li>DAGì—ì„œ ê°ê°ì˜ íƒœìŠ¤í¬ê°€ ì‹œê°„ì´ ì–¼ë§ˆë‚˜ ê±¸ë¦¬ëŠ”ì§€ íŒŒì•…í•  ìˆ˜ë„ ìˆë‹¤</li>
</ul>

<p><img src="/images/airflow_7.png" alt="" /></p>

<h1 id="ì°¸ê³ ">ì°¸ê³ </h1>

<ul>
  <li><a href="https://airflow.apache.org/docs/apache-airflow/stable/concepts/index.html" target="_blank">Airflow ê³µì‹ë¬¸ì„œ</a></li>
  <li><a href="https://www.bucketplace.com/post/2021-04-13-%EB%B2%84%ED%82%B7%ED%94%8C%EB%A0%88%EC%9D%B4%EC%8A%A4-airflow-%EB%8F%84%EC%9E%85%EA%B8%B0/" target="_blank">ë²„í‚·í”Œë ˆì´ìŠ¤ Airflow ë„ì…ê¸°</a></li>
  <li><a href="https://magpienote.tistory.com/192" target="_blank">ê¹Œì¹˜ì˜ ì¼ìƒ ë…¸íŠ¸, [Airflow ê¸°ë³¸ ë‚´ìš©] Airflowë€? êµ¬ì„±ìš”ì†Œ, êµ¬ë™ì›ë¦¬, ê°œë…, ìš©ì–´ ì •ë¦¬</a></li>
  <li><a href="https://velog.io/@makengi/AirFlow-AirFlow-%EC%9A%A9%EC%96%B4-%EC%A0%95%EB%A6%AC" target="_blank">[AirFlow] AirFlow ìš©ì–´ ì •ë¦¬</a></li>
  <li><a href="" target="_blank"></a></li>
  <li><a href="" target="_blank"></a></li>
</ul>
:ET