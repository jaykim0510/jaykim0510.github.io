I"<hr />
<p id="toc"><strong>Table of Contents</strong></p>
<ul id="markdown-toc">
  <li><a href="#nestjs란" id="markdown-toc-nestjs란">NestJS란</a></li>
  <li><a href="#express와-비교" id="markdown-toc-express와-비교">Express와 비교</a></li>
  <li><a href="#nestjs-시작하기" id="markdown-toc-nestjs-시작하기">NestJS 시작하기</a></li>
  <li><a href="#nestjs-코드-구조" id="markdown-toc-nestjs-코드-구조">NestJS 코드 구조</a></li>
  <li><a href="#nestjs-request-lifecycle" id="markdown-toc-nestjs-request-lifecycle">NestJS Request Lifecycle</a></li>
</ul>

<hr />

<h1 id="nestjs란">NestJS란</h1>

<ul>
  <li>node.js 런타임 위에서 동작하는 백엔드 프레임워크</li>
  <li>HTTP 요청과 같은 기본적인 기능은 디폴트로 Express를 사용하고 있음 (Fastify로 교체 가능)</li>
</ul>

<h1 id="express와-비교">Express와 비교</h1>

<ul>
  <li>Express를 래핑한 NestJS를 통해 얻게 되는 이점은 다음과 같다
    <ul>
      <li>구조화되어 있는 아키텍처</li>
      <li>Typescript 친화적</li>
      <li>강력한 CLI 제공</li>
      <li>OOP 개발의 핵심 개념인 제어의 역전을 위해 필요한 의존성 주입 기능을 제공</li>
    </ul>
  </li>
</ul>

<h1 id="nestjs-시작하기">NestJS 시작하기</h1>

<ul>
  <li>
    <p>Nest CLI 사용하면 쉽게 템플릿 코드 생성할 수 있음</p>
  </li>
  <li>
    <p>Nest CLI 설치</p>
  </li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm i -g @nestjs/cli
</code></pre></div></div>

<ul>
  <li>템플릿 코드 생성</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nest new .
</code></pre></div></div>

<ul>
  <li>개발 서버 실행</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm run start:dev
</code></pre></div></div>

<h1 id="nestjs-코드-구조">NestJS 코드 구조</h1>

<ul>
  <li>NestJS는 코드를 모듈화 함으로써 재사용성을 높임</li>
  <li>시작점이 되는 루트 모듈과, 각각의 기능을 분리시켜 놓은 모듈로 이루어짐</li>
</ul>

<p><img src="/images/nest_2.png" alt="" /></p>

<ul>
  <li>NestJS는 크게 다음과 같은 요소들로 이루어짐
    <ul>
      <li><strong>Module</strong>: 모듈화 하는 역할</li>
      <li><strong>Controller</strong>: 요청을 받고 응답을 돌려주는 역할</li>
      <li><strong>Service</strong>: 비즈니스 로직을 수행하는 역할</li>
      <li><strong>Repository</strong>: DB와 관련된 작업을 수행하는 역할</li>
      <li><strong>DTO</strong>: 데이터를 검증하고, 변환하는 역할</li>
      <li><strong>Middleware</strong>: 요청과 관련된 공통적으로 자주 사용되는 작업을 수행하는 역할 (NestJS에서는 Middleware보다는 Guard, Interceptor, Pipe 사용 권장)</li>
      <li><strong>Guard</strong>: 인증/인가와 관련된 작업을 수행하는 역할</li>
      <li><strong>Interceptor</strong>: Middleware와 역할이 비슷하지만, 다른 점은 Interceptor는 요청 뿐만 아니라, 응답에 대해서도 가능</li>
      <li><strong>Pipe</strong>: 데이터가 Controller에게 전달되기 전에 검증/변환하는 역할</li>
      <li><strong>Filter</strong>: 예외를 처리하는 역할</li>
    </ul>
  </li>
</ul>

<h1 id="nestjs-request-lifecycle">NestJS Request Lifecycle</h1>

<p><img src="/images/nest_3.png" alt="" /></p>

<ul>
  <li>NestJS 백엔드 어플리케이션 안에서 요청(Request) 객체는 다음과 같은 순서로 순회한다
    <ul>
      <li>Middleware -&gt; Guard -&gt; Interceptor -&gt; Pipe -&gt; Controller -&gt; Service</li>
      <li>Guard, Interceptor, Pipe에 대해 글로벌, 컨트롤러, 핸들러 스코프 순서로 순회</li>
    </ul>
  </li>
  <li>Service에서 반환한 응답(Response) 객체는 다음과 같은 순서를 순회하고 유저에게 반환된다
    <ul>
      <li>Service -&gt; Controller -&gt; Interceptor -&gt; Filter</li>
      <li>Interceptor, Filter에 대해 핸들러, 컨트롤러, 글로벌 스코프 순서로 순회</li>
    </ul>
  </li>
</ul>
:ET