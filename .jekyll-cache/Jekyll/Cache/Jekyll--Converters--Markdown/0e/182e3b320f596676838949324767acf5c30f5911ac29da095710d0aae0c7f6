I"'<hr />

<p id="toc"><strong>Table of Contents</strong></p>
<ul id="markdown-toc">
  <li><a href="#airflowë€" id="markdown-toc-airflowë€">Airflowë€?</a></li>
  <li><a href="#airflow-ë™ì‘ì›ë¦¬" id="markdown-toc-airflow-ë™ì‘ì›ë¦¬">Airflow ë™ì‘ì›ë¦¬</a></li>
  <li><a href="#dag-skeleton" id="markdown-toc-dag-skeleton">DAG Skeleton</a>    <ul>
      <li><a href="#operators" id="markdown-toc-operators">Operators</a></li>
      <li><a href="#sensors" id="markdown-toc-sensors">Sensors</a></li>
      <li><a href="#dag-ë§Œë“¤ì–´ë³´ê¸°" id="markdown-toc-dag-ë§Œë“¤ì–´ë³´ê¸°">DAG ë§Œë“¤ì–´ë³´ê¸°</a></li>
    </ul>
  </li>
  <li><a href="#dashboard" id="markdown-toc-dashboard">Dashboard</a></li>
  <li><a href="#ì°¸ê³ " id="markdown-toc-ì°¸ê³ ">ì°¸ê³ </a></li>
</ul>

<hr />

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>DAGs, Operators, Tasks, Sensors, Executor, Scheduler
</code></pre></div></div>

<h1 id="airflowë€">Airflowë€?</h1>

<ul>
  <li>2014ë…„ ì—ì–´ë¹„ì•¤ë¹„(Airbnb)ì—ì„œ ì‹œì‘ë˜ì–´, í˜„ì¬ ì•„íŒŒì¹˜(Apache) ì¬ë‹¨ íƒ‘ë ˆë²¨ í”„ë¡œì íŠ¸</li>
  <li>AirflowëŠ” Python ì½”ë“œë¡œ ì›Œí¬í”Œë¡œìš°(workflow)ë¥¼ ì‘ì„±í•˜ê³ , ìŠ¤ì¼€ì¤„ë§, ëª¨ë‹ˆí„°ë§ í•˜ëŠ” í”Œë«í¼</li>
  <li>Airflowë¥¼ í†µí•´ì„œ ë°ì´í„°ì—”ì§€ë‹ˆì–´ë§ì˜ ETL ì‘ì—…ì„ ìë™í™”í•˜ê³ , DAG(Directed Acyclic Graph) í˜•íƒœì˜ ì›Œí¬í”Œë¡œìš° ì‘ì„±ì´ ê°€ëŠ¥</li>
  <li>AWS, GCP ëª¨ë‘ Airflow managed serviceë¥¼ ì œê³µí•  ì •ë„ë¡œ ë„ë¦¬ ì‚¬ìš©</li>
</ul>

<p><img src="/images/airflow_2.png" alt="" /></p>

<h1 id="airflow-ë™ì‘ì›ë¦¬">Airflow ë™ì‘ì›ë¦¬</h1>

<p><img src="/images/airflow_1.png" alt="" /></p>

<ul>
  <li>ìœ ì €ëŠ” Web Serverë¥¼ í†µí•´ Airflowë¥¼ ëª¨ë‹ˆí„°ë§, ì¡°ì‘</li>
  <li>ìœ ì €ê°€ ì •ì˜í•œ DAGëŠ” DAGsì— ì €ì¥</li>
  <li>SchedulerëŠ” DAGsì— ì €ì¥ëœ DAGë¥¼ ì£¼ê¸°ì ìœ¼ë¡œ ì‹¤í–‰</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>1. Schedulerê°€ DAGë¥¼ ì‹¤í–‰í•˜ë©´ DagRun ì˜¤ë¸Œì íŠ¸ ìƒì„±ë¨
2. DagRun ì˜¤ë¸Œì íŠ¸ëŠ” ì•ˆì— ì •ì˜ëœ Operatorë¥¼ Taskë¡œ ì¸ìŠ¤í„´ìŠ¤í™”
3. Taskë“¤ì´ Schedulerì— ì˜í•´ Workerì—ê²Œ ì „ë‹¬ë¨
</code></pre></div></div>

<p><img src="/images/airflow_3.png" alt="" /></p>

<h1 id="dag-skeleton">DAG Skeleton</h1>

<ul>
  <li>DAG(Directed Acyclic Graph): ì›Œí¬í”Œë¡œìš°ë¥¼ íŒŒì´ì¬ ì–¸ì–´ë¡œ ì½”ë“œí™”í•œ ê²ƒ</li>
  <li>Airflowì˜ í•µì‹¬ì€ DAGë¥¼ ì˜ ì‘ì„±í•˜ëŠ” ê²ƒ</li>
  <li>DAGëŠ” í¬ê²Œ DAG ì„ ì–¸, Operator, Sensor, Operatorê°„ ì˜ì¡´ì„± ì£¼ì…</li>
</ul>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">with</span> <span class="n">DAG</span><span class="p">(</span><span class="s">"my-dag"</span><span class="p">)</span> <span class="k">as</span> <span class="n">dag</span><span class="p">:</span>
    <span class="n">ping</span> <span class="o">=</span> <span class="n">SimpleHttpOperator</span><span class="p">(</span><span class="n">endpoint</span><span class="o">=</span><span class="s">"http://example.com/update/"</span><span class="p">)</span>
    <span class="n">email</span> <span class="o">=</span> <span class="n">EmailOperator</span><span class="p">(</span><span class="n">to</span><span class="o">=</span><span class="s">"admin@example.com"</span><span class="p">,</span> <span class="n">subject</span><span class="o">=</span><span class="s">"Update complete"</span><span class="p">)</span>

    <span class="n">ping</span> <span class="o">&gt;&gt;</span> <span class="n">email</span>
</code></pre></div></div>

<h2 id="operators">Operators</h2>

<ul>
  <li>DAGì— ì‘ì—…(Task)ì„ í…œí”Œë¦¿ í˜•íƒœë¡œ ë¯¸ë¦¬ ì •ì˜í•´ë‘” ê²ƒ (Operator, Sensorë¥¼ í´ë˜ìŠ¤, Taskë¥¼ ê°ì²´ë¡œ ìƒê°í•  ìˆ˜ ìˆìŒ)</li>
  <li>ì—ì–´í”Œë¡œìš° ì„¤ì¹˜ì‹œ í•¨ê»˜ ì œê³µë˜ëŠ” built-in Operatorì™€, í•„ìš”í•  ë•Œ ë³„ë„ë¡œ ì„¤ì¹˜ ê°€ëŠ¥í•œ Operatorê°€ ìˆìŒ</li>
</ul>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># built-in

BashOperator: ì‰˜ ì»¤ë§¨ë“œ ì‹¤í–‰
PythonOperator: íŒŒì´ì¬ í•¨ìˆ˜ í˜¸ì¶œ
EmailOperator: ì´ë©”ì¼ ì „ì†¡
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># providers

SimpleHttpOperator: HTTP ë©”ì„¸ì§€ ì „ì†¡
MySqlOperator: SQLë¬¸ ì‹¤í–‰
PostgresOperator
JdbcOperator
DockerOperator
HiveOperator
S3FileTransformOperator
PrestoToMySqlOperator
SlackAPIOperator
</code></pre></div></div>

<h2 id="sensors">Sensors</h2>

<ul>
  <li>Operatorì˜ íŠ¹ë³„í•œ íƒ€ì…</li>
  <li>íŠ¹ì • ì´ë²¤íŠ¸ê°€ ì¼ì–´ë‚˜ê¸¸ ê¸°ë‹¤ë ¸ë‹¤ê°€, ë°œìƒí•˜ë©´ ë‹¤ìŒ íƒœìŠ¤í¬ë¥¼ ì§„í–‰</li>
  <li>ê¸°ë‹¤ë¦¬ëŠ” ì´ë²¤íŠ¸ê°€ ë‹¨ìˆœíˆ ì‹œê°„ ê¸°ë°˜ì¼ ìˆ˜ë„ ìˆê³ , ì•„ë‹ˆë©´ ì–´ë–¤ íŒŒì¼ì´ ë  ìˆ˜ë„ ìˆìŒ</li>
</ul>

<h2 id="dag-ë§Œë“¤ì–´ë³´ê¸°">DAG ë§Œë“¤ì–´ë³´ê¸°</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># DAG í´ë˜ìŠ¤ íŒŒë¼ë¯¸í„°

dag_id (str) â€“ The id of the DAG; must consist exclusively of alphanumeric characters, dashes, dots and underscores (all ASCII)

description (Optional[str]) â€“ The description for the DAG to e.g. be shown on the webserver

schedule_interval (ScheduleIntervalArg) â€“ Defines how often that DAG runs, this timedelta object gets added to your latest task instanceâ€™s execution_date to figure out the next schedule

timetable (Optional[airflow.timetables.base.Timetable]) â€“ Specify which timetable to use (in which case schedule_interval must not be set). See Customizing DAG Scheduling with Timetables for more information

start_date (Optional[datetime.datetime]) â€“ The timestamp from which the scheduler will attempt to backfill

end_date (Optional[datetime.datetime]) â€“ A date beyond which your DAG wonâ€™t run, leave to None for open ended scheduling

template_searchpath (Optional[Union[str, Iterable[str]]]) â€“ This list of folders (non relative) defines where jinja will look for your templates. Order matters. Note that jinja/airflow includes the path of your DAG file by default

template_undefined (Type[jinja2.StrictUndefined]) â€“ Template undefined type.

user_defined_macros (Optional[Dict]) â€“ a dictionary of macros that will be exposed in your jinja templates. For example, passing dict(foo='bar') to this argument allows you to  in all jinja templates related to this DAG. Note that you can pass any type of object here.

user_defined_filters (Optional[Dict]) â€“ a dictionary of filters that will be exposed in your jinja templates. For example, passing dict(hello=lambda name: 'Hello %s' % name) to this argument allows you to world in all jinja templates related to this DAG.

default_args (Optional[Dict]) â€“ A dictionary of default parameters to be used as constructor keyword parameters when initialising operators. Note that operators have the same hook, and precede those defined here, meaning that if your dict contains â€˜depends_on_pastâ€™: True here and â€˜depends_on_pastâ€™: False in the operatorâ€™s call default_args, the actual value will be False.

params (Optional[Dict]) â€“ a dictionary of DAG level parameters that are made accessible in templates, namespaced under params. These params can be overridden at the task level.

max_active_tasks (int) â€“ the number of task instances allowed to run concurrently

max_active_runs (int) â€“ maximum number of active DAG runs, beyond this number of DAG runs in a running state, the scheduler wonâ€™t create new active DAG runs

dagrun_timeout (Optional[datetime.timedelta]) â€“ specify how long a DagRun should be up before timing out / failing, so that new DagRuns can be created. The timeout is only enforced for scheduled DagRuns.

sla_miss_callback (Optional[Callable[[DAG, str, str, List[airflow.models.slamiss.SlaMiss], List[airflow.models.taskinstance.TaskInstance]], None]]) â€“ specify a function to call when reporting SLA timeouts. See sla_miss_callback for more information about the function signature and parameters that are passed to the callback.

default_view (str) â€“ Specify DAG default view (grid, graph, duration, gantt, landing_times), default grid

orientation (str) â€“ Specify DAG orientation in graph view (LR, TB, RL, BT), default LR

catchup (bool) â€“ Perform scheduler catchup (or only run latest)? Defaults to True

on_failure_callback (Optional[DagStateChangeCallback]) â€“ A function to be called when a DagRun of this dag fails. A context dictionary is passed as a single parameter to this function.

on_success_callback (Optional[DagStateChangeCallback]) â€“ Much like the on_failure_callback except that it is executed when the dag succeeds.

access_control (Optional[Dict]) â€“ Specify optional DAG-level actions, e.g., â€œ{â€˜role1â€™: {â€˜can_readâ€™}, â€˜role2â€™: {â€˜can_readâ€™, â€˜can_editâ€™, â€˜can_deleteâ€™}}â€

is_paused_upon_creation (Optional[bool]) â€“ Specifies if the dag is paused when created for the first time. If the dag exists already, this flag will be ignored. If this optional parameter is not specified, the global config setting will be used.

jinja_environment_kwargs (Optional[Dict]) â€“

additional configuration options to be passed to Jinja Environment for template rendering
</code></pre></div></div>

<h1 id="dashboard">Dashboard</h1>

<h1 id="ì°¸ê³ ">ì°¸ê³ </h1>

<ul>
  <li><a href="https://airflow.apache.org/docs/apache-airflow/stable/concepts/index.html" target="_blank">Airflow ê³µì‹ë¬¸ì„œ</a></li>
  <li><a href="https://www.bucketplace.com/post/2021-04-13-%EB%B2%84%ED%82%B7%ED%94%8C%EB%A0%88%EC%9D%B4%EC%8A%A4-airflow-%EB%8F%84%EC%9E%85%EA%B8%B0/" target="_blank">ë²„í‚·í”Œë ˆì´ìŠ¤ Airflow ë„ì…ê¸°</a></li>
  <li><a href="https://magpienote.tistory.com/192" target="_blank">ê¹Œì¹˜ì˜ ì¼ìƒ ë…¸íŠ¸, [Airflow ê¸°ë³¸ ë‚´ìš©] Airflowë€? êµ¬ì„±ìš”ì†Œ, êµ¬ë™ì›ë¦¬, ê°œë…, ìš©ì–´ ì •ë¦¬</a></li>
  <li><a href="https://velog.io/@makengi/AirFlow-AirFlow-%EC%9A%A9%EC%96%B4-%EC%A0%95%EB%A6%AC" target="_blank">[AirFlow] AirFlow ìš©ì–´ ì •ë¦¬</a></li>
  <li><a href="" target="_blank"></a></li>
  <li><a href="" target="_blank"></a></li>
</ul>
:ET