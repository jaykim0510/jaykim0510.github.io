I"¾<hr />

<p id="toc"><strong>Table of Contents</strong></p>
<ul id="markdown-toc">
  <li><a href="#state" id="markdown-toc-state">State</a>    <ul>
      <li><a href="#operator-state" id="markdown-toc-operator-state">Operator State</a></li>
      <li><a href="#keyed-state" id="markdown-toc-keyed-state">Keyed State</a></li>
    </ul>
  </li>
  <li><a href="#recovery" id="markdown-toc-recovery">Recovery</a>    <ul>
      <li><a href="#checkpoint" id="markdown-toc-checkpoint">Checkpoint</a></li>
      <li><a href="#savepoint" id="markdown-toc-savepoint">Savepoint</a></li>
    </ul>
  </li>
  <li><a href="#statebackend" id="markdown-toc-statebackend">StateBackend</a></li>
  <li><a href="#ì°¸ê³ " id="markdown-toc-ì°¸ê³ ">ì°¸ê³ </a></li>
</ul>

<hr />

<h1 id="state">State</h1>

<p>ëŒ€ë¶€ë¶„ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì€ ìƒíƒœë¥¼ ì €ì¥í•˜ê³  í™œìš©(stateful)í•©ë‹ˆë‹¤. ë§Œì•½ ê°ê°ì˜ ì´ë²¤íŠ¸ë¥¼ ë‹¨ìˆœíˆ ë³€í™˜(transformation)í•˜ëŠ” ìš©ë„ì˜ ì–´í”Œë¦¬ì¼€ì´ì…˜ì´ë¼ë©´ ìƒíƒœ(state)ê°€ í•„ìš”í•˜ì§€ ì•Šì„ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ë‹¨ìˆœí•œ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì¡°ì°¨ë„ ì´ì „ì˜ ì´ë²¤íŠ¸ë‚˜ ì¤‘ê°„ ê²°ê³¼ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ê°€ ëŒ€ë¶€ë¶„ì´ê¸° ë•Œë¬¸ì— ìƒíƒœë¥¼ ì €ì¥í•´ í™œìš©í•˜ëŠ” ê²ƒì€ ëŒ€ë¶€ë¶„ì˜ ì„œë¹„ìŠ¤ì— ì¤‘ìš”í•œ ìš”ì†Œì…ë‹ˆë‹¤.</p>

<p>ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ì˜ ê²½ìš° ìƒíƒœ(state)ì˜ ì¤‘ìš”ì„±ì´ ë”ìš± ì»¤ì§€ê²Œ ë©ë‹ˆë‹¤. ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ìƒíƒœê°€ ì¤‘ìš”í•œ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>

<ul>
  <li><strong>Low Latency</strong>: ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬ëŠ” ì§§ì€ ì§€ì—°ì„ ìœ„í•´ ê°’ì„ ì¶œë ¥ í›„ ê°±ì‹ ì„ í†µí•´ ì •í™•ë„ë¥¼ ë†’ì´ëŠ” ë°©ì‹ì´ê¸°ì— ì´ì „ ê°’ì„ ê¸°ì–µí•´ì•¼í•¨</li>
  <li><strong>Recovery</strong>: ì¥ì•  ë°œìƒì‹œ ì €ì¥ëœ ìƒíƒœë¥¼ í†µí•´ ë‹¤ì‹œ ë³µêµ¬ê°€ ê°€ëŠ¥</li>
</ul>

<p><img src="/images/flink_17.png" alt="" /></p>

<p>í”Œë§í¬ì—ì„œëŠ” ìƒíƒœë¥¼ í”„ë¡œê·¸ë˜ë° ëª¨ë¸ì˜ ì¼ê¸‰ ì‹œë¯¼(first-class citizen)ìœ¼ë¡œ ì‚¬ìš©í•˜ê³  ìˆìŠµë‹ˆë‹¤. í”Œë§í¬ì—ì„œ ìƒíƒœ í•¸ë“¤ë§ì— ê´€í•œ ì£¼ìš” íŠ¹ì§•ë“¤ì—ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ê²ƒë“¤ì´ ìˆìŠµë‹ˆë‹¤.</p>

<ul>
  <li><strong>Multiple State Primitives</strong>: Flink provides state primitives for different data structures, such as atomic values, lists, or maps. Developers can choose the state primitive that is most efficient based on the access pattern of the function.</li>
  <li><strong>Pluggable State Backends</strong>: Application state is managed in and checkpointed by a pluggable state backend. Flink features different state backends that store state in memory or in RocksDB, an efficient embedded on-disk data store. Custom state backends can be plugged in as well.</li>
  <li><strong>Exactly-once state consistency</strong>: Flinkâ€™s checkpointing and recovery algorithms guarantee the consistency of application state in case of a failure. Hence, failures are transparently handled and do not affect the correctness of an application.</li>
  <li><strong>Very Large State</strong>: Flink is able to maintain application state of several terabytes in size due to its asynchronous and incremental checkpoint algorithm.</li>
  <li><strong>Scalable Applications</strong>: Flink supports scaling of stateful applications by redistributing the state to more or fewer workers.</li>
</ul>

<p>í”Œë§í¬ì—ì„œ ìƒíƒœëŠ” ë‹¨ìˆœíˆ ë³€ìˆ˜ì— ì €ì¥ë˜ëŠ” í•˜ë‚˜ì˜ ê°’ì¼ ìˆ˜ë„ ìˆê³ , íŒŒì¼ì´ë‚˜ ë°ì´í„°ë² ì´ìŠ¤ì— ì €ì¥ë˜ëŠ” ë°ì´í„°ì¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ì´ëŸ° ìƒíƒœì˜ ë‹¤ì–‘ì„±ì„ ë°˜ì˜í•˜ê¸° ìœ„í•´ í”Œë§í¬ì—ì„œëŠ” í¬ê²Œ ë‘ ê°€ì§€ ì¢…ë¥˜ì˜ ìƒíƒœë¥¼ ì œê³µí•˜ë©° ë˜ ê°ê°ì˜ ìƒíƒœë³„ë¡œ í‘œí˜„í•  ìˆ˜ ìˆëŠ” ê¸°ë³¸ ìƒíƒœ(State primitive)ë„ ì—¬ëŸ¬ê°€ì§€ ì…ë‹ˆë‹¤.</p>

<h2 id="operator-state">Operator State</h2>

<p><img src="/images/flink_15.png" alt="" /></p>

<p>ì—°ì‚°ì ìƒíƒœ(Operator State)ëŠ” íƒœìŠ¤í¬ë³„ë¡œ ìì‹ ì˜ ìƒíƒœë¥¼ ì €ì¥í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì¹´í”„ì¹´ì—ì„œ ì»¨ìŠˆë¨¸ ê·¸ë£¹ ë‚´ ì»¨ìŠˆë¨¸ë³„ë¡œ í† í”½ì˜ íŒŒí‹°ì…˜ì„ ê³µìœ í•˜ì§€ ì•Šê³  ìì‹ ì˜ íŒŒí‹°ì…˜ì„ ê°€ì§€ëŠ” ê²ƒê³¼ ë¹„ìŠ·í•œ ìš©ë„ì…ë‹ˆë‹¤.</p>

<p>ëŒ€ë¶€ë¶„ì˜ í”Œë§í¬ ì–´í”Œë¦¬ì¼€ì´ì…˜ì—ì„œëŠ” ì—°ì‚°ì ìƒíƒœê°€ í•„ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì—°ì‚°ì ìƒíƒœëŠ” ëŒ€ë¶€ë¶„ ì†ŒìŠ¤ë‚˜ ì‹±í¬ìª½ì—ì„œ í•„ìš”ë¡œ í•˜ëŠ” ìƒíƒœì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì´ëŸ¬í•œ ì´ìœ ë¡œ íŒŒì´ì„ ì˜ DataStream APIì—ì„œëŠ” ì•„ì§ ì—°ì‚°ì ìƒíƒœë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p>

<h2 id="keyed-state">Keyed State</h2>

<p><img src="/images/flink_16.png" alt="" /></p>

<p>í‚¤ ìƒíƒœ(Keyed State)ëŠ” ìŠ¤íŠ¸ë¦¼ ë°ì´í„°ê°€ ê°€ì§€ëŠ” í‚¤ë³„ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ìƒíƒœë¥¼ ë§í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ íƒœìŠ¤í¬ë¡œ ë“¤ì–´ì˜¨ ë°ì´í„°ê°€ â€˜Lionâ€™ì´ë¼ëŠ” í‚¤ë¥¼ ê°€ì§€ê³  ìˆìœ¼ë©´ â€˜Lionâ€™í‚¤ì™€ ê´€ë ¨ëœ ìƒíƒœì—ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ìŠ¤íŠ¸ë¦¼ì˜ í˜•íƒœëŠ” ê¸°ë³¸ì ìœ¼ë¡œ <code class="language-plaintext highlighter-rouge">KeyedStream</code>ì´ì–´ì•¼ í•©ë‹ˆë‹¤. 
KeyedStateë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ê¸°ë³¸ ìƒíƒœì˜ ì¢…ë¥˜ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">ValueState&lt;T&gt;</code> : keeps only one value and this value can be updated via update(T)</li>
  <li><code class="language-plaintext highlighter-rouge">ListState&lt;T&gt;</code> : keeps a list of elements for specific key</li>
  <li><code class="language-plaintext highlighter-rouge">ReducingState&lt;T&gt;</code> : keeps single value that represents the aggregation of all values added to the state.</li>
  <li><code class="language-plaintext highlighter-rouge">Aggregating&lt;IN, OUT&gt;</code> : Same features with reducing state, only input type can be different.</li>
  <li><code class="language-plaintext highlighter-rouge">MapState&lt;UK, UV&gt;</code> : Keeps a list of mappings.</li>
</ul>

<h1 id="recovery">Recovery</h1>

<h2 id="checkpoint">Checkpoint</h2>

<h2 id="savepoint">Savepoint</h2>

<h1 id="statebackend">StateBackend</h1>

<h1 id="ì°¸ê³ ">ì°¸ê³ </h1>

<ul>
  <li><a href="http://www.kyobobook.co.kr/product/detailViewKor.laf?ejkGb=KOR&amp;mallGb=KOR&amp;barcode=9791161754093&amp;orderClick=LEa&amp;Kc=" target="_blank">ì•„íŒŒì¹˜ í”Œë§í¬ë¡œ í•˜ëŠ” ìŠ¤íŠ¸ë¦¼ ë°ì´í„° ì²˜ë¦¬ ì±…</a></li>
  <li><a href="https://flink.apache.org/flink-applications.html" target="_blank">Flink ê³µì‹ë¬¸ì„œ: What is Apache Flink? â€” Applications</a></li>
  <li><a href="https://nightlies.apache.org/flink/flink-docs-master/docs/concepts/stateful-stream-processing/" target="_blank">Flink ê³µì‹ë¬¸ì„œ: Stateful Stream Processing</a></li>
  <li><a href="https://nightlies.apache.org/flink/flink-docs-release-1.14/docs/dev/datastream/fault-tolerance/state/#keyed-datastream" target="_blank">Flink ê³µì‹ë¬¸ì„œ: Working with State</a></li>
  <li><a href="https://www.ververica.com/blog/performance-factors-stateful-functions-operators-flink" target="_blank">Ververica: 3 important performance factors for stateful functions and operators in Flink</a></li>
  <li><a href="https://mehmetozanguven.github.io/apache-flink/2020/05/02/state-backend-and-state-example.html" target="_blank">mehmetozanguven: Apache Flink Series 8-State Backend &amp; State Example</a></li>
</ul>
:ET