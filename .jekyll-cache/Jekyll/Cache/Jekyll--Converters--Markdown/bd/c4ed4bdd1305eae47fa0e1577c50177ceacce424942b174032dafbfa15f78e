I"<p id="toc"><strong>Table of Contents</strong></p>
<ul id="markdown-toc">
  <li><a href="#workdir" id="markdown-toc-workdir">WORKDIR</a></li>
  <li><a href="#volume" id="markdown-toc-volume">VOLUME</a></li>
  <li><a href="#copy" id="markdown-toc-copy">COPY</a></li>
  <li><a href="#참고" id="markdown-toc-참고">참고</a></li>
</ul>

<hr />
<p><strong>Dockerfile instruction</strong></p>

<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />COPY</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />VOLUME</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />WORKDIR</li>
</ul>

<h1 id="workdir">WORKDIR</h1>

<p>WORKDIR 명령은 Docker 파일에서 이어지는 모든 RUN, CMD, ENTRIPOINT, COPY 및 ADD 명령에 대한 작업 디렉토리를 설정합니다. WORKDIR이 존재하지 않으면 이후 Dockerfile 명령어에 사용되지 않더라도 생성됩니다.</p>

<p>WORKDIR 명령은 Docker 파일에서 여러 번 사용할 수 있습니다. 상대 경로가 제공되는 경우 이전 WORKDIR 명령의 경로에 상대적입니다. 예를 들어 다음 명령어의 결과는 <code class="language-plaintext highlighter-rouge">/a/b/c</code>입니다.</p>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">WORKDIR</span><span class="s"> /a</span>
<span class="k">WORKDIR</span><span class="s"> b</span>
<span class="k">WORKDIR</span><span class="s"> c</span>
<span class="k">RUN </span><span class="nb">pwd</span>
</code></pre></div></div>

<p>또한 ENV를 이용해 Dockerfile에서 명시한 환경 변수의 경우 WORKDIR 명령어에서 해석할 수 있습니다. 아래 예를 보면 DIRPATH는 Dockerfile에서 정의를 했기 때문에 <code class="language-plaintext highlighter-rouge">/path</code>로 인식되고, DIRNAME은 해석되지 않아 <code class="language-plaintext highlighter-rouge">/path/$DIRNAME</code>과 같은 결과가 나옵니다.</p>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ENV</span><span class="s"> DIRPATH=/path</span>
<span class="k">WORKDIR</span><span class="s"> $DIRPATH/$DIRNAME</span>
<span class="k">RUN </span><span class="nb">pwd</span>
</code></pre></div></div>

<h1 id="volume">VOLUME</h1>

<p>VOLUME 명령은 지정된 이름으로 마운트 지점을 생성하고 네이티브 호스트 또는 다른 컨테이너와 마운트됩니다.</p>

<p>docker run 명령어를 실행하면 기본 이미지 내의 디렉토리 중 명시된 디렉토리에 있는 파일들로 마운트된 디렉토리를 초기화합니다.</p>

<p>VOLUME 명령어로 볼륨을 생성한 뒤 이후의 빌드과정에서 생기는 볼륨의 변경값은 모두 무시됩니다.</p>

<p>호스트 디렉터리는 컨테이너를 생성하거나 실행할 때 지정해야 합니다.  호스트 디렉토리(마운트 지점)는 본질적으로 호스트에 종속됩니다. 이는 지정된 호스트 디렉토리를 모든 호스트에서 사용할 수 있다고 보장할 수 없기 때문에 이미지 이식성을 유지하기 위한 것입니다. 따라서 도커 파일 내에서 호스트 디렉토리를 마운트할 수 없습니다.</p>

<h1 id="copy">COPY</h1>

<h1 id="참고">참고</h1>

<ul>
  <li><a href="https://docs.docker.com/engine/reference/builder/#cmd" target="_blank">Docker 공식문서</a></li>
  <li><a href="https://blog.leocat.kr/notes/2017/01/08/docker-run-vs-cmd-vs-entrypoint" target="_blank">스뎅(thDeng)님 블로그</a></li>
</ul>
:ET