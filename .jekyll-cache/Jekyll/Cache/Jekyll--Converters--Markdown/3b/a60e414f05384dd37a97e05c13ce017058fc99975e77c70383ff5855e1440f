I"+<p id="toc"><strong>Table of Contents</strong></p>
<ul id="markdown-toc">
  <li><a href="#cmd" id="markdown-toc-cmd">CMD</a></li>
  <li><a href="#entrypoint" id="markdown-toc-entrypoint">ENTRYPOINT</a></li>
  <li><a href="#cmd-and-entrypoint" id="markdown-toc-cmd-and-entrypoint">CMD and ENTRYPOINT</a></li>
  <li><a href="#참고" id="markdown-toc-참고">참고</a></li>
</ul>

<hr />
<p><strong>Dockerfile instruction</strong></p>

<ul class="task-list">
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />FROM</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />RUN</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />CMD</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />LABEL</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />EXPOSE</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />ENV</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />ADD</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />COPY</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" checked="checked" />ENTRYPOINT</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />VOLUME</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />USER</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />WORKDIR</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />ARG</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />ONBUILD</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />STOPSIGNAL</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />HEALTHCHECK</li>
  <li class="task-list-item"><input type="checkbox" class="task-list-item-checkbox" disabled="disabled" />SHELL</li>
</ul>

<h1 id="cmd">CMD</h1>

<p>CMD 명령어 작성요령은 다음과 같이 3가지 형태가 있습니다.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">CMD ["executable","param1","param2"]</code> (exec form, this is the preferred form)</li>
  <li><code class="language-plaintext highlighter-rouge">CMD ["param1","param2"]</code> (as default parameters to ENTRYPOINT)</li>
  <li><code class="language-plaintext highlighter-rouge">CMD command param1 param2</code> (shell form)</li>
</ul>

<p>CMD 명령어는 오직 한 개의 명령어만 효과가 있습니다. 만약 아래와 같이 여러 번에 걸쳐서 작성하면 마지막 명령어 <code class="language-plaintext highlighter-rouge">CMD echo "B"</code>만 실행됩니다.</p>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">CMD</span><span class="s"> echo "A" </span>
<span class="k">CMD</span><span class="s"> echo "B" </span>
</code></pre></div></div>

<p>CMD 명령어의 가장 큰 목적은 컨테이너가 실행될 때 디폴트 명령어, 또는 인자값을 주고 싶은 경우입니다. 예를 들어 설명해보겠습니다.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">CMD ["executable","param1","param2"]</code></li>
</ul>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># executable과 params의 조합이 하나의 디폴트</span>
<span class="k">CMD</span><span class="s"> ["/bin/bash", "-c", "echo", "Hello"] </span>

--------------

# 컨테이너를 실행할 때 별다른 명령어를 입력하지 않은 경우
docker run -it --rm &lt;image-name&gt;
-&gt; Hello

<span class="c"># 명령어를 입력하면 CMD의 디폴트는 실행되지 않습니다</span>
docker run -it --rm &lt;image-name&gt; echo "Good morning"
-&gt; Good morning
</code></pre></div></div>

<ul>
  <li><code class="language-plaintext highlighter-rouge">CMD ["param1","param2"]</code></li>
</ul>

<p>이 경우에는 반드시 ENTRYPOINT 명령어를 명시해줘야 합니다. 왜냐하면 인자값만 줬을 뿐 아무런 실행 가능한 것도 표기하지 않았기 때문입니다. 이 방법은 ENTRYPOINT 명령어에 디폴트 파라미터를 제공하기 위한 것입니다.</p>

<div class="language-dockerfile highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">ENTRYPOINT</span><span class="s"> ["/bin/echo", "Hello"]</span>
<span class="k">CMD</span><span class="s"> ["world"]</span>

--------------  
  
# 컨테이너를 실행할 때 디폴트 인자값 주지 않아 CMD 명령어가 실행된 경우 
docker run -it --rm &lt;image-name&gt;
-&gt; Hello world

<span class="c"># 실행 시 인자 값을 주어 CMD 명령어가 실행되지 않은 경우</span>
docker run -it --rm &lt;image-name&gt; ME
-&gt; Hello ME
</code></pre></div></div>

<h1 id="entrypoint">ENTRYPOINT</h1>

<h1 id="cmd-and-entrypoint">CMD and ENTRYPOINT</h1>

<h1 id="참고">참고</h1>

<p><a href="https://docs.docker.com/engine/reference/builder/#cmd" target="_blank">Docker 공식문서</a></p>
:ET