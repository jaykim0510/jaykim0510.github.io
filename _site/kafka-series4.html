<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Kafka Series [Part4]: 카프카의 데이터 저장</title>
  <meta name='description' content='Jay Tech personal blogging theme for Jekyll'>

  <link rel="canonical" href="http://localhost:4000/kafka-series4">
  <link rel="alternate" type="application/rss+xml" title="Code Museum" href="/feed.xml">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Kafka Series [Part4]: 카프카의 데이터 저장 – Code Museum">
  <meta name="twitter:description" content="
Table of Contents
">
  <meta name="twitter:image:src" content="http://localhost:4000/images/kafka_78.png">

  <!-- Facebook OpenGraph -->
  <meta property="og:title" content="Kafka Series [Part4]: 카프카의 데이터 저장 – Code Museum">
  <meta property="og:description" content="
Table of Contents
">
  <meta property="og:image" content="http://localhost:4000/images/kafka_78.png">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com">

  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Jost:wght@400;500;700;900&display=swap" as="style">

  <link href="https://fonts.googleapis.com/css2?family=Jost:wght@400;500;700;900&display=swap" rel="stylesheet">


  <!-- Ionicons -->
  <link rel="preload" href="https://unpkg.com/ionicons@4.2.2/dist/css/ionicons.min.css" as="style">

  <link href="https://unpkg.com/ionicons@4.2.2/dist/css/ionicons.min.css" rel="stylesheet">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script src="https://kit.fontawesome.com/869a10f869.js" crossorigin="anonymous"></script>

  <script>
    
    if (localStorage.getItem("theme") === "dark") {
      document.documentElement.setAttribute("dark", "");
      document.documentElement.classList.add('dark-mode');
    }
    
  </script>

  <style>
  
  /*!------------------------------------------------------------------
[MAIN STYLESHEET]
-------------------------------------------------------------------*/:root{--brand-color: #0073ec;--white: #fff;--light-gray: #f0f0f0;--light-blue: #f3f7ff;--blue-gray: #716f8a;--gray: #9e9e9e;--dark: #0c101a;--dark-blue: #1e2740;--dark-grey: rgb(97, 97, 97);--background-color: rgb(250, 250, 250);--background-alt-color: var(--dark-blue);--text-color: var(--dark-grey);--text-alt-color: var(--blue-gray);--heading-font-color: var(--dark-blue);--link-color: var(--dark-blue);--link-color-hover: var(--dark-blue);--button-color: var(--white);--button-background-color: var(--brand-color);--button-background-hover: #4f31c7;--pagination-item: whitesmoke;--border-color: var(--light-blue);--border-color-alt: var(--light-blue);--th-color: whitesmoke;--tr-color: var(--light-gray);--td-color: rgb(255, 255, 240);--syntax-highlighting-background: #f3f3f3;--article__inner-background: white;--top-background: black;--strong-font-color: palevioletred;--article-highlighing-background: lightgrey;--article-highlighing-font: blueviolet;--drag-background-color: darksalmon;--drag-font-color: greenyellow;--quote-font-color: cadetblue;--post-tag-list-background-color: gainsboro;--post-category-list-background-color: antiquewhite}[dark]:root{--brand-color: #0073ec;--white: #fff;--light-gray: #f0f0f0;--gray: #9e9e9e;--dark: #111016;--background-color: var(--dark);--background-alt-color: #1a1a1f;--text-color: var(--gray);--text-alt-color: var(--gray);--heading-font-color: darkgrey;--link-color: var(--light-gray);--link-color-hover: var(--light-gray);--button-color: var(--white);--button-background-color: var(--brand-color);--button-background-hover: #4f31c7;--pagination-item: black;--border-color: #252629;--border-color-alt: #080b12;--th-color: black;--tr-color: #080b12;--td-color: dimgray;--syntax-highlighting-background: #292c33;--article__inner-background: rgb(65, 65, 65);--top-background: black;--strong-font-color: darkseagreen;--article-highlighing-background: darkslategrey;--article-highlighing-font: goldenrod;--drag-background-color: darkslategrey;--drag-font-color: rgb(115, 192, 0);--quote-font-color: palevioletred;--post-tag-list-background-color: darkslateblue;--post-category-list-background-color: darkred}.list-reset{list-style-type:none;margin:0;padding:0}.clearfix::after,.clearfix ::before{content:"";display:table;clear:both}.screen-reader-text{clip:rect(1px, 1px, 1px, 1px);height:1px;overflow:hidden;position:absolute !important;width:1px;word-wrap:normal !important}/*! normalize.css v8.0.0 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}h1{font-size:2em;margin:0.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace, monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder;color:var(--strong-font-color)}code,kbd,samp{font-family:Monaco, Consolas, "Lucida Console", monospace;font-size:1.15em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-0.25em}sup{top:-0.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}button,[type="button"],[type="reset"],[type="submit"]{-webkit-appearance:button}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner{border-style:none;padding:0}button:-moz-focusring,[type="button"]:-moz-focusring,[type="reset"]:-moz-focusring,[type="submit"]:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:0.35em 0.75em 0.625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type="checkbox"],[type="radio"]{box-sizing:border-box;padding:0}[type="number"]::-webkit-inner-spin-button,[type="number"]::-webkit-outer-spin-button{height:auto}[type="search"]{-webkit-appearance:textfield;outline-offset:-2px}[type="search"]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}bold{font-weight:1000}mark{background-color:rgba(210,105,30,0.493)}body,h1,h2,h3,h4,h5,h6,p,blockquote,pre,dl,dd,ol,ul,fieldset,legend,figure,hr{margin:0;padding:0}li>ul,li>ol{margin-bottom:0}table{border-collapse:collapse;border-spacing:0}h1,h2,h3,h4,h5,h6,ul,ol,dl,blockquote,p,address,hr,table,fieldset,figure,pre{margin-bottom:32px}ul,ol,dd{margin-left:16px}ul li,ol li{margin-bottom:10px}.highlight{margin-bottom:32px;background:var(--syntax-highlighting-background)}.highlighter-rouge .highlight{background:#1d1f27;border-radius:9px}.highlight .p{color:lightgrey;font-weight:bold}.highlight .n{color:#518cad;font-weight:bold}.highlight .c{color:forestgreen;font-style:italic}.highlight .k{color:#b679e9;font-weight:bold}.highlight .o{font-weight:bold}.highlight .cm{color:forestgreen;font-style:italic}.highlight .cp{color:forestgreen;font-weight:bold}.highlight .c1{color:forestgreen;font-style:italic}.highlight .cs{color:forestgreen;font-weight:bold;font-style:italic}.highlight .gd{color:#000;background-color:#fdd}.highlight .gd .x{color:#000;background-color:#faa}.highlight .ge{font-style:italic}.highlight .gh{color:#999}.highlight .gi{color:#000;background-color:#dfd}.highlight .gi .x{color:#000;background-color:#afa}.highlight .go{color:#888}.highlight .gp{color:#555}.highlight .gs{font-weight:bold}.highlight .gu{color:#aaa}.highlight .gt{color:#a00}.highlight .kc{color:#569cd7;font-weight:bold}.highlight .kd{color:#569cd7;font-weight:bold}.highlight .kp{color:#569cd7;font-weight:bold}.highlight .kr{color:#569cd7;font-weight:bold}.highlight .kt{color:#5d76bf;font-weight:bold}.highlight .m{color:#099}.highlight .na{color:#b679e9;font-weight:bold}.highlight .nb{color:darksalmon;font-weight:bold}.highlight .nc{color:#5d76bf;font-weight:bold}.highlight .no{color:#008080}.highlight .ni{color:#800080}.highlight .nl{color:#79bae2;font-weight:bold}.highlight .ne{color:#900;font-weight:bold}.highlight .nf{color:darksalmon;font-weight:bold}.highlight .nn{color:#ffcb6b}.highlight .nt{color:#4d65dc}.highlight .ow{color:#b679e9;font-weight:bold}.highlight .w{color:#bbb}.highlight .sb{color:#d19379}.highlight .sc{color:#d19379}.highlight .sd{color:#d19379}.highlight .s2{color:#d19379}.highlight .se{color:#d19379}.highlight .sh{color:#d19379}.highlight .si{color:#d19379}.highlight .sx{color:#d19379}.highlight .sr{color:#d19379}.highlight .s1{color:#d19379}.highlight .ss{color:#d19379}.highlight .bp{color:#999}.highlight .vc{color:#008080}.highlight .vg{color:#008080}.highlight .vi{color:#008080}.highlight .il{color:#099}@media only screen and (min-width: 768px){.post__content{grid-column:span 9}}@media only screen and (max-width: 768px){.post__content{grid-column:span 11}}@media only screen and (max-width: 576px){.post__content{grid-column:span 11}}@media only screen and (min-width: 768px){.post__tags_list{grid-column:span 2;padding-left:2vw}}@media only screen and (max-width: 768px){.post__tags_list{grid-column:span 0;display:none}}@media only screen and (max-width: 576px){.post__tags_list{grid-column:span 0;display:none}}.container_post{max-width:1140px;padding-left:16px;padding-right:16px;margin:0 auto}@media only screen and (max-width: 1140px){.container_post{max-width:1000px}}@media only screen and (max-width: 1024px){.container_post{max-width:740px}}@media only screen and (min-width: 768px){.container_post{display:grid;grid-template-columns:repeat(11, 1fr)}}@media only screen and (max-width: 768px){.container_post{max-width:560px}}@media only screen and (max-width: 576px){.container_post{max-width:480px;padding-left:calc(16px + 4px);padding-right:calc(16px + 4px)}}.container{max-width:1140px;padding-left:16px;padding-right:16px;margin:0 auto}@media only screen and (max-width: 1140px){.container{max-width:1000px}}@media only screen and (max-width: 1024px){.container{max-width:740px}}@media only screen and (max-width: 768px){.container{max-width:560px}}@media only screen and (max-width: 576px){.container{max-width:480px;padding-left:calc(16px + 4px);padding-right:calc(16px + 4px)}}.row{display:flex;flex-wrap:wrap;flex:0 1 auto;flex-direction:row;box-sizing:border-box;margin-left:-16px;margin-right:-16px}.col{padding-left:16px;padding-right:16px}[class^="col-"]{flex:auto}.col-0{width:0%}.col-1{width:8.3333333333%}.col-2{width:16.6666666667%}.col-3{width:25%}.col-4{width:33.3333333333%}.col-5{width:41.6666666667%}.col-6{width:50%}.col-7{width:58.3333333333%}.col-8{width:66.6666666667%}.col-9{width:75%}.col-10{width:83.3333333333%}.col-11{width:91.6666666667%}.col-12{width:100%}.push-0{margin-left:0%}.push-1{margin-left:8.3333333333%}.push-2{margin-left:16.6666666667%}.push-3{margin-left:25%}.push-4{margin-left:33.3333333333%}.push-5{margin-left:41.6666666667%}.push-6{margin-left:50%}.push-7{margin-left:58.3333333333%}.push-8{margin-left:66.6666666667%}.push-9{margin-left:75%}.push-10{margin-left:83.3333333333%}.push-11{margin-left:91.6666666667%}.push-12{margin-left:100%}.pull-0{margin-right:0%}.pull-1{margin-right:8.3333333333%}.pull-2{margin-right:16.6666666667%}.pull-3{margin-right:25%}.pull-4{margin-right:33.3333333333%}.pull-5{margin-right:41.6666666667%}.pull-6{margin-right:50%}.pull-7{margin-right:58.3333333333%}.pull-8{margin-right:66.6666666667%}.pull-9{margin-right:75%}.pull-10{margin-right:83.3333333333%}.pull-11{margin-right:91.6666666667%}.pull-12{margin-right:100%}@media (max-width: 1024px){.col-d-0{width:0%}.col-d-1{width:8.3333333333%}.col-d-2{width:16.6666666667%}.col-d-3{width:25%}.col-d-4{width:33.3333333333%}.col-d-5{width:41.6666666667%}.col-d-6{width:50%}.col-d-7{width:58.3333333333%}.col-d-8{width:66.6666666667%}.col-d-9{width:75%}.col-d-10{width:83.3333333333%}.col-d-11{width:91.6666666667%}.col-d-12{width:100%}.push-d-0{margin-left:0%}.push-d-1{margin-left:8.3333333333%}.push-d-2{margin-left:16.6666666667%}.push-d-3{margin-left:25%}.push-d-4{margin-left:33.3333333333%}.push-d-5{margin-left:41.6666666667%}.push-d-6{margin-left:50%}.push-d-7{margin-left:58.3333333333%}.push-d-8{margin-left:66.6666666667%}.push-d-9{margin-left:75%}.push-d-10{margin-left:83.3333333333%}.push-d-11{margin-left:91.6666666667%}.push-d-12{margin-left:100%}.pull-d-0{margin-right:0%}.pull-d-1{margin-right:8.3333333333%}.pull-d-2{margin-right:16.6666666667%}.pull-d-3{margin-right:25%}.pull-d-4{margin-right:33.3333333333%}.pull-d-5{margin-right:41.6666666667%}.pull-d-6{margin-right:50%}.pull-d-7{margin-right:58.3333333333%}.pull-d-8{margin-right:66.6666666667%}.pull-d-9{margin-right:75%}.pull-d-10{margin-right:83.3333333333%}.pull-d-11{margin-right:91.6666666667%}.pull-d-12{margin-right:100%}}@media (max-width: 768px){.col-t-0{width:0%}.col-t-1{width:8.3333333333%}.col-t-2{width:16.6666666667%}.col-t-3{width:25%}.col-t-4{width:33.3333333333%}.col-t-5{width:41.6666666667%}.col-t-6{width:50%}.col-t-7{width:58.3333333333%}.col-t-8{width:66.6666666667%}.col-t-9{width:75%}.col-t-10{width:83.3333333333%}.col-t-11{width:91.6666666667%}.col-t-12{width:100%}.push-t-0{margin-left:0%}.push-t-1{margin-left:8.3333333333%}.push-t-2{margin-left:16.6666666667%}.push-t-3{margin-left:25%}.push-t-4{margin-left:33.3333333333%}.push-t-5{margin-left:41.6666666667%}.push-t-6{margin-left:50%}.push-t-7{margin-left:58.3333333333%}.push-t-8{margin-left:66.6666666667%}.push-t-9{margin-left:75%}.push-t-10{margin-left:83.3333333333%}.push-t-11{margin-left:91.6666666667%}.push-t-12{margin-left:100%}.pull-t-0{margin-right:0%}.pull-t-1{margin-right:8.3333333333%}.pull-t-2{margin-right:16.6666666667%}.pull-t-3{margin-right:25%}.pull-t-4{margin-right:33.3333333333%}.pull-t-5{margin-right:41.6666666667%}.pull-t-6{margin-right:50%}.pull-t-7{margin-right:58.3333333333%}.pull-t-8{margin-right:66.6666666667%}.pull-t-9{margin-right:75%}.pull-t-10{margin-right:83.3333333333%}.pull-t-11{margin-right:91.6666666667%}.pull-t-12{margin-right:100%}}@media (max-width: 576px){.col-m-0{width:0%}.col-m-1{width:8.3333333333%}.col-m-2{width:16.6666666667%}.col-m-3{width:25%}.col-m-4{width:33.3333333333%}.col-m-5{width:41.6666666667%}.col-m-6{width:50%}.col-m-7{width:58.3333333333%}.col-m-8{width:66.6666666667%}.col-m-9{width:75%}.col-m-10{width:83.3333333333%}.col-m-11{width:91.6666666667%}.col-m-12{width:100%}.push-m-0{margin-left:0%}.push-m-1{margin-left:8.3333333333%}.push-m-2{margin-left:16.6666666667%}.push-m-3{margin-left:25%}.push-m-4{margin-left:33.3333333333%}.push-m-5{margin-left:41.6666666667%}.push-m-6{margin-left:50%}.push-m-7{margin-left:58.3333333333%}.push-m-8{margin-left:66.6666666667%}.push-m-9{margin-left:75%}.push-m-10{margin-left:83.3333333333%}.push-m-11{margin-left:91.6666666667%}.push-m-12{margin-left:100%}.pull-m-0{margin-right:0%}.pull-m-1{margin-right:8.3333333333%}.pull-m-2{margin-right:16.6666666667%}.pull-m-3{margin-right:25%}.pull-m-4{margin-right:33.3333333333%}.pull-m-5{margin-right:41.6666666667%}.pull-m-6{margin-right:50%}.pull-m-7{margin-right:58.3333333333%}.pull-m-8{margin-right:66.6666666667%}.pull-m-9{margin-right:75%}.pull-m-10{margin-right:83.3333333333%}.pull-m-11{margin-right:91.6666666667%}.pull-m-12{margin-right:100%}}@media (max-width: 1024px){.col-d-0{width:0%}.col-d-1{width:8.3333333333%}.col-d-2{width:16.6666666667%}.col-d-3{width:25%}.col-d-4{width:33.3333333333%}.col-d-5{width:41.6666666667%}.col-d-6{width:50%}.col-d-7{width:58.3333333333%}.col-d-8{width:66.6666666667%}.col-d-9{width:75%}.col-d-10{width:83.3333333333%}.col-d-11{width:91.6666666667%}.col-d-12{width:100%}.push-d-0{margin-left:0%}.push-d-1{margin-left:8.3333333333%}.push-d-2{margin-left:16.6666666667%}.push-d-3{margin-left:25%}.push-d-4{margin-left:33.3333333333%}.push-d-5{margin-left:41.6666666667%}.push-d-6{margin-left:50%}.push-d-7{margin-left:58.3333333333%}.push-d-8{margin-left:66.6666666667%}.push-d-9{margin-left:75%}.push-d-10{margin-left:83.3333333333%}.push-d-11{margin-left:91.6666666667%}.push-d-12{margin-left:100%}.pull-d-0{margin-right:0%}.pull-d-1{margin-right:8.3333333333%}.pull-d-2{margin-right:16.6666666667%}.pull-d-3{margin-right:25%}.pull-d-4{margin-right:33.3333333333%}.pull-d-5{margin-right:41.6666666667%}.pull-d-6{margin-right:50%}.pull-d-7{margin-right:58.3333333333%}.pull-d-8{margin-right:66.6666666667%}.pull-d-9{margin-right:75%}.pull-d-10{margin-right:83.3333333333%}.pull-d-11{margin-right:91.6666666667%}.pull-d-12{margin-right:100%}}@media (max-width: 768px){.col-t-0{width:0%}.col-t-1{width:8.3333333333%}.col-t-2{width:16.6666666667%}.col-t-3{width:25%}.col-t-4{width:33.3333333333%}.col-t-5{width:41.6666666667%}.col-t-6{width:50%}.col-t-7{width:58.3333333333%}.col-t-8{width:66.6666666667%}.col-t-9{width:75%}.col-t-10{width:83.3333333333%}.col-t-11{width:91.6666666667%}.col-t-12{width:100%}.push-t-0{margin-left:0%}.push-t-1{margin-left:8.3333333333%}.push-t-2{margin-left:16.6666666667%}.push-t-3{margin-left:25%}.push-t-4{margin-left:33.3333333333%}.push-t-5{margin-left:41.6666666667%}.push-t-6{margin-left:50%}.push-t-7{margin-left:58.3333333333%}.push-t-8{margin-left:66.6666666667%}.push-t-9{margin-left:75%}.push-t-10{margin-left:83.3333333333%}.push-t-11{margin-left:91.6666666667%}.push-t-12{margin-left:100%}.pull-t-0{margin-right:0%}.pull-t-1{margin-right:8.3333333333%}.pull-t-2{margin-right:16.6666666667%}.pull-t-3{margin-right:25%}.pull-t-4{margin-right:33.3333333333%}.pull-t-5{margin-right:41.6666666667%}.pull-t-6{margin-right:50%}.pull-t-7{margin-right:58.3333333333%}.pull-t-8{margin-right:66.6666666667%}.pull-t-9{margin-right:75%}.pull-t-10{margin-right:83.3333333333%}.pull-t-11{margin-right:91.6666666667%}.pull-t-12{margin-right:100%}}@media (max-width: 576px){.col-m-0{width:0%}.col-m-1{width:8.3333333333%}.col-m-2{width:16.6666666667%}.col-m-3{width:25%}.col-m-4{width:33.3333333333%}.col-m-5{width:41.6666666667%}.col-m-6{width:50%}.col-m-7{width:58.3333333333%}.col-m-8{width:66.6666666667%}.col-m-9{width:75%}.col-m-10{width:83.3333333333%}.col-m-11{width:91.6666666667%}.col-m-12{width:100%}.push-m-0{margin-left:0%}.push-m-1{margin-left:8.3333333333%}.push-m-2{margin-left:16.6666666667%}.push-m-3{margin-left:25%}.push-m-4{margin-left:33.3333333333%}.push-m-5{margin-left:41.6666666667%}.push-m-6{margin-left:50%}.push-m-7{margin-left:58.3333333333%}.push-m-8{margin-left:66.6666666667%}.push-m-9{margin-left:75%}.push-m-10{margin-left:83.3333333333%}.push-m-11{margin-left:91.6666666667%}.push-m-12{margin-left:100%}.pull-m-0{margin-right:0%}.pull-m-1{margin-right:8.3333333333%}.pull-m-2{margin-right:16.6666666667%}.pull-m-3{margin-right:25%}.pull-m-4{margin-right:33.3333333333%}.pull-m-5{margin-right:41.6666666667%}.pull-m-6{margin-right:50%}.pull-m-7{margin-right:58.3333333333%}.pull-m-8{margin-right:66.6666666667%}.pull-m-9{margin-right:75%}.pull-m-10{margin-right:83.3333333333%}.pull-m-11{margin-right:91.6666666667%}.pull-m-12{margin-right:100%}}@media (max-width: 1024px){.col-d-0{width:0%}.col-d-1{width:8.3333333333%}.col-d-2{width:16.6666666667%}.col-d-3{width:25%}.col-d-4{width:33.3333333333%}.col-d-5{width:41.6666666667%}.col-d-6{width:50%}.col-d-7{width:58.3333333333%}.col-d-8{width:66.6666666667%}.col-d-9{width:75%}.col-d-10{width:83.3333333333%}.col-d-11{width:91.6666666667%}.col-d-12{width:100%}.push-d-0{margin-left:0%}.push-d-1{margin-left:8.3333333333%}.push-d-2{margin-left:16.6666666667%}.push-d-3{margin-left:25%}.push-d-4{margin-left:33.3333333333%}.push-d-5{margin-left:41.6666666667%}.push-d-6{margin-left:50%}.push-d-7{margin-left:58.3333333333%}.push-d-8{margin-left:66.6666666667%}.push-d-9{margin-left:75%}.push-d-10{margin-left:83.3333333333%}.push-d-11{margin-left:91.6666666667%}.push-d-12{margin-left:100%}.pull-d-0{margin-right:0%}.pull-d-1{margin-right:8.3333333333%}.pull-d-2{margin-right:16.6666666667%}.pull-d-3{margin-right:25%}.pull-d-4{margin-right:33.3333333333%}.pull-d-5{margin-right:41.6666666667%}.pull-d-6{margin-right:50%}.pull-d-7{margin-right:58.3333333333%}.pull-d-8{margin-right:66.6666666667%}.pull-d-9{margin-right:75%}.pull-d-10{margin-right:83.3333333333%}.pull-d-11{margin-right:91.6666666667%}.pull-d-12{margin-right:100%}}@media (max-width: 768px){.col-t-0{width:0%}.col-t-1{width:8.3333333333%}.col-t-2{width:16.6666666667%}.col-t-3{width:25%}.col-t-4{width:33.3333333333%}.col-t-5{width:41.6666666667%}.col-t-6{width:50%}.col-t-7{width:58.3333333333%}.col-t-8{width:66.6666666667%}.col-t-9{width:75%}.col-t-10{width:83.3333333333%}.col-t-11{width:91.6666666667%}.col-t-12{width:100%}.push-t-0{margin-left:0%}.push-t-1{margin-left:8.3333333333%}.push-t-2{margin-left:16.6666666667%}.push-t-3{margin-left:25%}.push-t-4{margin-left:33.3333333333%}.push-t-5{margin-left:41.6666666667%}.push-t-6{margin-left:50%}.push-t-7{margin-left:58.3333333333%}.push-t-8{margin-left:66.6666666667%}.push-t-9{margin-left:75%}.push-t-10{margin-left:83.3333333333%}.push-t-11{margin-left:91.6666666667%}.push-t-12{margin-left:100%}.pull-t-0{margin-right:0%}.pull-t-1{margin-right:8.3333333333%}.pull-t-2{margin-right:16.6666666667%}.pull-t-3{margin-right:25%}.pull-t-4{margin-right:33.3333333333%}.pull-t-5{margin-right:41.6666666667%}.pull-t-6{margin-right:50%}.pull-t-7{margin-right:58.3333333333%}.pull-t-8{margin-right:66.6666666667%}.pull-t-9{margin-right:75%}.pull-t-10{margin-right:83.3333333333%}.pull-t-11{margin-right:91.6666666667%}.pull-t-12{margin-right:100%}}@media (max-width: 576px){.col-m-0{width:0%}.col-m-1{width:8.3333333333%}.col-m-2{width:16.6666666667%}.col-m-3{width:25%}.col-m-4{width:33.3333333333%}.col-m-5{width:41.6666666667%}.col-m-6{width:50%}.col-m-7{width:58.3333333333%}.col-m-8{width:66.6666666667%}.col-m-9{width:75%}.col-m-10{width:83.3333333333%}.col-m-11{width:91.6666666667%}.col-m-12{width:100%}.push-m-0{margin-left:0%}.push-m-1{margin-left:8.3333333333%}.push-m-2{margin-left:16.6666666667%}.push-m-3{margin-left:25%}.push-m-4{margin-left:33.3333333333%}.push-m-5{margin-left:41.6666666667%}.push-m-6{margin-left:50%}.push-m-7{margin-left:58.3333333333%}.push-m-8{margin-left:66.6666666667%}.push-m-9{margin-left:75%}.push-m-10{margin-left:83.3333333333%}.push-m-11{margin-left:91.6666666667%}.push-m-12{margin-left:100%}.pull-m-0{margin-right:0%}.pull-m-1{margin-right:8.3333333333%}.pull-m-2{margin-right:16.6666666667%}.pull-m-3{margin-right:25%}.pull-m-4{margin-right:33.3333333333%}.pull-m-5{margin-right:41.6666666667%}.pull-m-6{margin-right:50%}.pull-m-7{margin-right:58.3333333333%}.pull-m-8{margin-right:66.6666666667%}.pull-m-9{margin-right:75%}.pull-m-10{margin-right:83.3333333333%}.pull-m-11{margin-right:91.6666666667%}.pull-m-12{margin-right:100%}}.animate{animation:animateElement cubic-bezier(0.3, 0.45, 0.45, 0.95) 0.75s;animation-duration:0.5s;animation-iteration-count:1;transition:transform .15s}@keyframes animateElement{0%{transform:translate(0px, 50px)}100%{transform:translate(0px, 0px)}}@keyframes pulse{0%{transform:scale(1, 1)}25%{transform:scale(1, 1)}50%{transform:scale(1.2, 1.2)}100%{transform:scale(1, 1)}}*,*::after,*::before{box-sizing:border-box}body{font-family:"Nanum Gothic Coding",monospace;font-size:16px;line-height:1.5;overflow-x:hidden;color:var(--text-color);letter-spacing:-0.4px;background-color:var(--background-color);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}@media only screen and (max-width: 576px){body{font-size:18px}}*::selection{color:var(--text-color);background-color:var(--drag-background-color)}h1,h2,h3,h4,h5,h6{font-family:"Noto Sans","Apple SD Gothic Neo","맑은 고딕","Malgun Gothic","돋움",dotum,sans-serif;font-weight:700;line-height:1.3;letter-spacing:-1px;color:var(--heading-font-color)}h1{font-size:36px;font-family:"Gowun Batang", serif}h2{font-family:"Stylish", sans-serif;font-size:32px;font-weight:500}h3{font-size:20px}h4{font-size:18px}h5{font-size:16px}h6{font-size:14px}blockquote{position:relative;margin:40px 0;padding-left:26px;font-size:22px;line-height:1.4}blockquote p{padding-left:24px;padding-top:10px;color:var(--quote-font-color);font-family:"Kalam", cursive;font-weight:400}blockquote cite{display:block;margin-top:8px;font-size:14px;font-weight:700;font-style:normal;color:var(--heading-font-color)}@media only screen and (max-width: 576px){blockquote{font-size:21px}}blockquote::before{content:"\f10d";font-size:32px;color:#ccc;font-family:FontAwesome;font-style:normal;font-weight:normal;text-decoration:inherit;text-align:center;position:absolute;left:0;top:0}pre{overflow:auto;padding:15px;margin-bottom:0;font-size:14px;word-wrap:break-word;word-break:break-all;color:lightgrey}img,.lightense-wrap{max-width:100%;height:auto;vertical-align:middle}img+em,.lightense-wrap+em,.gallery+em{display:block;margin-top:20px;font-size:12px;line-height:22px;font-style:normal;font-weight:normal;text-align:center;color:var(--heading-font-color)}img+em a,.lightense-wrap+em a,.gallery+em a{font-weight:500;border-bottom:1px solid var(--border-color);transition:all 0.35s}img+em a:hover,.lightense-wrap+em a:hover,.gallery+em a:hover{color:var(--link-color);border-color:var(--link-color-hover)}@media only screen and (max-width: 576px){img+em,.lightense-wrap+em,.gallery+em{margin-top:12px}}a{text-decoration:none;color:var(--link-color);transition:all 0.35s}a:hover{color:var(--link-color-hover)}p>a{font-weight:900}hr{width:100%;height:1px;margin:60px 0;border:0;background:var(--text-color)}.table-container{display:block;max-width:100%;overflow-x:auto}table{font-size:12px;color:var(--dark);width:100%;border-width:1px;border-color:var(--background-alt-color);border-collapse:collapse;color:var(--heading-font-color)}table th{padding:10px;font-size:16px;text-align:left;border:1.5px solid var(--background-alt-color);color:var(--heading-font-color);font-weight:700;background-color:var(--th-color)}table tr{background-color:var(--tr-color);transition:all 0.3s ease}table td{padding:10px;font-size:14px;background-color:var(--td-color);border:1px solid var(--background-alt-color)}.button{display:inline-block;padding:20px 26px;font-size:16px;font-weight:700;text-decoration:none;border-radius:2px;border:none;outline:none;cursor:pointer;transition:all 0.25s;color:var(--heading-font-color);background:var(--background-alt-color)}.button--primary{color:var(--white);background-color:var(--button-background-color)}.button--primary:hover{background:var(--button-background-hover)}.button--big{display:block;width:100%}.lazy{opacity:0;transition:opacity 0.3s ease-in-out}.lazy.loaded{opacity:1}.lightense-backdrop{background-color:var(--background-color) !important}code.language-plaintext.highlighter-rouge{font-family:"Roboto Mono", monospace;font-size:13.6px;background-color:var(--article-highlighing-background);border-radius:0.1em;padding-left:0.1em;padding-right:0.1em;color:var(--article-highlighing-font)}.portfolio_img{width:10%;text-align:center;margin-bottom:30px;padding-left:3%;padding-right:3%;background-color:#d4442e}.point_heading{font-family:"Gowun Batang",serif}#top{background-color:var(--top-background);font:white;top:0;left:0;width:100%;position:fixed;z-index:1}.header .header__inner{position:relative;display:flex;align-items:center;flex-wrap:wrap}.logo__link{padding:4px 0;font-family:"Noto Sans","Apple SD Gothic Neo","맑은 고딕","Malgun Gothic","돋움",dotum,sans-serif;font-size:28px;letter-spacing:-1px;line-height:1;font-weight:700;transition:color .25s ease;color:white}.logo__link:hover{color:var(--brand-color)}.logo__image{max-height:75px}.main-nav{margin-left:auto}@media only screen and (max-width: 1024px){.main-nav{position:fixed;top:0;left:0;right:0;bottom:0;z-index:100;opacity:0;visibility:hidden;background-color:var(--background-color)}.main-nav.is-open{opacity:1;visibility:visible;transition:all .25s ease;background-color:#728f39}.main-nav .nav__list{flex-direction:column;width:100%}.main-nav .nav__list .nav__item{display:block;margin:0}.main-nav .nav__list .nav__item.nav__item-icon{margin-right:0}.main-nav .nav__list .nav__item .nav__link{display:inline-block;padding:16px 0;font-size:18px;transition:color .25s ease}.main-nav .nav__list .nav__item .nav__link:hover{color:var(--brand-color)}}.main-nav__box{display:flex;align-items:center}.main-nav__box .nav__icon-close{display:none;justify-content:center;align-items:center;width:36px;height:36px;font-size:24px;line-height:1;border-radius:50%;color:var(--heading-font-color);background:var(--background-alt-color);cursor:pointer}.main-nav__box .nav__icon-close:hover .ion-md-close{transform:rotate(90deg)}.main-nav__box .nav__icon-close .ion-md-close{transition:all 0.35s}.main-nav__box .nav__title{display:none}@media only screen and (max-width: 1024px){.main-nav__box{display:block;align-items:center;width:80%;height:80vh;padding-top:180px;margin:0 auto;text-align:center;overflow-y:auto}.main-nav__box .nav__icon-close{display:flex;position:absolute;top:40px;right:40px}.main-nav__box .nav__title{display:inline-block;margin-bottom:12px;font-family:"Noto Sans", "Apple SD Gothic Neo", "맑은 고딕", "Malgun Gothic", "돋움", dotum, sans-serif;font-size:36px;font-weight:700;letter-spacing:-1px;color:var(--heading-font-color)}}@media only screen and (max-width: 768px){.main-nav__box{padding-top:100px}}.nav__list{display:flex;align-items:center}.nav__list .nav__item{display:inline-block;margin-right:48px;margin-bottom:0}.nav__list .nav__item.nav__item-icon{margin-right:12px}.nav__list .nav__item .nav__link{position:relative;padding:4px 0;font-size:20px;line-height:1;font-weight:700;transition:color .25s ease;color:lightgrey}.nav__list .nav__item .nav__link:hover{color:indianred;text-decoration:underline}.nav-button{font-size:21px;color:var(--link-color);cursor:pointer}.nav-button .icon__menu{display:none;margin-right:12px}.nav-button .icon__menu,.nav-button .icon__search{transition:color .25s ease;color:lightgrey}.nav-button .icon__menu:hover,.nav-button .icon__search:hover{color:indianred}@media only screen and (max-width: 1024px){.nav-button{display:flex;align-items:center;margin-left:auto;font-size:24px}.nav-button .icon__menu{display:block}}.toggle-theme{position:relative;display:flex;justify-content:center;align-items:center;width:24px;height:24px;user-select:none;cursor:pointer}@media only screen and (max-width: 1024px){.toggle-theme{padding:20px 0}}.toggle-sun,.toggle-moon{position:absolute;font-size:20px;transition:color .25s ease;color:lightgrey}.toggle-sun:hover,.toggle-moon:hover{color:indianred}.toggle-sun{display:none}.dark-mode .toggle-sun{display:block}.dark-mode .toggle-moon{display:none}.search{position:fixed;top:0;left:0;right:0;bottom:0;z-index:-1;overflow:auto;opacity:0;background:var(--background-color);transition:all .25s ease}.search.is-visible{z-index:100;opacity:1;transition:all .25s ease}.search__box{max-width:540px;margin:0 auto;padding-top:120px}@media only screen and (max-width: 1024px){.search__box{padding-top:100px}}.search__group{position:relative;margin-bottom:48px}.search__group .search__close{position:absolute;right:28px;top:50%;transform:translateY(-50%);display:flex;align-items:center;justify-content:center;width:32px;height:32px;font-size:24px;line-height:1;border-radius:50%;color:var(--heading-font-color);cursor:pointer;will-change:transform;transition:all .25s;background:var(--background-color)}.search__group .search__close:hover{transform:translateY(-50%) rotate(90deg)}.search__group .search__close .ion-md-close{vertical-align:middle}.search__group .search__text{width:100%;padding:28px;font-size:20px;font-weight:700;line-height:24px;border:2px solid transparent;border-radius:2px;color:var(--heading-font-color);background-color:#d3d1d1;outline:0;transition:all .25s}.search__group .search__text::placeholder{font-weight:700;color:var(--heading-font-color)}.search__group .search__text:focus{border-color:var(--brand-color)}.search__group .search__text::-ms-clear{display:none}@media only screen and (max-width: 576px){.search__group{margin-bottom:32px}.search__group .search__text{padding:24px}}.search-results-list .no-results{width:100%;margin:0;text-align:center;color:var(--heading-font-color)}.pagination{margin-bottom:80px}@media only screen and (max-width: 576px){.pagination{margin-bottom:60px}}.pagination__inner{display:flex;justify-content:center;align-items:center}.pagination__list{display:flex;justify-content:space-between;align-items:center;width:100%;font-size:18px;font-weight:700;line-height:1;color:var(--text-color)}@media only screen and (max-width: 576px){.pagination__list{align-items:stretch;font-size:16px}}.pagination__item{font-size:20px;font-family:"Gowun Batang", serif;display:flex;justify-content:center;align-items:center;width:100%;padding:24px 20px;text-align:center;border-radius:8px;background:var(--pagination-item);margin-top:0.3em}@media only screen and (max-width: 576px){.pagination__item{align-items:center;padding:20px;border-radius:8px}}.pagination__count{margin:0 32px;font-size:16px;color:var(--link-color)}@media only screen and (max-width: 768px){.pagination__count{margin:0 12px}}@media only screen and (max-width: 576px){.pagination__count{margin:0 8px;font-size:14px;line-height:1.2}}.pagination__next:hover,.pagination__prev:hover{color:var(--heading-font-color);background-color:var(--article-highlighing-background)}.pagination__next i,.pagination__prev i{font-size:15px;transition:transform 0.15s ease;will-change:transform}.pagination__next.disabled,.pagination__prev.disabled{opacity:0.64;cursor:not-allowed;color:inherit}.pagination__next.disabled:hover i,.pagination__prev.disabled:hover i{transform:none}.dark-mode .pagination__next.disabled,.dark-mode .pagination__prev.disabled{opacity:0.78}.pagination__next:hover i{transform:translateX(2px)}.pagination__next i{margin-left:5px}.pagination__prev:hover i{transform:translateX(-2px)}.pagination__prev i{margin-right:5px}.prev_next{font-size:20px;font-family:"Kalam", cursive;color:var(--strong-font-color);font-weight:bold}.footer{margin-top:48px;background-color:var(--background-alt-color)}@media only screen and (max-width: 576px){.footer{margin-top:60px}}.footer__inner{padding:80px 0}.footer__inner .row .col{flex-grow:1}@media only screen and (max-width: 576px){.footer__inner{padding:60px 0}}@media only screen and (max-width: 1024px){.footer__author{margin-bottom:60px}}@media only screen and (max-width: 576px){.footer__author{margin-bottom:40px}}.footer__author-avatar{position:relative;width:105px;height:105px;margin-bottom:20px;transform:translate(0);border-radius:50%;overflow:hidden;box-shadow:0px 100px 80px rgba(0,0,0,0.07),0px 12.5216px 10.0172px rgba(0,0,0,0.035);background-color:var(--background-color)}.footer__author-avatar img{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;user-select:none}.footer__author-name{margin-bottom:20px;font-size:32px;font-weight:900;line-height:1;color:var(--text-alt-color)}.footer__author-bio{margin-bottom:0;color:var(--text-alt-color)}.social{margin-top:16px}.social .social__list{display:flex;align-items:center;flex-wrap:wrap}.social .social__list .social__item:first-child>.social__link{padding-left:0}.social .social__item{margin-bottom:0;margin-right:16px}.social .social__item:last-child{margin-right:0}.social .social__link{display:flex;align-items:center;padding:4px;font-size:20px;color:var(--text-alt-color)}.social .social__link:hover{color:var(--brand-color)}.footer__gallery .footer__gallery-title{margin-bottom:24px;font-size:28px}.footer__gallery .gallery__image img{height:100%;border-radius:8px;overflow:hidden}.footer__gallery .gallery__image img.lightense-open{border-radius:0}.footer__info{padding:44px 0;background-color:var(--background-color)}.footer__info .footer__info-box{display:flex;align-items:center;justify-content:space-between}@media only screen and (max-width: 1024px){.footer__info{padding:40px 0}}.copyright{margin-right:20px;font-size:14px;font-weight:500;color:var(--text-alt-color)}.copyright a{text-decoration:underline;text-decoration-color:transparent;color:var(--heading-font-color)}.copyright a:hover{text-decoration-color:var(--heading-font-color);color:var(--heading-font-color)}.top{min-width:36px;height:36px;font-size:20px;line-height:36px;text-align:center;border-radius:8px;color:white;background-color:var(--background-alt-color);cursor:pointer;position:fixed;bottom:0.7em;right:0.7em}.gallery-box{margin:32px 0}.gallery{display:grid;grid-template-columns:repeat(3, auto);justify-content:center;align-content:center;grid-gap:10px}.gallery .gallery__image{background:var(--background-color)}.gallery .gallery__image img{display:block;width:100%;height:auto;object-fit:cover}.hero{padding-top:100px;padding-bottom:80px;margin-bottom:80px;background-color:var(--background-alt-color)}.hero__inner{display:flex;align-items:center}@media only screen and (max-width: 1024px){.hero__inner{flex-direction:column}}.hero__left{max-width:450px;margin-right:auto}@media only screen and (max-width: 1140px){.hero__left{max-width:440px}}@media only screen and (max-width: 1024px){.hero__left{max-width:100%}}.hero__title{font-family:'Tangerine', cursive;margin-bottom:20px;font-size:120px;font-weight:400;line-height:1.3;color:var(--text-alt-color)}@media only screen and (max-width: 1024px){.hero__title{font-size:50px}}@media only screen and (max-width: 768px){.hero__title{font-size:40px}}@media only screen and (max-width: 576px){.hero__title{font-size:32px}}.hero__description{margin-bottom:0;font-size:21px;color:var(--text-alt-color)}@media only screen and (max-width: 1024px){.hero__description{font-size:inherit}}.hero__subscribe{margin-top:32px}.hero__subscribe .subscribe-form{position:relative;border-radius:2px;background-color:var(--background-color)}.hero__subscribe .subscribe-email{width:100%;height:70px;padding:20px;font-size:16px;line-height:21px;border:2px solid transparent;border-radius:2px;outline:0;color:var(--heading-font-color);background-color:transparent;transition:all .25s ease}.hero__subscribe .subscribe-email::placeholder{opacity:0.6;color:var(--text-alt-color)}.hero__subscribe .subscribe-email:focus{border-color:var(--brand-color)}.hero__subscribe .subscribe-button{position:absolute;top:6px;right:6px}@media only screen and (max-width: 1024px){.hero__subscribe{margin-top:24px}}@media only screen and (max-width: 576px){.hero__subscribe{margin-top:20px}.hero__subscribe .subscribe-form{display:flex;flex-direction:column;padding:6px}.hero__subscribe .subscribe-email{height:56px;margin-bottom:4px}.hero__subscribe .subscribe-button{position:relative;top:0;right:0}}.hero__right{width:50%}@media only screen and (max-width: 1024px){.hero__right{width:100%;margin-top:40px}}@media only screen and (max-width: 576px){.hero__right{margin-top:32px}}.hero__image{position:relative;transform:translate(0);width:100%;height:410px;border-radius:8px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,0.02);background-color:var(--background-color);user-select:none}.hero__image img{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover}@media only screen and (max-width: 1140px){.hero__image{height:380px}}@media only screen and (max-width: 1024px){.hero__image{height:440px}}@media only screen and (max-width: 768px){.hero__image{height:420px}}@media only screen and (max-width: 576px){.hero__image{height:280px}}.article{margin-bottom:32px;will-change:transform;transition:transform .2s}.article:hover{transform:translateY(-3px)}.article:hover .article__title a{text-decoration:underline;text-decoration-color:var(--link-color-hover);text-decoration-thickness:2px}.article__head{position:relative}.article__date{position:absolute;z-index:1;top:16px;left:16px;display:inline-block;padding:8px 12px;font-size:12px;line-height:1;font-weight:500;border-radius:4px;color:var(--heading-font-color);background:var(--background-color);pointer-events:none}.article__image{position:relative;transform:translate(0);display:block;height:0;margin-bottom:24px;padding-bottom:62%;overflow:hidden;background:var(--background-alt-color)}.article__image img{position:absolute;width:100%;height:100%;object-fit:cover;user-select:none}.video-icon{position:absolute;z-index:1;top:50%;left:50%;width:50%;height:50%;transform:translate(-50%, -50%);pointer-events:none}.video-icon .circle{width:50px;height:50px;position:absolute;top:0;left:0;right:0;bottom:0;border-radius:50%;overflow:hidden;margin:auto;transform:scale(1, 1)}.video-icon .circle.pulse{animation-timing-function:ease;animation:pulse 2s infinite;background-color:rgba(255,255,255,0.25)}.video-icon svg{fill:rgba(255,255,255,0.25);stroke:var(--light-blue);stroke-linejoin:round;stroke-width:5;backdrop-filter:blur(3.5px);-webkit-backdrop-filter:blur(4.5px);transition:all 0.3s}.article__title{margin-bottom:12px;margin-left:10px;margin-right:10px;text-align:center;font-family:"Gowun Batang",serif;font-size:20px;font-weight:lighter}.article__title a{text-decoration:underline;text-decoration-color:transparent;text-decoration-thickness:2px}.article__title a:hover{color:var(--heading-font-color)}.article__excerpt{margin-bottom:0;font-size:16px;margin-left:10px;margin-right:10px;color:var(--text-alt-color);text-align:center}.article__inner{background-color:var(--article__inner-background)}.portfolio_wrapper{display:grid;background-color:var(--article__inner-background);grid-template-columns:repeat(9, 1fr);grid-template-rows:20vw;margin-bottom:5vw;overflow:hidden}.portfolio_image{grid-column:span 3}.portfolio_content{grid-column:span 6;margin-left:1em;font-size:calc(5px + 1vw);text-align:left}.portfolio_title{font-family:"Gowun Batang",serif;font-size:calc(10px + 1.1vw);font-weight:bold}.portfolio_content_row{margin-bottom:0.2em;color:var(--text-alt-color)}.portfolio__page__title{margin-top:150px;font-family:"Gowun Batang",serif}.contact-head{margin-bottom:32px}.form__group{margin-bottom:20px}.form__group:last-child{margin-bottom:0}.form__input{width:100%;padding:20px;font-size:16px;font-weight:400;border:2px solid var(--border-color);border-radius:2px;outline:0;transition:.25s ease-in-out;resize:vertical;color:var(--light-gray);background-color:var(--background-alt-color)}.form__input::placeholder{color:var(--text-alt-color)}.form__input:focus{border-color:var(--brand-color)}.section__head{position:relative;display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;margin-bottom:40px}.section__head::after{content:"";position:absolute;z-index:-1;display:block;width:100%;height:1px;background:var(--background-alt-color);pointer-events:none}@media only screen and (max-width: 768px){.section__head::after{content:none}}.section__title{padding-right:20px;margin-bottom:0;font-size:28px}@media only screen and (max-width: 576px){.section__title{font-size:24px}}.section__link{padding-left:20px;font-size:18px;font-weight:500;text-decoration:underline;text-decoration-color:transparent;color:var(--link-color);transition:text-decoration .35s}.section__link:hover{text-decoration-color:var(--heading-font-color);color:var(--link-color-hover)}@media only screen and (max-width: 768px){.section__link{padding-left:0}}@media only screen and (max-width: 576px){.section__link{font-size:16px}}.section__title,.section__link{background:var(--background-color)}@media only screen and (max-width: 576px){.section-tags .row .col:last-child>.tag-image{margin-bottom:0}}.tag-image{margin-bottom:32px;position:relative;transform:translate(0);display:block;height:0;padding-bottom:62%;border-radius:8px;overflow:hidden;background:var(--background-alt-color);transition:transform .2s}.tag-image:hover{transform:translateY(-3px)}.tag-image img{position:absolute;width:100%;height:100%;object-fit:cover;user-select:none}.tag-image .tag-name{position:absolute;top:2%;right:2%;z-index:1;max-width:90%;display:inline-block;padding:8px 8px;font-size:1.6rem;line-height:1;font-weight:700;text-transform:capitalize;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;border-radius:4px;color:white;pointer-events:none}.post-head,.page-head{margin-bottom:48px;padding-top:80px}.post-head .row,.page-head .row{align-items:center}@media only screen and (max-width: 1024px){.post-head,.page-head{margin-bottom:40px}}@media only screen and (max-width: 576px){.post-head,.page-head{margin-bottom:32px}}.post-image,.page-image{position:relative;transform:translate(0);padding-top:90%;min-height:100px;border-radius:8px;overflow:hidden;background:var(--background-alt-color);margin-top:60px}.post-image img,.page-image img{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;user-select:none}@media only screen and (max-width: 1024px){.post-image,.page-image{padding-top:65%;margin-bottom:40px}}@media only screen and (max-width: 576px){.post-image,.page-image{margin-bottom:32px}}.page-image{padding-top:56.25%;margin-bottom:48px}@media only screen and (max-width: 1024px){.page-image{margin-bottom:40px}}@media only screen and (max-width: 576px){.page-image{margin-bottom:32px}}.post-video,.page-video{margin-bottom:48px;border-radius:8px;overflow:hidden;transform:translate(0);background-color:var(--th-color)}.post-video .post-video__wrap,.post-video .page-video__wrap,.page-video .post-video__wrap,.page-video .page-video__wrap{position:relative;width:100%;height:0;padding-bottom:56.25%}.post-video .post-video__wrap iframe,.post-video .page-video__wrap iframe,.page-video .post-video__wrap iframe,.page-video .page-video__wrap iframe{position:absolute;top:0;left:0;width:100%;height:100%}@media only screen and (max-width: 1024px){.post-video,.page-video{margin-bottom:40px}}@media only screen and (max-width: 576px){.post-video,.page-video{margin-bottom:32px}}.post__info{margin-left:44px}.post__info.post__info-video{max-width:760px;margin:0 auto}@media only screen and (max-width: 1024px){.post__info{margin-left:0}}.page__info{max-width:760px;margin:0 auto}.post__tags{display:flex;align-items:center;flex-wrap:wrap;margin-bottom:20px}.post__tags .post__tag{padding:12px 16px;margin:4px 8px 4px 0;font-size:14px;line-height:1;font-weight:500;text-transform:capitalize;border:none;border-radius:8px;color:var(--heading-font-color);transition:none;background-color:var(--pagination-item)}.post__tags .post__tag:hover{color:indianred}.post__tags .post__tag:last-child{margin-right:0}@media only screen and (max-width: 576px){.post__tags{margin-bottom:16px}}.post__title,.page__title{margin-bottom:24px;font-size:46px;line-height:1.2;font-weight:500}@media only screen and (max-width: 576px){.post__title,.page__title{margin-bottom:20px;font-size:32px}}.page__title{margin-bottom:0;font-family:"Gowun Batang",serif}.post__meta{display:flex;align-items:center;line-height:1}.post__meta .post__author-image{position:relative;transform:translate(0);width:50px;height:50px;border-radius:50%;overflow:hidden;margin-right:12px;background-color:var(--th-color)}.post__meta .post__author-image img{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;user-select:none}.post__meta .post__meta-bottom{display:flex;flex-direction:column}.post__meta .post__author{display:inline-block;margin-bottom:7px;font-size:16px;font-weight:500;text-decoration:underline;text-decoration-color:transparent;color:var(--heading-font-color);transition:text-decoration-color 0.35s}.post__meta .post__author:hover{text-decoration-color:var(--heading-font-color)}.post__meta .post__date{font-size:14px;font-weight:400;color:var(--text-alt-color)}.post,.page{max-width:760px;margin:0 auto 60px;color:var(--text-color)}.post a,.page a{font-weight:500;border-bottom:1px solid var(--border-color)}.post a:hover,.page a:hover{color:var(--link-color);border-bottom-color:var(--link-color-hover)}.post img,.post .js-reframe,.page img,.page .js-reframe{overflow:hidden}.post img.lightense-open,.post .js-reframe.lightense-open,.page img.lightense-open,.page .js-reframe.lightense-open{border-radius:0}.post img[src$="#wide"],.page img[src$="#wide"]{display:block;width:100vw;max-width:none;margin-left:50%;transform:translateX(-50%);border-radius:0;pointer-events:none;user-select:none}.post .button,.page .button{border:none;text-decoration:none}.post__share .share__list{display:flex;align-items:center;width:100%}.post__share .share__item{width:25%;margin-right:8px;margin-bottom:0;text-align:center}.post__share .share__item:last-child{margin-right:0}.post__share .share__link{display:flex;justify-content:center;align-items:center;width:100%;height:54px;font-size:18px;text-transform:uppercase;border:none;border-radius:8px;background:var(--th-color)}.post__share .share__link i{transition:transform 0.25s;will-change:transform}.post__share .share__link:hover{color:var(--heading-font-color)}.post__share .share__link:hover i{transform:scale(1.1)}.related-posts{display:none;margin-top:80px}.related-posts.is-related{display:block}.related-posts .related-tag{text-transform:capitalize}@media only screen and (max-width: 576px){.related-posts{margin-top:60px}.related-posts .row .col:last-child{margin-bottom:0}}.show-comments{margin:48px 0 32px;text-align:center}.show-comments .disqus-button{padding:28px;border-radius:8px;text-decoration:underline;text-decoration-color:transparent;background:var(--th-color)}.show-comments .disqus-button:hover{text-decoration-color:var(--heading-font-color)}@media only screen and (max-width: 576px){.show-comments{margin:60px 0 0}.show-comments .disqus-button{padding:24px}}.post__comments{max-width:760px;margin:0 auto}.post__comments.is-open{margin:0 auto 32px}@media only screen and (max-width: 576px){.post__comments.is-open{margin:0 auto}}.error{text-align:center}.error .error__title{margin-bottom:24px;font-size:100px;line-height:1}.error .error__text{margin-bottom:0;color:var(--text-alt-color)}@media only screen and (max-width: 576px){.error .error__title{font-size:68px}}.recent-posts{margin-top:80px}@media only screen and (max-width: 576px){.recent-posts{margin-top:60px}.recent-posts .row .col:last-child{margin-bottom:0}}.post_tag_list{font-family:"Shadows Into Light", cursive;font-size:16px;border-radius:4px;background-color:var(--post-tag-list-background-color);color:var(--article-highlighing-font);padding-right:2px;padding-left:2px}.post_category_list{font-family:"Shadows Into Light", cursive;font-size:16px;border-radius:4px;background-color:var(--post-category-list-background-color);color:var(--article-highlighing-font);padding-right:2px;padding-left:2px}#markdown-toc li{font-size:15px;line-height:18px}#markdown-toc li>ul{font-size:12px;line-height:30px}.post__title{font-family:"Gowun Batang",serif}.toc{font-family:"Tangerine", cursive;color:gold;background-color:#9acaa5;border-radius:0.5}.toc .nav__title{color:#fff;font-size:1em;background:gray}.toc .active a{background-color:greenyellow}.toc__menu{margin:0;padding:0;width:100%;list-style:none;font-size:0.5em}.page__content .archive__item-title{margin-top:0.5em;border-bottom:none}.sidebar__right{margin-bottom:0.5em;position:sticky;top:0;right:0;width:100%}.fire-para{border-radius:2px;border-left:4px solid #00bfa5;margin-top:30px;margin-bottom:50px;margin-left:20px;margin-right:30px}.fire-bar{background-color:rgba(0,191,165,0.1);border:0.5px solid #e9e6e6;font-weight:600;font-size:15.2px;padding-left:20px;padding-top:7px;padding-bottom:7px}.fa-fire{color:#00bfa5;margin-right:5px}.fa-hammer{color:#005bd1;margin-right:5px}.fa-question{color:#00bfa5;margin-right:5px}.fire-content{border-right:0.5px solid #e9e6e6;border-bottom:0.5px solid #e9e6e6;padding-left:13px;padding-top:13px;padding-bottom:10px;font-size:14.4px}.pen-para{border-radius:2px;border-left:4px solid #448aff;margin-top:30px;margin-bottom:50px;margin-left:20px;margin-right:30px}.pen-bar{background-color:rgba(68,138,255,0.1);border:0.5px solid #e9e6e6;font-weight:600;font-size:15.2px;padding-left:20px;padding-top:7px;padding-bottom:7px}.fa-pen{color:#005bd1;margin-right:5px}.pen-content{border-right:0.5px solid #e9e6e6;border-bottom:0.5px solid #e9e6e6;padding-left:13px;padding-top:13px;padding-bottom:10px;font-size:14.4px}.tag__head{margin-top:150px}@media only screen and (max-width: 1024px){.tag__head{margin:40px 0}}.tags__inner{margin-bottom:90px}@media only screen and (max-width: 576px){.tags__inner{margin-bottom:60px}}.tag__title{margin-bottom:32px;font-size:46px;font-weight:600;font-family:"Gowun Batang",serif}@media only screen and (max-width: 576px){.tag__title{font-size:32px}}.tag__list{display:flex;align-items:center;flex-wrap:wrap;padding-bottom:80px}.tag__list .tag__item{margin-right:12px;margin-bottom:12px}.tag__list .tag__item:last-child{margin-right:0}.tag__list .tag__link{display:block;padding:12px 16px;font-size:16px;font-weight:500;text-transform:capitalize;border-radius:8px;transition:none;background:var(--th-color)}.tag__list .tag__link:hover{color:var(--heading-font-color)}@media only screen and (max-width: 576px){.tag__list{padding-bottom:48px}.tag__list .tag__item{margin-right:8px;margin-bottom:8px}.tag__list .tag__link{font-size:14px}}.tag__info{position:relative;display:flex;align-items:center;justify-content:space-between;margin-bottom:4px}.tag__info::after{content:"";position:absolute;z-index:-1;display:block;width:100%;height:1px;background:var(--th-color);pointer-events:none}@media only screen and (max-width: 576px){.tag__info::after{content:none}}.tag__info-box{display:flex;align-items:center}.tag__counter{display:flex;flex-direction:column;align-items:center;padding:12px 24px;border-radius:8px;color:var(--heading-font-color);background:var(--pagination-item)}.tag__counter span{font-family:"Noto Sans","Apple SD Gothic Neo","맑은 고딕","Malgun Gothic","돋움",dotum,sans-serif;font-size:32px;font-weight:700;line-height:1}.tag__counter small{font-size:16px;font-weight:500}@media only screen and (max-width: 576px){.tag__counter{display:none}}.tag__name{padding:50px 20px 50px 20px;margin-bottom:0;font-size:36px;text-transform:capitalize;background-color:var(--background-color);font-family:"Gowun Batang",serif}.tag__name span{font-weight:400;color:var(--text-alt-color)}@media only screen and (max-width: 768px){.tag__name{font-size:32px}}@media only screen and (max-width: 576px){.tag__name{padding:32px 12px 32px 0;font-size:26px}}.top__link{padding-left:20px;font-size:18px;font-weight:500;text-decoration:underline;text-decoration-color:transparent;color:var(--link-color);transition:text-decoration 0.35s;background:var(--background-color)}.top__link:hover{text-decoration-color:var(--heading-font-color);color:var(--link-color-hover)}@media only screen and (max-width: 576px){.top__link{padding-left:0;font-size:16px}}.tag__box{display:flex;align-items:center;margin-top:120px}.tag_list{display:block;padding:12px 16px;font-size:16px;font-weight:500;text-transform:capitalize;border-radius:8px;transition:none;background:var(--th-color)}.tag_list:hover{color:indianred}.tag__box_recent_posts{display:flex;align-items:center}

  </style>
</head>

<body>

  

  <head>
  <link rel="preconnect" href="https://fonts.googleapis.com"> 
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display&display=swap" rel="stylesheet">
</head>
<!-- begin header -->
<header class="header" id="top">
  <div class="container">
    <div class="row">
      <div class="header__inner col col-12">

        <div class="logo">
          <a class="logo__link" href="/">
          
            <img class="logo__image" src="/images/code_museum_logo.png" alt="Code Museum">
          
          </a>
        </div>

        <nav class="main-nav">
          <div class="main-nav__box">
            <div class="nav__icon-close">
              <i class="ion ion-md-close"></i>
            </div>
            <div class="nav__title">Menu</div>
            <ul class="nav__list list-reset">
              <li class="nav__item">
                <a href="/about" class="nav__link">About</a>
              </li>
              <li class="nav__item">
                <a href="/categories" class="nav__link">Categories</a>
              </li>
              <li class="nav__item">
                <a href="/tags" class="nav__link">Tags</a>
              </li>
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
                  
                  <li class="nav__item">
                    <a href="/deviation/" class="nav__link">Deviation</a>
                  </li>
                  
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
                  
                  <li class="nav__item">
                    <a href="/gallery/" class="nav__link">Gallery</a>
                  </li>
                  
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
                
              
              
              <li class="nav__item nav__item-icon">
                <div class="toggle-theme">
                  <div class="toggle-moon" title="Enable dark mode"><i class="ion ion-ios-moon"></i></div>
                  <div class="toggle-sun" title="Enable light mode"><i class="ion ion-ios-sunny"></i></div>
                </div>
              </li>
              
            </ul>
          </div>
        </nav>

        <div class="nav-button">
          <i class="nav__icon icon__menu ion ion-md-menu"></i>
          <i class="nav__icon icon__search ion ion-md-search"></i>
        </div>

      </div>
    </div>
  </div>
</header>
<!-- end header -->

<!-- begin search -->
<div class="search">
  <div class="container">
    <div class="row">
      <div class="col col-12">
        <div class="search__box">
          <div class="search__group">
            <div class="search__close">
              <i class="ion ion-md-close"></i>
            </div>
            <label for="js-search-input" class="screen-reader-text">Search for Blog</label>
            <input type="text" id="js-search-input" class="search__text" autocomplete="off" placeholder="Type to search...">
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="container">
    <div class="row search-results-list" id="js-results-container"></div>
  </div>

</div>
<!-- end search -->

  <!-- begin content -->
  <main class="content" aria-label="Content">
    <!-- HTML elements for search -->
    <input type="text" id="search-input" placeholder="Search blog posts..">
    <ul id="results-container"></ul>

    <!-- or without installing anything -->
    <script src="https://unpkg.com/simple-jekyll-search@latest/dest/simple-jekyll-search.min.js"></script>
    <head>
  <link rel="preconnect" href="https://fonts.googleapis.com"> 
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin> 
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Kalam:wght@300;400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Gowun+Batang&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@300&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic+Coding&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Shadows+Into+Light&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Stylish&display=swap" rel="stylesheet">
</head>






<div class="post-head">
  <div class="container">
    <div class="row">
      
      

      
      <div class="col col-5 col-d-12">
        <div class="post-image">
          <img class="lazy" data-src="/images/kafka_logo.png" alt="Kafka Series [Part4]: 카프카의 데이터 저장">
        </div>
      </div>
      

      
      
      
      <div class="col col-7 col-d-12">
        <div class="post__info ">
            
              <div class="post__tags">
                
                  <a href="/Kafka" class="post__tag">#Kafka</a>
                
                
                  <a href="/data_engineering" class="post__tag">#data_engineering</a>
                
              </div>
            
 
          <h1 class="post__title">Kafka Series [Part4]: 카프카의 데이터 저장</h1>
  
          <div class="post__meta">
            <a href="/about/" class="post__author-image">
              <img class="lazy" data-src="/images/zepeto_me.jpeg" alt="Jay Kim">
            </a>

            <div class="post__meta-bottom">
              <a class="post__author" href="/about/">Jay Kim</a>
              <time class="post__date" datetime="2022-01-25T21:01:35+09:00">25 Jan 2022</time>
            </div>
          </div>
  
        </div>
      </div>
    </div>
  </div>
</div>

<!-- begin post -->
<div class="container_post animate">

  

    <div class="post__content">
      
<!--첫 번째 문단-->



  

  

  

  

  

  

  

  
  	
  	
  	
  	
  	

<!--두 번째 문단-->


  <div class="post_pagination">
    
      <a href="/kafka-series3" class="pagination__prev pagination__item"><i class="ion ion-ios-arrow-back"></i><span class="prev_next">이전 글  &nbsp</span>Kafka Series [Part3]: Fault tolerance in Kafka</a>
    
    
      <a href="/kafka-series5" class="pagination__next pagination__item"><span class="prev_next">다음 글  &nbsp</span>Kafka Series [Part5]: 실습을 통한 카프카 명령어와 옵션<i class="ion ion-ios-arrow-forward"></i></a>
    
  </div>



      <hr />
<p id="toc"><strong>Table of Contents</strong></p>
<ul id="markdown-toc">
  <li><a href="#카프카의-데이터-저장-방식" id="markdown-toc-카프카의-데이터-저장-방식">카프카의 데이터 저장 방식</a>    <ul>
      <li><a href="#partition" id="markdown-toc-partition">Partition</a></li>
      <li><a href="#segment" id="markdown-toc-segment">Segment</a></li>
    </ul>
  </li>
  <li><a href="#저장된-데이터의-포맷kafka-messages-are-just-bytes" id="markdown-toc-저장된-데이터의-포맷kafka-messages-are-just-bytes">저장된 데이터의 포맷(Kafka messages are just bytes)</a></li>
  <li><a href="#성능-향상을-위한-파티션-수" id="markdown-toc-성능-향상을-위한-파티션-수">성능 향상을 위한 파티션 수</a></li>
  <li><a href="#장애-복구를-위한-복제" id="markdown-toc-장애-복구를-위한-복제">장애 복구를 위한 복제</a></li>
  <li><a href="#로그-설정을-통해-효율적으로-보관하기log-retention" id="markdown-toc-로그-설정을-통해-효율적으로-보관하기log-retention">로그 설정을 통해 효율적으로 보관하기(Log Retention)</a>    <ul>
      <li><a href="#role-of-indexing-within-the-partition" id="markdown-toc-role-of-indexing-within-the-partition">Role of Indexing within the Partition</a></li>
      <li><a href="#rolling-segments" id="markdown-toc-rolling-segments">Rolling segments</a></li>
      <li><a href="#impact-of-increasingdecreasing-the-segment-size" id="markdown-toc-impact-of-increasingdecreasing-the-segment-size">Impact of increasing/decreasing the segment size</a></li>
      <li><a href="#log-retention---the-records-may-persist-longer-than-the-retention-time" id="markdown-toc-log-retention---the-records-may-persist-longer-than-the-retention-time">Log retention - The records may persist longer than the retention time</a></li>
      <li><a href="#conclusion" id="markdown-toc-conclusion">Conclusion</a></li>
    </ul>
  </li>
  <li><a href="#참고" id="markdown-toc-참고">참고</a></li>
</ul>

<hr />

<h1 id="카프카의-데이터-저장-방식">카프카의 데이터 저장 방식</h1>

<p>Kafka is typically referred to as a Distributed, Replicated Messaging Queue, which although technically true, usually leads to some confusion depending on your definition of a messaging queue. Instead, I prefer to call it a <strong>Distributed, Replicated Commit Log</strong>. This, I think, clearly represents what Kafka does, as all of us understand how <strong>logs</strong> are written to disk. And in this case, it is the <strong>messages pushed into Kafka that are stored to disk</strong>.</p>

<ul>
  <li>Kafka는 커밋 로그를 분산 복제하는 시스템</li>
  <li>여기서 로그는 우리가 디스크에 저장한 메세지를 의미</li>
  <li>(우리의 메세지를 로그로 표현하려고 하는 이유는 아마 메세지 안에 보통 데이터 뿐만 아니라 다른 메타데이터도 들어 있어서?)</li>
</ul>

<p>카프카의 데이터는 다음과 같은 구조로 이루어져 있다.</p>

<p><img src="/images/kafka_80.png" alt="" /></p>

<ul>
  <li>Topic: namespace처럼 논리적으로 구분하는 기준. 데이터를 구분하는 가장 큰 구분 기준</li>
  <li>Partition: 실제로 컨슈머가 담당하는 작업 단위(컨슈머 그룹내에서 파티션은 하나의 컨슈머에게만 할당 가능). 폴더로 구분</li>
  <li>Segment: 여러 메세지를 묶어놓은 하나의 파일. 파티션 한 개에 여러 개의 세그먼트가 저장되어 있음.</li>
  <li>Message: 우리가 실제로 보내는 데이터 + 생성된 타임스탬프 + 프로듀서 ID + …로 이루어져 있음</li>
</ul>

<h2 id="partition">Partition</h2>

<p>3개의 파티션을 가지는 토픽을 우선 한 개 만들어보자.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kafka-topics.sh <span class="nt">--create</span> <span class="nt">--topic</span> freblogg <span class="nt">--partitions</span> 3 <span class="nt">--replication-factor</span> 1 <span class="nt">--zookeeper</span> localhost:2181
</code></pre></div></div>

<p>파티션이 저장되는 위치로 이동해 토픽 이름으로 시작하는 파티션을 검색해보면 3개의 폴더가 보인다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ tree freblogg*
freblogg-0
|-- 00000000000000000000.index
|-- 00000000000000000000.log
|-- 00000000000000000000.timeindex
`-- leader-epoch-checkpoint
freblogg-1
|-- 00000000000000000000.index
|-- 00000000000000000000.log
|-- 00000000000000000000.timeindex
`-- leader-epoch-checkpoint
freblogg-2
|-- 00000000000000000000.index
|-- 00000000000000000000.log
|-- 00000000000000000000.timeindex
`-- leader-epoch-checkpoint
</code></pre></div></div>

<p>다음과 같은 명령어를 실행해 브로커로 메세지를 보내보자.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kafka-console-producer.sh --topic freblogg --broker-list localhost:9092
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ ls -lh freblogg*
freblogg-0:
total 20M
- freblogg 197121 10M Aug  5 08:26 00000000000000000000.index
- freblogg 197121   0 Aug  5 08:26 00000000000000000000.log
- freblogg 197121 10M Aug  5 08:26 00000000000000000000.timeindex
- freblogg 197121   0 Aug  5 08:26 leader-epoch-checkpoint

freblogg-1:
total 21M
- freblogg 197121 10M Aug  5 08:26 00000000000000000000.index
- freblogg 197121  68 Aug  5 10:15 00000000000000000000.log
- freblogg 197121 10M Aug  5 08:26 00000000000000000000.timeindex
- freblogg 197121  11 Aug  5 10:15 leader-epoch-checkpoint

freblogg-2:
total 21M
- freblogg 197121 10M Aug  5 08:26 00000000000000000000.index
- freblogg 197121  79 Aug  5 09:59 00000000000000000000.log
- freblogg 197121 10M Aug  5 08:26 00000000000000000000.timeindex
- freblogg 197121  11 Aug  5 09:59 leader-epoch-checkpoint
</code></pre></div></div>

<p>두 개의 메세지를 보냈다. 결과를 확인해보면 두 개의 파티션이 가지는 00000000000000000000.log 라는 세그먼트 파일의 용량이 증가했다. 파일을 열어보면 다음과 같은 내용이 적혀있다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ cat freblogg-2/*.log
@^@^BÂ°Â£Ã¦Ãƒ^@^K^XÃ¿Ã¿Ã¿Ã¿Ã¿Ã¿^@^@^@^A"^@^@^A^VHello World^@
</code></pre></div></div>

<p>브로커에 저장된 메세지는 바이트 형태로 저장되기 때문에 제대로 디코딩하지 않으면 이상하게 읽힌다. 하지만 Hello World라고 적힌 것을 보아 .log라는 파일에 우리가 보낸 메세지가 저장된다는 것을 알 수 있다.</p>

<p>메세지가 파티션에 하나씩 저장된 이유는 라운드 로빈 방식으로 메세지를 파티션에 할당하기 때문이다. 메세지 할당 방식은 카프카에서 제공하는 다른 방식을 사용할 수도 있고, 만약 메세지에 키를 설정해줬다면 키마다 파티션을 다르게 할당하도록 커스터마이징할 수도 있다.</p>

<p>세그먼트는 여러 메세지를 하나로 묶어 저장하고 있고, 각각의 메세지는 1씩 증가하는 offset을 가진다. 각 세그먼트는 자신이 가지고 있는 메세지의 가장 처음 오프셋을 이름으로 한다.</p>

<p><img src="/images/kafka_75.png" alt="" /></p>

<p>위와 같은 랜덤한 문자열들을 읽고 싶으면 Kafka 툴을 사용할 수 있다.</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kafka-run-class.bat kafka.tools.DumpLogSegments <span class="nt">--deep-iteration</span> <span class="nt">--print-data-log</span> <span class="nt">--files</span> logs<span class="se">\f</span>reblogg-2<span class="se">\0</span>0000000000000000000.log
</code></pre></div></div>

<p>This gives the output</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Dumping logs<span class="se">\f</span>reblogg-2<span class="se">\0</span>0000000000000000000.log
Starting offset: 0

offset: 0 position: 0 CreateTime: 1533443377944 isvalid: <span class="nb">true </span>keysize: <span class="nt">-1</span> valuesize: 11 producerId: <span class="nt">-1</span> headerKeys: <span class="o">[]</span> payload: Hello World

offset: 1 position: 79 CreateTime: 1533462689974 isvalid: <span class="nb">true </span>keysize: <span class="nt">-1</span> valuesize: 6 producerId: <span class="nt">-1</span> headerKeys: <span class="o">[]</span> payload: amazon
</code></pre></div></div>

<p>CreateTime과 같은 값은 컨슈머로 가져와서 사용할 수 있는 값이 아니다. 카프카 내부적으로 가지고 있는 메타데이터이다. 그렇기 때문에 데이터의 타임스탬프가 필요하다면, 데이터를 생성할 때 내부적으로 메세지에 명시적으로 담아서 브로커에 담아야 한다.</p>

<p>You can see that it stores information of the offset, time of creation, key and value sizes etc along with the actual message payload in the log file.</p>

<h2 id="segment">Segment</h2>

<p>위에서 봤던 <code class="language-plaintext highlighter-rouge">.log</code>, <code class="language-plaintext highlighter-rouge">.index</code>, <code class="language-plaintext highlighter-rouge">.timeindex</code>을 모두 세그먼트 파일이라고 한다. 세그먼트 파일을 하나로 하지 않고, 나누어 저장하는 이유는 여러가지가 있다.</p>

<p>그중에서도 데이터를 삭제할 때 이점이 있다는 것이다. Kafka는 구조적 특성으로 메세지마다 데이터를 삭제하는 것이 불가능하다. 유일하게 메세지를 삭제하는 방법은 바로 세그먼트 파일을 삭제하는 것이다. 보통 세그먼트 파일 삭제는 카프카 configuration을 통해 삭제하는 <strong>Retention policy</strong> 방법을 사용한다. (정책을 통해 주기적으로 삭제)</p>

<p>세그먼트 파일의 의미는 다음과 같다.</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">.index</code> file: This contains the mapping of message offset to its physical position in .log file.</li>
  <li><code class="language-plaintext highlighter-rouge">.log</code> file: This file contains the actual records and maintains the records up to a specific offset. The name of the file depicts the starting offset added to this file.</li>
  <li>.index file: This file has an index that maps a record offset to the byte offset of the record within the** .log **file. This mapping is used to read the record from any specific offset.</li>
  <li><code class="language-plaintext highlighter-rouge">.timeindex</code> file: This file contains the mapping of the timestamp to record offset, which internally maps to the byte offset of the record using the .index file. This helps in accessing the records from the specific timestamp.</li>
  <li><code class="language-plaintext highlighter-rouge">.snapshot</code> file: contains a snapshot of the producer state regarding sequence IDs used to avoid duplicate records. It is used when, after a new leader is elected, the preferred one comes back and needs such a state to become a leader again. This is only available for the active segment (log file)</li>
  <li><code class="language-plaintext highlighter-rouge">.leader-epoch-checkpoint</code>: It refers to the number of leaders previously assigned by the controller. The replicas use the leader epoch as a means of verifying the current leader. The leader-epoch-checkpoint file contains two columns: epochs and offsets. Each row is a checkpoint for the latest recorded leader epoch and the leader’s latest offset upon becoming leader</li>
</ul>

<p>An index file for the log file I’ve showed in the ‘Quick detour’ above would look something like this:</p>

<p><img src="/images/kafka_76.png" alt="" /></p>

<p>If you need to read the message at offset 1, you first search for it in the index file and figure out that the message is in position 79. Then you directly go to position 79 in the log file and start reading. This makes it quite effective as you can use binary search to quickly get to the correct offset in the already sorted index file.</p>

<p><img src="/images/kafka_81.png" alt="" /></p>

<h1 id="저장된-데이터의-포맷kafka-messages-are-just-bytes">저장된 데이터의 포맷(Kafka messages are just bytes)</h1>

<p><strong>Kafka messages are just bytes</strong>. Kafka messages are organized into topics. Each message is a key/value, but that is all that Kafka requires. Both key and value are just bytes when they are stored in Kafka. This makes Kafka applicable to a <strong>wide range of use cases</strong>, but it also means that developers have the <strong>responsibility of deciding how to serialize the data.</strong></p>

<p>There are various <strong>serialization formats</strong> with common ones including:</p>

<ul>
  <li>JSON</li>
  <li>Avro</li>
  <li>Protobuf</li>
  <li>String delimited (e.g., CSV</li>
</ul>

<p>There are advantages and disadvantages to each of these—well, except delimited, in which case it’s only disadvantages 😉</p>

<p>Choosing a serialization format</p>

<ul>
  <li><strong>Schema</strong>: A lot of the time your data will have a schema to it. You may not like the fact, but it’s your responsibility as a developer to preserve and propagate this schema. The schema provides the <strong>contract between your services</strong>. Some message formats (such as Avro and Protobuf) have strong schema support, whilst others have lesser support (JSON) or none at all (delimited string).</li>
  <li><strong>Ecosystem compatibility</strong>: Avro, Protobuf, and JSON are first-class citizens in the Confluent Platform, with native support from the  Confluent Schema Registry, Kafka Connect, ksqlDB, and more.</li>
  <li><strong>Message size</strong>: Whilst JSON is plain text and relies on any compression configured in Kafka itself, Avro and Protobuf are both binary formats and thus provide smaller message sizes.</li>
  <li><strong>Language support</strong>: For example, support for Avro is strong in the Java space, whilst if you’re using Go, chances are you’ll be expecting to use Protobuf.</li>
</ul>

<p>데이터를 브로커에 저장할 때는 전송된 데이터의 포맷과는 상관없이 원하는 포맷으로 브로커에 저장할 수 있다. 예를 들어 프로듀서가 JSON으로 보냈다고 하더라도 브로커에 저장할 때 포맷은 Avro, Parquet, String 뭘 하든 상관없다. 다만 중요한 것은 Serializer로 Avro를 선택했다면, Deserializer도 반드시 Avro를 선택해야 한다. 그러고 나면 컨슈머에서 전달 받는 데이터의 포맷은 자연스럽게 다시 JSON 형태를 얻게 된다.</p>

<p><img src="/images/kafka_78.png" alt="" /></p>

<p>Remember, Kafka messages are just pairs of key/value bytes, and you need to specify the converter for both keys and value, using the <code class="language-plaintext highlighter-rouge">key.converter</code> and <code class="language-plaintext highlighter-rouge">value.converter</code> configuration setting. In some situations, you may use different converters for the key and the value.</p>

<p>Here’s an example of using the String converter. Since it’s just a string, there’s no schema to the data, and thus it’s not so useful to use for the value:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s2">"key.converter"</span>: <span class="s2">"org.apache.kafka.connect.storage.StringConverter"</span>,
</code></pre></div></div>

<p>Some converters have additional configuration. For Avro, you need to specify the Schema Registry. For JSON, you need to specify if you want Kafka Connect to embed the schema in the JSON itself. When you specify converter-specific configurations, always use the <code class="language-plaintext highlighter-rouge">key.converter</code>. or <code class="language-plaintext highlighter-rouge">value.converter</code>. prefix. For example, to use Avro for the message payload, you’d specify the following:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"value.converter": "io.confluent.connect.avro.AvroConverter",
"value.converter.schema.registry.url": "http://schema-registry:8081",
</code></pre></div></div>

<p>Common converters include:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Avro</span>
io.confluent.connect.avro.AvroConverter

<span class="c"># Protobuf</span>
io.confluent.connect.protobuf.ProtobufConverter

<span class="c"># String</span>
org.apache.kafka.connect.storage.StringConverter

<span class="c"># JSON</span>
org.apache.kafka.connect.json.JsonConverter

<span class="c"># JSON schema</span>
io.confluent.connect.json.JsonSchemaConverter

<span class="c"># ByteArray</span>
org.apache.kafka.connect.converters.ByteArrayConverter
</code></pre></div></div>

<p>JSON의 경우 스키마가 설정을 안하는 것이 디폴트다. 하지만 스키마를 고정하고 싶은 경우 두 가지 방법을 사용할 수 있다.</p>

<ol>
  <li>JSON schema <code class="language-plaintext highlighter-rouge">io.confluent.connect.json.JsonSchemaConverter</code>를 쓴다 (with 스키마 레지스트리)
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"value.converter": "io.confluent.connect.json.JsonSchemaConverter",
"value.converter.schema.registry.url": "http://schema-registry:8081",
</code></pre></div>    </div>
  </li>
  <li>비효율적이지만 매번 메시지에 스키마를 담아서 전송/저장한다.
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>value.converter=org.apache.kafka.connect.json.JsonConverter
value.converter.schemas.enable=true
</code></pre></div>    </div>
  </li>
</ol>

<p>2번 방식을 사용하면 메세지가 다음과 같이 schema 부분과, payload 부분이 함께 저장된다.</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
  </span><span class="nl">"schema"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"struct"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"int64"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"optional"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"registertime"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"optional"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"userid"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"optional"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"regionid"</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"optional"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"field"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gender"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"optional"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
    </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ksql.users"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"payload"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hello World"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>이렇게 하면 메세지 사이즈가 커지기 때문에 비효율적이다. 그래서 스키마가 필요한 경우에는 스키마 레지스트리를 사용하는 것이 효율적이다.</p>

<p>만약 컨버터에 JSON serializer를 사용했고 스키마를 따로 설정하지 않을거라면,</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>value.converter=org.apache.kafka.connect.json.JsonConverter
value.converter.schemas.enable=false
</code></pre></div></div>

<p>이렇게 schema를 찾을 필요 없다고 명시해주자. (디폴트가 false인데 왜 해줘야하는거지..?)</p>

<p>아래 표는 serializer와 deserializer의 싱크를 어떻게 맞춰야 에러가 안나는지 알려준다. 기본적으로 serializer는 메세지나 상황에 맞게 원하는 것을 선택하고, deserializer는 serializer와 같은 포맷을 사용하도록 하면 된다.</p>

<p><img src="/images/kafka_79.png" alt="" /></p>

<h1 id="성능-향상을-위한-파티션-수">성능 향상을 위한 파티션 수</h1>

<p>To guarantee the order of reading messages from a partition, Kafka restricts to having only one consumer (from a consumer group) per partition. So, if a partition gets messages a,f and k, the consumer will also read them in the order a,f and k. This is an important thing to make a note of as the order of message consumption is not guaranteed at a topic level when you have multiple partitions.</p>

<p>파티션 내에서는 메세지의 순서가 지켜진다. 그래서 토픽을 이루는 파티션이 1개라면 메세지의 순서를 걱정할 필요가 없다. 하지만 파티션의 개수를 2개 이상으로 하면 메세지의 순서가 보장되지 않는다.</p>

<p>병렬 처리를 통해 성능을 높이고자 할 때, 파티션의 개수와 컨슈머의 개수를 늘려준다.</p>

<ul>
  <li>파티션의 수 &gt;= 컨슈머 수</li>
  <li>병렬 정도 = MIN(파티션의 수, 컨슈머 수)</li>
  <li>파티션의 개수는 늘릴수만 있고 줄일 수는 없음</li>
</ul>

<h1 id="장애-복구를-위한-복제">장애 복구를 위한 복제</h1>
<p>복제는 특정 브로커 서버에 장애가 났을 경우를 대비하기 위한 용도다. 만약 브로커가 1대라면 복제는 아무 의미가 없다. 복제는 브로커의 개수만큼 설정하면 된다. 더 크게 더 적게 해도 되지만, 같게 하는 것이 제일 합당한 선택이다.</p>

<p>복제수는 토픽마다 다르게 설정할 수 있다. 복제 수는 늘리는 만큼 성능이 약간 떨어진다. 그래서 토픽의 중요도에 따라 다르게 설정하는 것이 좋다.</p>

<p>복제에 관해 이해하려면 리더/팔로워, 커밋과 같은 것들을 배워야 한다. 컨슈머는 리더 파티션만 가져갈 수 있다. 복제는 리더가 장애가 났을 경우를 대비하기 위한 용도다.</p>

<p>Say for the freblogg topic that we’ve been using so far, we’ve given the replication factor as 2. The resulting distribution of its three partitions will look something like this.</p>

<p><img src="/images/kafka_77.png" alt="" /></p>

<p>Even when you have a replicated partition on a different broker, Kafka wouldn’t let you read from it because in each replicated set of partitions, there is a LEADER and the rest of them are just mere FOLLOWERS serving as backup. The followers keep on syncing the data from the leader partition periodically, waiting for their chance to shine. When the leader goes down, one of the in-sync follower partitions is chosen as the new leader and now you can consume data from this partition.</p>

<p>A Leader and a Follower of a single partition are never in a single broker. It should be quite obvious why that is so.</p>

<h1 id="로그-설정을-통해-효율적으로-보관하기log-retention">로그 설정을 통해 효율적으로 보관하기(Log Retention)</h1>

<p>Apache Kafka is a commit-log system. The records are appended at the end of each Partition, and each Partition is also split into segments. Segments help delete older records through Compaction, improve performance, and much more.</p>

<p>(아파치 카프카는 커밋-로그 시스템이다. 레코드는 파티션의 끝에 append되고, 파티션의 세그먼트 파일로 분리되어 저장된다. 세그먼트 파일을 통해 카프카는 오래된 레코드를 관리할 수 있다.)</p>

<p>Kafka allows us to optimize the log-related configurations, we can control the rolling of segments, log retention, etc. <strong>These configurations determine how long the record will be stored</strong> and we’ll see how it impacts the broker’s performance, especially when the cleanup policy is set to Delete.</p>

<p>(카프카에는 로그 저장/삭제와 관련된 설정을 통해 로그를 얼마나 오랫동안 저장하고 있을지 설정할 수 있다)</p>

<p>For better performance and maintainability, multiple segments get created, and rather than reading from one huge Partition, Consumers can now read faster from a smaller segment file. A directory with the partition name gets created and maintains all the segments for that partition as various files.</p>

<p><img src="/images/kafka_81.png" alt="" /></p>

<p>The active segment is the only file available for reading and writing while consumers can use other log segments (non-active) to read data. When the active segment becomes full (configured by <code class="language-plaintext highlighter-rouge">log.segment.bytes</code>, default 1 GB) or the configured time (<code class="language-plaintext highlighter-rouge">log.roll.hours</code> or <code class="language-plaintext highlighter-rouge">log.roll.ms</code>, default 7 days) passes, the segment gets rolled. This means that the <strong>active segment gets closed and re-opens with read-only mode and a new segment file</strong> (active segment) will be created in read-write mode.</p>

<p>(세그먼트 파일은 보통 읽기만 가능하고, active인 세그먼트 파일에만 쓰는 것도 가능하다. active 세그먼트 파일은 log.segment.bytes 의 크기를 초과하거나, log.roll.hours 시간을 초과하는 경우 활성화가 종료되고, 새로운 active 세그먼트 파일을 생성한다.)</p>

<h2 id="role-of-indexing-within-the-partition">Role of Indexing within the Partition</h2>
<p>Indexing helps consumers to read data starting from any specific offset or using any time range. As mentioned previously, the <code class="language-plaintext highlighter-rouge">.index</code> file contains an index that maps the logical offset to the byte offset of the record within the <code class="language-plaintext highlighter-rouge">.log</code> file. <strong>You might expect that this mapping is available for each record, but it doesn’t work this way.</strong></p>

<p><strong>How these entries are added inside the index file is defined by the <code class="language-plaintext highlighter-rouge">log.index.interval.bytes</code> parameter, which is 4096 bytes by default.</strong> This means that after every 4096 bytes added to the <code class="language-plaintext highlighter-rouge">.log</code> file, an entry gets added to the <code class="language-plaintext highlighter-rouge">.index</code> file. Suppose the producer is sending records of 100 bytes each to a Kafka topic. In this case, a new index entry will be added to the <code class="language-plaintext highlighter-rouge">.index</code> file after every 41 records (41*100 = 4100 bytes) appended to the log file.</p>

<p>(<code class="language-plaintext highlighter-rouge">log.index.interval.bytes</code> 크기만큼의 레코드가 보내진 후 다음 레코드의 메모리 주소가 인덱싱 된다)<br />
(컨슈머는 먼저 <code class="language-plaintext highlighter-rouge">.index</code> 파일의 인덱싱 정보를 통해 읽어들일 메모리의 처음 위치를 선택한다)</p>

<p><img src="/images/kafka_82.png" alt="" /></p>

<p>If a consumer wants to read starting at a specific offset, a search for the record is made as follows:</p>

<ul>
  <li>Search for the <code class="language-plaintext highlighter-rouge">.index</code> file based on its name. For e.g. If the offset is 1191, the index file will be searched whose name has a value less than 1191. The naming convention for the index file is the same as that of the log file</li>
  <li>Search for an entry in the <code class="language-plaintext highlighter-rouge">.index</code> file where the requested offset falls.</li>
  <li>Use the mapped byte offset to access the <code class="language-plaintext highlighter-rouge">.log</code> file and start consuming the records from that byte offset.</li>
</ul>

<p>As we mentioned, consumers may also want to read the records from a specific timestamp. This is where the <code class="language-plaintext highlighter-rouge">.timeindex</code> file comes into the picture. It maintains a timestamp and offset mapping (which maps to the corresponding entry in the <code class="language-plaintext highlighter-rouge">.index</code> file), which maps to the actual byte offset in the <code class="language-plaintext highlighter-rouge">.log</code> file. (특정 타임스탬프로 레코드 읽는 방법: <code class="language-plaintext highlighter-rouge">.timeindex</code> -&gt; <code class="language-plaintext highlighter-rouge">.index</code> -&gt; <code class="language-plaintext highlighter-rouge">.log</code>)</p>

<p><img src="/images/kafka_83.png" alt="" /></p>

<h2 id="rolling-segments">Rolling segments</h2>
<p>As discussed in the above sections, the active segment gets rolled once any of these conditions are met-</p>

<ol>
  <li>Maximum segment size - configured by <code class="language-plaintext highlighter-rouge">log.segment.bytes</code>, defaults to 1 Gb</li>
  <li>Rolling segment time - configured by <code class="language-plaintext highlighter-rouge">log.roll.ms</code> or <code class="language-plaintext highlighter-rouge">log.roll.hours</code>, defaults to 7 days</li>
  <li>Index/timeindex is full - The index and timeindex share the same maximum size, which is defined by the <code class="language-plaintext highlighter-rouge">log.index.size.max.bytes</code>, defaults to 10 MB</li>
</ol>

<p>(보통 1번 크기를 늘리면, 3번 크기도 늘려야 한다)</p>

<h2 id="impact-of-increasingdecreasing-the-segment-size">Impact of increasing/decreasing the segment size</h2>
<p>Generally you don’t want to increase/decrease the <code class="language-plaintext highlighter-rouge">log.segment.bytes</code> and keep it as default. But let’s discuss the impact of changing this value so that you can make an informed decision if there’s a need.</p>

<h2 id="log-retention---the-records-may-persist-longer-than-the-retention-time">Log retention - The records may persist longer than the retention time</h2>
<p>Kafka, with its feature of retaining the log for a longer duration rather than deleting it like traditional messaging queues once consumed, provides many added advantages. Multiple consumers can read the same data, apart from reading the data it can also be sent to data warehouses for further analytics.</p>

<p>How long is the data retained in Kafka? This is configurable using the maximum number of bytes to retain by using the <code class="language-plaintext highlighter-rouge">log.retention.bytes</code> parameter. If you want to set a retention period, you can use the <code class="language-plaintext highlighter-rouge">log.retention.ms</code>, <code class="language-plaintext highlighter-rouge">log.retention.minutes</code>, or <code class="language-plaintext highlighter-rouge">log.retention.hours</code> (7 days by default) parameters.</p>

<p>The following things may impact when the records get deleted-</p>

<ul>
  <li>If the producer is slow and the maximum size of 16 Kb is not reached within 10 minutes, older records won’t be deleted. In this case, the log retention would be higher than 10 mins.</li>
  <li>If the active segment is filled quickly, it will be closed but only get deleted once the last inserted record persists for 10 mins. So in this case as well, the latest inserted record would be persisted for more than 10 mins. - Suppose the segment is getting filled in 7 mins and getting closed, the last inserted record will stay for 10 mins so the actual retention time for the first record inserted into the segment would be 17 mins.</li>
  <li>The log can be persisted for an even longer duration than the last added record in the segment. How? Because the thread which gets executed and checks which log segments need to be deleted runs every 5 mins. This is configurable using log.retention.check.interval.ms configurations. - Depending on the last added record to the segment, this cleanup thread can miss the 10 min retention deadline. So in our example above instead of persisting the segment for 17 mins, it could be persisted for 22 mins.</li>
  <li>Do you think that this would be the maximum time the record is persisted in Kafka? No, the cleaner thread checks and just marks the segment to be deleted. The log.segment.delete.delay.ms broker parameter defines when the file will actually be removed from the file system when it’s marked as “deleted” (default, 1 min) - Going back to our example the log is still available even after 23 mins, which is way longer than the retention time of 10 mins.</li>
</ul>

<p>So The usual retention limits are set by using <code class="language-plaintext highlighter-rouge">log.retention.ms</code> defines a kind of minimum time the record will be persisted in the file system.</p>

<p>Consumers get records from closed segments but not from deleted ones, even if they are just marked as “deleted” but not actually removed from the file system.</p>

<h2 id="conclusion">Conclusion</h2>

<p><img src="/images/kafka_84.png" alt="" /></p>

<h1 id="참고">참고</h1>
<ul>
  <li><a href="https://docs.cloudera.com/csa/1.2.0/flink-sql-table-api/topics/csa-kafka-sql-datatypes.html" target="_blank">Data types for Kafka connector</a></li>
  <li><a href="https://www.confluent.io/blog/kafka-connect-deep-dive-converters-serialization-explained/" target="_blank">Kafka Connect Deep Dive – Converters and Serialization Explained</a></li>
  <li><a href="https://dol9.tistory.com/274" target="_blank">dol9, Kafka 스키마 관리, Schema Registry</a></li>
  <li><a href="https://www.freblogg.com/kafka-storage-internals" target="_blank">A Practical Introduction to Kafka Storage Internals</a></li>
  <li><a href="https://www.freecodecamp.org/news/what-makes-apache-kafka-so-fast-a8d4f94ab145/" target="_blank">Here’s what makes Apache Kafka so fast</a></li>
  <li><a href="https://stackoverflow.com/questions/40369238/which-directory-does-apache-kafka-store-the-data-in-broker-nodes#" target="_blank">stackoverflow: Which directory does apache kafka store the data in broker nodes</a></li>
  <li><a href="https://medium.com/@abhisheksharma_59226/how-kafka-stores-data-37ee611c89a2" target="_blank">Abhishek Sharma, How kafka stores data</a></li>
  <li><a href="https://rohithsankepally.github.io/Kafka-Storage-Internals/" target="_blank">Rohith Sankepally:g Deep Dive Into Apache Kafka. Storage Internals</a></li>
  <li><a href="https://towardsdatascience.com/log-compacted-topics-in-apache-kafka-b1aa1e4665a7" target="_blank">towardsdatascience, Log Compacted Topics in Apache Kafka</a></li>
  <li><a href="https://www.conduktor.io/understanding-kafkas-internal-storage-and-log-retention" target="_blank">conduktor, Understanding Kafka’s Internal Storage and Log Retention</a></li>
  <li><a href="https://dev.to/heroku/what-is-a-commit-log-and-why-should-you-care-pib" target="_blank">What is a commit log and why should you care?</a></li>
</ul>

    </div>
    <div class="post__tags_list">
      <div class="container">
        <h3 class="point_heading">All Tag</h3>
        <ul class="tag__list list-reset">
          
            
              
              <li class="tag__item"><a href="/API" class="post_tag_list">#API</a></li>
            
          
            
              
              <li class="tag__item"><a href="/AWS" class="post_tag_list">#AWS</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Airflow" class="post_tag_list">#Airflow</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Blockchain_basic" class="post_tag_list">#Blockchain_basic</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Coding_Test" class="post_tag_list">#Coding_Test</a></li>
            
          
            
              
              <li class="tag__item"><a href="/DE" class="post_tag_list">#DE</a></li>
            
          
            
              
              <li class="tag__item"><a href="/DL_theory" class="post_tag_list">#DL_theory</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Django" class="post_tag_list">#Django</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Docker" class="post_tag_list">#Docker</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Elastic" class="post_tag_list">#Elastic</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Finance" class="post_tag_list">#Finance</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Flink" class="post_tag_list">#Flink</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Git" class="post_tag_list">#Git</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Hadoop" class="post_tag_list">#Hadoop</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Java" class="post_tag_list">#Java</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Javascript" class="post_tag_list">#Javascript</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Jenkins" class="post_tag_list">#Jenkins</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Kafka" class="post_tag_list">#Kafka</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Kubernetes" class="post_tag_list">#Kubernetes</a></li>
            
          
            
              
              <li class="tag__item"><a href="/MLOps" class="post_tag_list">#MLOps</a></li>
            
          
            
              
              <li class="tag__item"><a href="/MongoDB" class="post_tag_list">#MongoDB</a></li>
            
          
            
              
              <li class="tag__item"><a href="/MySQL" class="post_tag_list">#MySQL</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Network" class="post_tag_list">#Network</a></li>
            
          
            
              
              <li class="tag__item"><a href="/OS" class="post_tag_list">#OS</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Pandas" class="post_tag_list">#Pandas</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Python" class="post_tag_list">#Python</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Pytorch" class="post_tag_list">#Pytorch</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Scikit_learn" class="post_tag_list">#Scikit_learn</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Spark" class="post_tag_list">#Spark</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Spring" class="post_tag_list">#Spring</a></li>
            
          
            
              
              <li class="tag__item"><a href="/TDD" class="post_tag_list">#TDD</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Terraform" class="post_tag_list">#Terraform</a></li>
            
          
            
              
              <li class="tag__item"><a href="/etc" class="post_tag_list">#etc</a></li>
            
          
            
              
              <li class="tag__item"><a href="/tech_interview" class="post_tag_list">#tech_interview</a></li>
            
          
            
          
        </ul>
        <h3 class="point_heading">All Category</h3>
        <ul class="tag__list list-reset">
          
            
              
              <li class="tag__item"><a href="/AI" class="post_category_list">#AI</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Blockchain" class="post_category_list">#Blockchain</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Cloud" class="post_category_list">#Cloud</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Development_knowledge" class="post_category_list">#Development_knowledge</a></li>
            
          
            
              
              <li class="tag__item"><a href="/Economics" class="post_category_list">#Economics</a></li>
            
          
            
              
              <li class="tag__item"><a href="/computer_science" class="post_category_list">#computer_science</a></li>
            
          
            
              
              <li class="tag__item"><a href="/data_analytics" class="post_category_list">#data_analytics</a></li>
            
          
            
              
              <li class="tag__item"><a href="/data_engineering" class="post_category_list">#data_engineering</a></li>
            
          
            
              
              <li class="tag__item"><a href="/devops" class="post_category_list">#devops</a></li>
            
          
            
              
              <li class="tag__item"><a href="/machine_learning" class="post_category_list">#machine_learning</a></li>
            
          
            
              
              <li class="tag__item"><a href="/programming_language" class="post_category_list">#programming_language</a></li>
            
          
            
              
              <li class="tag__item"><a href="/web_development" class="post_category_list">#web_development</a></li>
            
          
            
          
        </ul>
        <section class="page__content" itemprop="text">
          
          
        </section>
      </div>
    </div>
</div>











<!-- share -->
<div class="container">
  <div class="post__share">
    <ul class="share__list list-reset">
      <li class="share__item">
        <a class="share__link share__twitter"
          href="https://twitter.com/intent/tweet?text=Kafka%20Series%20[Part4]:%20%EC%B9%B4%ED%94%84%EC%B9%B4%EC%9D%98%20%EB%8D%B0%EC%9D%B4%ED%84%B0%20%EC%A0%80%EC%9E%A5&url=http://localhost:4000/kafka-series4"
          onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
          title="Share on Twitter" rel="nofollow"><i class="ion ion-logo-twitter"></i></a>
      </li>
      <li class="share__item">
        <a class="share__link share__facebook" href="https://www.facebook.com/sharer/sharer.php?u=http://localhost:4000/kafka-series4"
          onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
          title="Share on Facebook" rel="nofollow"><i class="ion ion-logo-facebook"></i></a>
      </li>
      <li class="share__item">
        <a class="share__link share__pinterest" href="http://pinterest.com/pin/create/button/?url=http://localhost:4000/kafka-series4&amp;media=http://localhost:4000/images/kafka_78.png&amp;description=Kafka%20Series%20[Part4]:%20%EC%B9%B4%ED%94%84%EC%B9%B4%EC%9D%98%20%EB%8D%B0%EC%9D%B4%ED%84%B0%20%EC%A0%80%EC%9E%A5"
        onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;" title="Share on Pinterest"
        rel="nofollow"><i class="ion ion-logo-pinterest"></i></a>
      </li>
      <li class="share__item">
        <a class="share__link share__linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http://localhost:4000/kafka-series4&title=Kafka%20Series%20[Part4]:%20%EC%B9%B4%ED%94%84%EC%B9%B4%EC%9D%98%20%EB%8D%B0%EC%9D%B4%ED%84%B0%20%EC%A0%80%EC%9E%A5&summary=&source=Code%20Museum"
        onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn" rel="nofollow"><i class="ion ion-logo-linkedin"></i></a>
      </li>
    </ul>
  </div>
  
<!--첫 번째 문단-->



  

  

  

  

  

  

  

  
  	
  	
  	
  	
  	

<!--두 번째 문단-->


  <div class="post_pagination">
    
      <a href="/kafka-series3" class="pagination__prev pagination__item"><i class="ion ion-ios-arrow-back"></i><span class="prev_next">이전 글  &nbsp</span>Kafka Series [Part3]: Fault tolerance in Kafka</a>
    
    
      <a href="/kafka-series5" class="pagination__next pagination__item"><span class="prev_next">다음 글  &nbsp</span>Kafka Series [Part5]: 실습을 통한 카프카 명령어와 옵션<i class="ion ion-ios-arrow-forward"></i></a>
    
  </div>



</div>



<!-- end post -->








<!-- begin related posts -->
<div class="container">
  <section class="related-posts is-related animate">
    <div class="row">
      <div class="col col-12">
        <div class="container__inner">
          <div class="section__info">
            <div class="section__head">
              <h2 class="section__title">You may also like</h2>
              <a class="section__link" href="/blog">
                
                
                  
                    <a href="/data_engineering" class="section__link related-tag">See all<span> data_engineering</span></a>
                  
                
              
              </a>
            </div>
          </div>
          <div class="row">

          
            
            
      
            
      
            

              <div class="article col col-4 col-d-6 col-t-12">
  <div class="article__inner">

    <div class="article__head">
      <time class="article__date" datetime="2022-09-07T21:01:35+09:00">07 Sep 2022</time>

      

      
      <a class="article__image" href="/mlops-series6">
        <img class="lazy" data-src="/images/mlops_logo.png" alt="MLOps Series [Part6]: Testing Code, Data and Model">
      </a>
      

    </div>

    <div class="article__content">

      <h2 class="article__title">
        <a href="/mlops-series6">MLOps Series [Part6]: Testing Code, Data and Model</a>
      </h2>

      

    </div>
  </div>
</div>

            
                
              
            
            
            
      
            
      
            

              <div class="article col col-4 col-d-6 col-t-12">
  <div class="article__inner">

    <div class="article__head">
      <time class="article__date" datetime="2022-09-06T21:01:35+09:00">06 Sep 2022</time>

      

      
      <a class="article__image" href="/mlops-series5">
        <img class="lazy" data-src="/images/mlops_logo.png" alt="MLOps Series [Part5]: Weights and Biases">
      </a>
      

    </div>

    <div class="article__content">

      <h2 class="article__title">
        <a href="/mlops-series5">MLOps Series [Part5]: Weights and Biases</a>
      </h2>

      

    </div>
  </div>
</div>

            
                
              
            
            
            
      
            
      
            

              <div class="article col col-4 col-d-6 col-t-12">
  <div class="article__inner">

    <div class="article__head">
      <time class="article__date" datetime="2022-09-06T21:01:35+09:00">06 Sep 2022</time>

      

      
      <a class="article__image" href="/mlops-series4">
        <img class="lazy" data-src="/images/mlops_logo.png" alt="MLOps Series [Part4]: MLflow">
      </a>
      

    </div>

    <div class="article__content">

      <h2 class="article__title">
        <a href="/mlops-series4">MLOps Series [Part4]: MLflow</a>
      </h2>

      

    </div>
  </div>
</div>

            
                
                  
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
<!-- end related posts -->


  <div class="container">
    <div class="row">
      <div class="col col-12">
        <!-- begin comments -->
<div class="show-comments">
  <button class="button disqus-button" id="show-comments-button" onclick="disqus();return false;">Show Comments</button>
</div>

<div id="disqus_thread" class="post__comments">
  <div id="disqus_empty"></div>
</div>

<script>
  var disqus_loaded = false;
  var disqus_shortname = 'Jay';
  var disqus_container = document.getElementById("disqus_thread");
  function disqus() {
    if (!disqus_loaded) {
      disqus_loaded = true;
      var e = document.createElement("script");
      e.type = "text/javascript";
      e.async = true;
      e.src = "//" + disqus_shortname + ".disqus.com/embed.js";
      (document.getElementsByTagName("head")[0] ||
        document.getElementsByTagName("body")[0])
        .appendChild(e);
      // Hide the button after opening
      document.getElementById("show-comments-button").style.display = "none";
      // Show disqus comments
      disqus_container.classList.add("is-open");
    }
  }
</script>

<noscript>Please enable JavaScript to view the
  <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
</noscript>
<!-- end comments --> 
      </div>
    </div>
  </div>

  </main>
  <!-- end content -->

  <!-- begin footer -->
<footer class="footer">

  <div class="footer__inner">
    <div class="container">
      <div class="row">

        <div class="col col-5 col-d-12">
          <div class="footer__author">
            <div class="footer__author-avatar">
              <img class="lazy" data-src="/images/zepeto_me.jpeg" alt="Jay Kim">
            </div>
            <h3 class="footer__author-name">Jay Kim</h3>
            <p class="footer__author-bio">Data Engineer</p>
            
            <div class="social">
              <ul class="social__list list-reset">
                
                <li class="social__item">
                  <a class="social__link" href="https://github.com/kimziont" target="_blank" rel="noopener"
                    aria-label=" link"><i class="ion ion-logo-github"></i></a>
                </li>
                
                <li class="social__item">
                  <a class="social__link" href="https://linkedin.com" target="_blank" rel="noopener"
                    aria-label=" link"><i class="ion ion-logo-linkedin"></i></a>
                </li>
                
                <li class="social__item">
                  <a class="social__link" href="https://facebook.com" target="_blank" rel="noopener"
                    aria-label=" link"><i class="ion ion-logo-facebook"></i></a>
                </li>
                
                <li class="social__item">
                  <a class="social__link" href="https://instagram.com" target="_blank" rel="noopener"
                    aria-label=" link"><i class="ion ion-logo-instagram"></i></a>
                </li>
                
                <li class="social__item">
                  <a class="social__link" href="https://youtube.com" target="_blank" rel="noopener"
                    aria-label=" link"><i class="ion ion-logo-youtube"></i></a>
                </li>
                
              </ul>
            </div>
            
          </div>
        </div>

        
        <div class="col col-6 push-1 col-d-12 push-d-0">
          <div class="footer__gallery">
            <h3 class="footer__gallery-title">Gallery</h3>
            
            <div class="gallery-footer">
              <div class="gallery" style="grid-template-columns: repeat(3, auto);">
                
                <div class="gallery__image">
                  <img src="/images/100.jpg" alt="Rest" loading="lazy">
                </div>
                
                <div class="gallery__image">
                  <img src="/images/101.jpg" alt="Lifestyle" loading="lazy">
                </div>
                
                <div class="gallery__image">
                  <img src="/images/102.jpg" alt="Hobby" loading="lazy">
                </div>
                
                <div class="gallery__image">
                  <img src="/images/103.jpg" alt="Notes" loading="lazy">
                </div>
                
                <div class="gallery__image">
                  <img src="/images/104.jpg" alt="Rest" loading="lazy">
                </div>
                
                <div class="gallery__image">
                  <img src="/images/105.jpg" alt="Hobby" loading="lazy">
                </div>
                
                <div class="gallery__image">
                  <img src="/images/106.jpg" alt="Fashion" loading="lazy">
                </div>
                
                <div class="gallery__image">
                  <img src="/images/107.jpg" alt="Notes" loading="lazy">
                </div>
                
                <div class="gallery__image">
                  <img src="/images/108.jpg" alt="Rest" loading="lazy">
                </div>
                
              </div>
            </div>
            
          </div>
        </div>
        

      </div>
    </div>
  </div>

  <div class="footer__info">
    <div class="container">
      <div class="row">
        <div class="col col-12">
          <div class="footer__info-box">
            <div class="copyright">2023 &copy; <a href="/">Code Museum</a>. Crafted & Designed by <a href="https://jekyllthemes.io/developers/artem-sheludko">Artem Sheludko</a>.</div>
            <div class="top" title="Top"><i class="ion ion-ios-arrow-up"></i></div>
          </div>
        </div>
      </div>
    </div>
  </div>

</footer>
<!-- end footer -->

  <script src="/js/scripts.js"></script>
  <script src="/js/common.js"></script>
</body>