---
layout: post
title:  'Network Series [Part10]: 네트워크 활용편(4) 로드 밸런서(Load Balancer)'
description: 
date:   2022-07-16 15:01:35 +0300
image:  '/images/cs_logo.jpeg'
logo_image: '/images/cs_logo.jpeg'
categories: CS
tags: Network
---

---
**Table of Contents**
{: #toc }
*  TOC
{:toc}
---

# 로드 밸런싱의 정의

> Load balancing is the process of distributing network traffic across multiple servers. This ensures no single server bears too much demand. By spreading the work evenly, load balancing improves application responsiveness. It also increases availability of applications and websites for users. Modern applications cannot run without load balancers. Over time, software load balancers have added additional capabilities including application security.

![](/images/network_37.svg)

# 로드 밸런서의 특징

- the load balancer decides which servers can handle that traffic. This maintains a good UX
- Load balancers manage the flow of information between the server and an endpoint device
- Load balancers conduct continuous health checks on servers to ensure they can handle requests

# 로드 밸런서가 제공하는 이점

- Automatically detect server failures and redirect client traffic
- Allow for server maintenance without any impact
- Provide automated disaster recovery to backup sites
- Add and remove application servers without disruption
- Monitor and block malicious content

# 로드 밸런싱 방법

## Round Robin Algorithm

Round robin (RR) algorithm is a circular distribution of requests to enterprise servers in a sequence. There are two types of Round Robin – Weighted Round Robin and Dynamic Round Robin. Used mainly for a cluster of different servers, in weighted round robin each server is assigned a weight depending on its composition. Based on the preassigned efficiency the load is distributed in a cyclical procedure. Dynamic round robin are used to forward requests to associated servers based on real time calculation of assigned server weights.  

## Least connections

By taking into consideration the number of active and current connections to each application instance, ‘Least Connections’ load balancing algorithm distributes the load by choosing the server with the least number of active transactions (connections).  

## Source IP hash

In a source IP Hash, load balancing a server is selected based on a unique hash key. The Hash key is generated by taking the source and destination of the request. Based on the generated hash key, servers are assigned to clients.  

## The least bandwidth method

In the least bandwidth method backend servers are selected based on the server’s bandwidth consumption i.e the server consuming least bandwidth is selected (measured in Mbps). Similar to least bandwidth method is the least packets method. Here the server transmitting least packets are selected by the load balancer.  

# 로드 밸런싱의 이점

Load balancing can do more than just act as a network traffic cop. Software load balancers provide benefits like predictive analytics that determine traffic bottlenecks before they happen. As a result, the software load balancer gives an organization actionable insights. These are key to automation and can help drive business decisions.  

In the seven-layer Open System Interconnection (OSI) model, network firewalls are at levels one to three (L1-Physical Wiring, L2-Data Link and L3-Network). Meanwhile, load balancing happens between layers four to seven (L4-Transport, L5-Session, L6-Presentation and L7-Application).  

Load balancers have different capabilities, which include:  

L4 — directs traffic based on data from network and transport layer protocols, such as IP address and TCP port.  

L7 — adds content switching to load balancing. This allows routing decisions based on attributes like HTTP header, uniform resource identifier, SSL session ID and HTML form data.
GSLB — Global Server Load Balancing extends L4 and L7 capabilities to servers in different geographic locations.  

More enterprises are seeking to deploy cloud-native applications in data centers and public clouds. This is leading to significant changes in the capability of load balancers. In turn, this creates both challenges and opportunities for infrastructure and operations leaders.  

# Software Load Balancers vs. Hardware Load Balancers

Load balancers run as hardware appliances or are software-defined. Hardware appliances often run proprietary software optimized to run on custom processors. As traffic increases, the vendor simply adds more load balancing appliances to handle the volume. Software defined load balancers usually run on less-expensive, standard Intel x86 hardware. Installing the software in cloud environments like AWS EC2 eliminates the need for a physical appliance.  

![](/images/network_38.png)

# 로드 밸런서 종류

- **Network Server Load Balancers(NLB)**: Load balancers entered the market in the mid-1990s to support the surge of traffic on the internet. Load balancers had basic functionality designed to pool server resources to meet this demand. The load balancer managed connections based on the packet header. Specifically, they looked at the 5-tuple – source IP, destination IP, source port, destination port, and IP protocol. This is the entry of the network server load balancer or Layer 4 load balancer.

- **Application Load Balancers(ALB)**: As technology evolved, so did the load balancers. They became more advanced and started providing content awareness and content switching. These load balancers looked beyond the packet header and into the content payload. These load balancers look at the content such as the URL, HTTP header, and other things to make load balancing decisions. These are the application load balancers or Layer 7 load balancers.

- **Elastic Load Balancers(ELB)**: Elastic Load Balancing scales traffic to an application as demand changes over time. It uses system health checks to learn the status of application pool members (application servers) and routes traffic appropriately to available servers, manages fail-over to high availability targets, or automatically spins-up additional capacity.

# 참고

- [AVI Networks: What Is Load Balancing?](https://avinetworks.com/what-is-load-balancing/){:target="_blank"}
- [Progress Kemp: What is load balancing?](https://kemptechnologies.com/what-is-load-balancing){:target="_blank"}
- [Jae Honey, L4 / L7 로드밸런서 차이 (Load balancer)](https://jaehoney.tistory.com/73){:target="_blank"}