---
layout: post
title:  'MySQL Series [Part17] DML(2): SELECT ì¤‘ê¸‰ JOIN, SUBQUERY'
description: 
date:   2022-08-01 15:01:35 +0300
image:  '/images/mysql_logo.webp'
logo_image: '/images/mysql_logo.webp'
categories: DE
tags: MySQL
---

---
**Table of Contents**
{: #toc }
*  TOC
{:toc}

---

# INNER JOIN

- ë‘ í…Œì´ë¸” ëª¨ë‘ ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ë ˆì½”ë“œë§Œ ê°€ì§€ê³  ì˜´
- MySQLì—ì„œëŠ” INNER JOIN, JOIN, ì½¤ë§ˆ(,) ëª¨ë‘ INNER JOINì„ ëœ»í•¨
- ONì—ì„œ ë‘ í…Œì´ë¸”ì„ ì—°ê²°ì‹œí‚¬ ì¡°ê±´ì—†ì´ ì‚¬ìš©í•˜ëŠ” ê²½ìš°ë¥¼ Cartesian Product(ê³±ì§‘í•©) ì´ë¼ê³  í•¨
- ex. A: {1, 2, 3}, B: {x, y}ì¼ ë•Œ FROM A, Bë¥¼ í•˜ë©´ -> {[1, x], [1, y], [2, x], [2, y], [3, x], [3, y]}
- INNER JOINì€ ì¸ë±ìŠ¤ ìœ ë¬´ì— ë”°ë¼ ì˜µí‹°ë§ˆì´ì €ê°€ ì•Œì•„ì„œ ê¸°ì¤€ í…Œì´ë¸”(Driving table)ê³¼ ëŒ€ìƒ í…Œì´ë¸”(Driven table)ì´ ì •í•´ì§
- ë“œë¦¬ë¸ í…Œì´ë¸”ì´ ì„±ëŠ¥ ë¶€í•˜ê°€ ë§ì€ í¸ì´ë¼ ì¸ë±ìŠ¤ê°€ ìˆëŠ” í…Œì´ë¸”ì„ ë“œë¦¬ë¸ í…Œì´ë¸”ë¡œ ì‚¬ìš©í•´, ìµœëŒ€í•œ ë“œë¦¬ë¸ í…Œì´ë¸”ì˜ ì„±ëŠ¥ ë¶€í•˜ë¥¼ ë‚®ì¶˜ë‹¤

```sql
-- ì •ì„ì ì¸ ì‘ì„±ë²•
SELECT u.userid, u.name 
FROM usertbl AS u INNER JOIN buytbl AS b 
ON u.userid=b.userid 
WHERE u.userid="111"

-- ì¶•ì•½ ì‘ì„±ë²•
SELECT u.userid, u.name 
FROM usertbl u, buytbl b 
WHERE u.userid=b.userid AND u.userid="111"

/*
ë‚´ ìƒê°ì— ìœ„ì˜ ë°©ë²•ì€ ë”± êµì§‘í•©ì¸ ê²°ê³¼ì—ì„œ WHERE ì¡°ê±´ì ˆë¡œ í•„í„°ë§
ì•„ë˜ ë°©ë²•ì€ ê³±ì§‘í•©ìœ¼ë¡œ len(u) * len(b)ë§Œí¼ì˜ ê²°ê³¼ì—ì„œ WHERE ì¡°ê±´ì ˆ ì‚¬ìš© -> í›¨ì”¬ ëŠë¦´ê²ƒ ê°™ë‹¤
*/
```

ì°¸ê³ ë¡œ JOINì´ ìˆëŠ” ì¿¼ë¦¬ë¬¸ì˜ ì‹¤í–‰ ìˆœì„œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.  

1. FROM
2. ON
3. JOIN
4. WHERE
5. GROUP BY
6. HAVING
7. SELECT
8. ORDER BY
9. LIMIT

# LEFT JOIN, RIGHT JOIN

- ë‘˜ ë‹¤ OUTER JOIN
- LEFTëŠ” ì²« ë²ˆì§¸ í…Œì´ë¸”ì„ ê¸°ì¤€ìœ¼ë¡œ ë‘ ë²ˆì§¸ í…Œì´ë¸”ì„ ì¡°ì¸, RIGHTëŠ” ë‘ ë²ˆì§¸ í…Œì´ë¸”ì´ ê¸°ì¤€
- ê·¸ë˜ì„œ OUTER JOINì€ ìˆœì„œê°€ ì¤‘ìš” -> ê²°ê³¼ ìì²´ì˜ ì¸¡ë©´ê³¼ ì„±ëŠ¥ì  ì¸¡ë©´ ë‘ ê°€ì§€ê°€ ìˆìŒ
  - ìš°ì„  ì„±ëŠ¥ì„ ë”°ì§€ê¸° ì „ì— ê²°ê³¼ ìì²´ê°€ ìš°ë¦¬ê°€ ì›í•˜ëŠ” ê²°ê³¼ê°€ ë‚˜ì™€ì•¼ í•¨ -> ëª¨ë“  ë ˆì½”ë“œê°€ ë‚˜ì™€ì•¼ í•˜ëŠ” í…Œì´ë¸”ì„ ê¸°ì¤€ í…Œì´ë¸”
  - ìˆœì„œì— ìƒê´€ì—†ì´ ê²°ê³¼ê°€ ê°™ë‹¤ê³  íŒë‹¨ë˜ëŠ” ê²½ìš° ì„±ëŠ¥ì„ ë”°ì ¸ì•¼í•¨ -> ì¸ë±ìŠ¤ê°€ ìˆëŠ” í…Œì´ë¸”ì„ ë“œë¦¬ë¸ í…Œì´ë¸”ë¡œ ì“°ì(LEFTë©´ ë‘ ë²ˆì§¸)
- ë§Œì•½ OUTER JOIN, INNER JOIN ì–´ë–¤ ê²ƒì„ ì¨ë„ ëœë‹¤ë©´ ì˜µí‹°ë§ˆì´ì €ê°€ ë“œë¼ì´ë¹™ í…Œì´ë¸”ì„ ì„ íƒí•  ìˆ˜ ìˆëŠ” INNER JOINì´ ë‚˜ìŒ

```sql
SELECT STUDENT.NAME, PROFESSOR.NAME 
FROM STUDENT LEFT OUTER JOIN PROFESSOR
ON STUDENT.PID = PROFESSOR.ID 
WHERE GRADE = 1
```

# UNION

- ê°™ì€ êµ¬ì¡°ë¥¼ ê°€ì§€ëŠ” í…Œì´ë¸”ì„ í•©ì¹˜ëŠ” ê²ƒ
- UNIONì€ ë‘ í…Œì´ë¸”ì´ ê°™ì€ ë°ì´í„°ë¥¼ ê°€ì§ˆ ê²½ìš° í•œ ê°œë§Œ ìµœì¢… í…Œì´ë¸”ì— ë°˜ì˜ë˜ë„ë¡ í•¨ (ì¤‘ë³µ í—ˆìš© X)
- UNION ALLì€ ë‘ í…Œì´ë¸”ì´ ê°™ì€ ë ˆì½”ë“œë¥¼ ê°€ì§€ë”ë¼ë„ í•©ì¹  ê²½ìš° ë‘˜ ë‹¤ ìµœì¢… í…Œì´ë¸”ì— ë°˜ì˜(ì¤‘ë³µ í—ˆìš©)

```sql
SELECT í•„ë“œì´ë¦„ FROM í…Œì´ë¸”ì´ë¦„
UNION
SELECT í•„ë“œì´ë¦„ FROM í…Œì´ë¸”ì´ë¦„
```

# Subquery

- ì„œë¸Œì¿¼ë¦¬(subquery)ëŠ” ë‹¤ë¥¸ ì¿¼ë¦¬ ë‚´ë¶€ì— í¬í•¨ë˜ì–´ ìˆëŠ” SELETE ë¬¸ì„ ì˜ë¯¸
- ì„œë¸Œì¿¼ë¦¬ëŠ” ë‹¤ìŒê³¼ ê°™ì´ ê´„í˜¸()ë¡œ ê°ì‹¸ì„œ í‘œí˜„
- ë©”ì¸ì¿¼ë¦¬ ì‹¤í–‰ ì¤‘ê°„ì— ì„œë¸Œì¿¼ë¦¬ ì‹¤í–‰. ì„œë¸Œì¿¼ë¦¬ ì¢…ë£Œ í›„, ë©”ì¸ì¿¼ë¦¬ë„ ì‹¤í–‰ ëª¨ë‘ ë§ˆì¹˜ê³  ì¢…ë£Œ
- ë©”ì¸ì¿¼ë¦¬ ì‹¤í–‰ ë˜ë©´ ë¨¼ì € FROMìœ¼ë¡œ ë©”ì¸ í…Œì´ë¸” ë¶ˆëŸ¬ì˜¤ê¸° ë•Œë¬¸ì—, ì„œë¸Œì¿¼ë¦¬ëŠ” ë©”ì¸ì¿¼ë¦¬ì˜ ì»¬ëŸ¼ ì‚¬ìš© ê°€ëŠ¥
- ì„œë¸Œì¿¼ë¦¬ëŠ” ê°€ë…ì„±ì´ ì¢‹ë‹¤ëŠ” ì¥ì ì´ ìˆì§€ë§Œ JOIN ë³´ë‹¤ ì„±ëŠ¥ì´ ëŠë¦¼ -> ë‘˜ë‹¤ ê°€ëŠ¥í•œ ê²½ìš° JOIN ì‚¬ìš©
- (ìµœì‹  MySQLì€ ì‚¬ìš©ìê°€ ì„œë¸Œì¿¼ë¦¬ë¬¸ì„ ì‚¬ìš©í•˜ë©´ ìì²´ì ìœ¼ë¡œ ì¡°ì¸ë¬¸ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ì‹¤í–‰ì‹œí‚¤ë„ë¡ ì—…ë°ì´íŠ¸ ë˜ì—ˆìŒ)

## ì„œë¸Œì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆëŠ” ìœ„ì¹˜

```sql
SELECT 
FROM
WHERE
HAVING
INSERT
UPDATE
```

# ì°¸ê³ 

- [ì¸íŒŒ, [MYSQL] ğŸ“š ì„œë¸Œì¿¼ë¦¬ ê°œë… & ë¬¸ë²• ğŸ’¯ ì •ë¦¬](https://inpa.tistory.com/entry/MYSQL-%F0%9F%93%9A-%EC%84%9C%EB%B8%8C%EC%BF%BC%EB%A6%AC-%EC%A0%95%EB%A6%AC?category=890808){:target="_blank"} 
- [Navicat, Joins versus Subqueries: Which Is Faster?](https://www.navicat.com/en/company/aboutus/blog/1704-joins-versus-subqueries-which-is-faster){:target="_blank"} 